(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},8583:(t,e,n)=>{"use strict";n.d(e,{mr:()=>b,ez:()=>U,K0:()=>u,Do:()=>T,V_:()=>h,Ye:()=>C,S$:()=>y,mk:()=>N,sg:()=>R,O5:()=>M,b0:()=>w,lw:()=>c,EM:()=>q,JF:()=>G,PM:()=>V,w_:()=>a,bD:()=>j,q:()=>o,Mx:()=>O,HT:()=>s});var r=n(7716);let i=null;function o(){return i}function s(t){i||(i=t)}class a{}const u=new r.OlP("DocumentToken");let c=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return(0,r.LFG)(f)}const h=new r.OlP("Location Initialized");let f=(()=>{class t extends c{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(u))},t.\u0275prov=(0,r.Yz7)({factory:p,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function p(){return new f((0,r.LFG)(u))}function g(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function v(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:_,token:t,providedIn:"root"}),t})();function _(t){const e=(0,r.LFG)(u).location;return new w((0,r.LFG)(c),e&&e.origin||"")}const b=new r.OlP("appBaseHref");let w=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return g(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(c),r.LFG(b,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),T=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=g(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(c),r.LFG(b,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=v(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(y),r.LFG(c))},t.normalizeQueryParams=m,t.joinWithSlash=g,t.stripTrailingSlash=v,t.\u0275prov=(0,r.Yz7)({factory:I,token:t,providedIn:"root"}),t})();function I(){return new C((0,r.LFG)(y),(0,r.LFG)(c))}function E(t){return t.replace(/\/index.html$/,"")}var S=(()=>((S=S||{})[S.Zero=0]="Zero",S[S.One=1]="One",S[S.Two=2]="Two",S[S.Few=3]="Few",S[S.Many=4]="Many",S[S.Other=5]="Other",S))();const k=r.kL8;class x{}let A=(()=>{class t extends x{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(k(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function O(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let N=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class P{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let R=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new P(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new D(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new D(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class D{constructor(t,e){this.record=t,this.view=e}}let M=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new L,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){F("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){F("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class L{constructor(){this.$implicit=null,this.ngIf=null}}function F(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:x,useClass:A}]}),t})();const j="browser";function V(t){return"server"===t}let q=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new B((0,r.LFG)(u),window)}),t})();class B{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=H(this.window.history)||H(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function H(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class G{}},7716:(t,e,n)=>{"use strict";n.d(e,{deG:()=>tn,tb:()=>za,AFp:()=>Va,ip1:()=>Ua,CZH:()=>ja,hGG:()=>Lu,z2F:()=>Su,sBO:()=>Ys,Sil:()=>nu,_Vd:()=>ys,EJc:()=>Ya,SBq:()=>Ts,qLn:()=>pr,vpe:()=>Ta,gxx:()=>Yi,tBr:()=>bn,XFs:()=>A,OlP:()=>Je,zs3:()=>co,ZZ4:()=>qs,aQg:()=>Hs,soG:()=>Wa,YKP:()=>ia,v3s:()=>xu,h0i:()=>ra,PXZ:()=>wu,R0b:()=>ou,FiY:()=>wn,Lbi:()=>Ga,g9A:()=>Ha,Qsj:()=>Es,FYo:()=>Is,JOm:()=>mr,Tiy:()=>ks,q3G:()=>ur,tp0:()=>Tn,EAV:()=>Nu,Rgc:()=>Js,dDg:()=>fu,DyG:()=>en,q4F:()=>As,GfV:()=>xs,s_b:()=>sa,ifc:()=>M,eFA:()=>Tu,Gpc:()=>d,X6Q:()=>_u,_c5:()=>Du,VLi:()=>gu,c2e:()=>Ka,zSh:()=>Qi,wAp:()=>is,vHH:()=>v,EiD:()=>sr,mCW:()=>Hn,qzn:()=>Pn,JVY:()=>Dn,pB0:()=>Un,eBb:()=>Ln,L6k:()=>Mn,LAX:()=>Fn,cg1:()=>es,Tjo:()=>Ru,kL8:()=>ns,yhl:()=>Rn,dqk:()=>V,sIi:()=>_o,CqO:()=>Do,QGY:()=>Po,F4k:()=>Ro,RDi:()=>Et,AaK:()=>l,z3N:()=>Nn,qOj:()=>ho,TTD:()=>yt,_Bn:()=>gs,xp6:()=>ti,uIk:()=>To,ekj:()=>Ho,Suo:()=>Ma,Xpm:()=>$,lG2:()=>it,Yz7:()=>b,cJS:()=>w,oAB:()=>et,Yjl:()=>ot,Y36:()=>Eo,_UZ:()=>Oo,qZA:()=>Ao,TgZ:()=>xo,EpF:()=>No,n5z:()=>Ye,Ikx:()=>$o,LFG:()=>mn,$8M:()=>Qe,NdJ:()=>Mo,CRH:()=>La,kcU:()=>fe,O4$:()=>he,oxw:()=>Uo,Q6J:()=>So,s9C:()=>jo,MGl:()=>Vo,iGM:()=>Da,CHM:()=>Bt,LSH:()=>cr,kYT:()=>nt,YNc:()=>Io,_uU:()=>Yo,Oqu:()=>Zo,hij:()=>Qo});var r=n(9765),i=n(5319),o=n(7574),s=n(6682),a=n(8819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function m(t){return"string"==typeof t?t:null==t?"":String(t)}function y(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():m(t)}function _(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${y(t)} found${n}`)}function b(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function T(t){return C(t,E)||C(t,k)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(S)||t.hasOwnProperty(x))?t[S]:null}const E=u({"\u0275prov":u}),S=u({"\u0275inj":u}),k=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var A=(()=>((A=A||{})[A.Default=0]="Default",A[A.Host=1]="Host",A[A.Self=2]="Self",A[A.SkipSelf=4]="SkipSelf",A[A.Optional=8]="Optional",A))();let O;function N(t){const e=O;return O=t,e}function P(t,e,n){const r=T(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void _(l(t),"Injector")}function R(t){return{toString:t}.toString()}var D=(()=>((D=D||{})[D.OnPush=0]="OnPush",D[D.Default=1]="Default",D))(),M=(()=>((M=M||{})[M.Emulated=0]="Emulated",M[M.None=2]="None",M[M.ShadowDom=3]="ShadowDom",M))();const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j="undefined"!=typeof global&&global,V=L||j||F||U,q={},B=[],H=u({"\u0275cmp":u}),G=u({"\u0275dir":u}),z=u({"\u0275pipe":u}),K=u({"\u0275mod":u}),W=u({"\u0275loc":u}),Y=u({"\u0275fac":u}),Z=u({__NG_ELEMENT_ID__:u});let Q=0;function $(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Q++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(J):null,n})}function X(t){return st(t)||function(t){return t[G]||null}(t)}function J(t){return function(t){return t[z]||null}(t)}const tt={};function et(t){return R(()=>{const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(tt[t.id]=t.type),e})}function nt(t,e){return R(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=$;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[H]||null}function at(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class mt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function yt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),bt}function bt(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new mt(u&&u.currentValue,e,s===q),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}yt.ngInherit=!0;const Ct="http://www.w3.org/2000/svg";let It;function Et(t){It=t}function St(t){return!!t.listen}const kt={createRenderer:(t,e)=>void 0!==It?It:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return xt(e[t])}function Ot(t,e){return xt(e[t.index])}function Nt(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return lt(n)?n:n[0]}function Rt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:ie(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jt(){return Ut.bindingsEnabled}function Vt(){return Ut.lFrame.lView}function qt(){return Ut.lFrame.tView}function Bt(t){return Ut.lFrame.contextLView=t,t[8]}function Ht(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return Ut.lFrame.currentTNode}function zt(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function Kt(){return Ut.lFrame.isParent}function Wt(){return Ut.isInCheckNoChangesMode}function Yt(t){Ut.isInCheckNoChangesMode=t}function Zt(){return Ut.lFrame.bindingIndex++}function Qt(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,$t(e)}function $t(t){Ut.lFrame.currentDirectiveIndex=t}function Xt(){return Ut.lFrame.currentQueryIndex}function Jt(t){Ut.lFrame.currentQueryIndex=t}function te(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ee(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=te(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=re();return r.currentTNode=e,r.lView=t,!0}function ne(t){const e=re(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function re(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?ie(t):e}function ie(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function oe(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const se=oe;function ae(){const t=oe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ue(){return Ut.lFrame.selectedIndex}function ce(t){Ut.lFrame.selectedIndex=t}function le(){const t=Ut.lFrame;return Nt(t.tView,t.selectedIndex)}function he(){Ut.lFrame.currentNamespace=Ct}function fe(){Ut.lFrame.currentNamespace=null}function de(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function pe(t,e,n){me(t,e,3,n)}function ge(t,e,n,r){(3&t[2])===n&&me(t,e,n,r)}function ve(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function me(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ye(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ye(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const _e=-1;class be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function we(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ce(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Te(t){return 3===t||4===t||6===t}function Ce(t){return 64===t.charCodeAt(0)}function Ie(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ee(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ee(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Se(t){return t!==_e}function ke(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ae=!0;function Oe(t){const e=Ae;return Ae=t,e}let Ne=0;function Pe(t,e){const n=De(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Re(r.data,t),Re(e,null),Re(r.blueprint,null));const i=Me(t,e),o=t.injectorIndex;if(Se(i)){const t=ke(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Re(t,e){t.push(0,0,0,0,0,0,0,0,e)}function De(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Me(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return _e;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return _e}function Le(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Z)&&(r=n[Z]),null==r&&(r=n[Z]=Ne++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Fe(t,e,n){if(n&A.Optional)return t;_(e,"NodeInjector")}function Ue(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=N(void 0);try{return i?i.get(e,r,n&A.Optional):P(e,r,n&A.Optional)}finally{N(o)}}return Fe(r,e,n)}function je(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Z)?t[Z]:void 0;return"number"==typeof e?e>=0?255&e:qe:e}(n);if("function"==typeof o){if(!ee(e,t,r))return r&A.Host?Fe(i,n,r):Ue(e,n,r,i);try{const t=o(r);if(null!=t||r&A.Optional)return t;_(n)}finally{se()}}else if("number"==typeof o){let i=null,s=De(t,e),a=_e,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?Me(t,e):e[s+8],a!==_e&&Ke(r,!1)?(i=e[1],s=ke(a),e=xe(a,e)):s=-1);-1!==s;){const t=e[1];if(ze(o,s,t.data)){const t=Be(s,e,n,i,r,u);if(t!==Ve)return t}a=e[s+8],a!==_e&&Ke(r,e[1].data[s+8]===u)&&ze(o,s,e)?(i=t,s=ke(a),e=xe(a,e)):s=-1}}}return Ue(e,n,r,i)}const Ve={};function qe(){return new We(Ht(),Vt())}function Be(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=He(a,s,n,null==r?dt(a)&&Ae:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?Ge(e,s,u,a):Ve}function He(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function Ge(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof be){const s=i;s.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(y(o[n]));const a=Oe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?N(s.injectImpl):null;ee(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&N(u),Oe(a),s.resolving=!1,se()}}return i}function ze(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ke(t,e){return!(t&A.Self||t&A.Host&&e)}class We{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return je(this._tNode,this._lView,t,void 0,e)}}function Ye(t){return R(()=>{const e=t.prototype.constructor,n=e[Y]||Ze(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||Ze(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ze(t){return g(t)?()=>{const e=Ze(p(t));return e&&e()}:vt(t)}function Qe(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Te(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ht(),t)}const $e="__parameters__";function Xe(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty($e)?t[$e]:Object.defineProperty(t,$e,{value:[]})[$e];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=b({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tn=new Je("AnalyzeForEntryComponents"),en=Function;function nn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),nn(r,e)):e!==t&&e.push(r)}return e}function rn(t,e){t.forEach(t=>Array.isArray(t)?rn(t,e):e(t))}function on(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function an(t,e,n){let r=cn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function un(t,e){const n=cn(t,e);if(n>=0)return t[1|n]}function cn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const ln={},hn=/\n/gm,fn="__source",dn=u({provide:String,useValue:u});let pn;function gn(t){const e=pn;return pn=t,e}function vn(t,e=A.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?P(t,void 0,e):pn.get(t,e&A.Optional?null:void 0,e)}function mn(t,e=A.Default){return(O||vn)(p(t),e)}function yn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(mn(t,n))}else e.push(mn(r))}return e}function _n(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const bn=_n(Xe("Inject",t=>({token:t})),-1),wn=_n(Xe("Optional"),8),Tn=_n(Xe("SkipSelf"),4);let Cn;function In(t){var e;return(null===(e=function(){if(void 0===Cn&&(Cn=null,V.trustedTypes))try{Cn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Cn}())||void 0===e?void 0:e.createHTML(t))||t}class En{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Sn extends En{getTypeName(){return"HTML"}}class kn extends En{getTypeName(){return"Style"}}class xn extends En{getTypeName(){return"Script"}}class An extends En{getTypeName(){return"URL"}}class On extends En{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof En?t.changingThisBreaksApplicationSecurity:t}function Pn(t,e){const n=Rn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Rn(t){return t instanceof En&&t.getTypeName()||null}function Dn(t){return new Sn(t)}function Mn(t){return new kn(t)}function Ln(t){return new xn(t)}function Fn(t){return new An(t)}function Un(t){return new On(t)}class jn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(In(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Vn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=In(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=In(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Hn(t){return(t=String(t)).match(qn)||t.match(Bn)?t:"unsafe:"+t}function Gn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function zn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Kn=Gn("area,br,col,hr,img,wbr"),Wn=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yn=Gn("rp,rt"),Zn=zn(Yn,Wn),Qn=zn(Kn,zn(Wn,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zn(Yn,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zn),$n=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xn=Gn("srcset"),Jn=zn($n,Xn,Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=Gn("script,style,template");class er{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Qn.hasOwnProperty(e))return this.sanitizedSomething=!0,!tr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Jn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;$n[o]&&(s=Hn(s)),Xn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Hn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ir(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Qn.hasOwnProperty(e)&&!Kn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ir(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rr=/([^\#-~ |!])/g;function ir(t){return t.replace(/&/g,"&amp;").replace(nr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(rr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let or;function sr(t,e){let n=null;try{or=or||function(t){const e=new Vn(t);return function(){try{return!!(new window.DOMParser).parseFromString(In(""),"text/html")}catch(t){return!1}}()?new jn(e):e}(t);let r=e?String(e):"";n=or.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=or.getInertBodyElement(r)}while(r!==o);return In((new er).sanitizeChildren(ar(n)||n))}finally{if(n){const t=ar(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ar(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function cr(t){const e=function(){const t=Vt();return t&&t[12]}();return e?e.sanitize(ur.URL,t)||"":Pn(t,"URL")?Nn(t):Hn(m(t))}function lr(t,e){t.__ngContext__=e}function hr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function fr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(fr(t)):null}_findOriginalError(t){let e=fr(t);for(;e&&fr(e);)e=fr(e);return e}}const gr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function vr(t){return t instanceof Function?t():t}var mr=(()=>((mr=mr||{})[mr.Important=1]="Important",mr[mr.DashCase=2]="DashCase",mr))();function yr(t,e){return(void 0)(t,e)}function _r(t){const e=t[3];return ht(e)?e[3]:e}function br(t){return Tr(t[13])}function wr(t){return Tr(t[4])}function Tr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Cr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Or(e,n,a):Ar(e,n,a,i||null,!0):1===t&&null!==n?Ar(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Pr(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Cr(e,t,r,o,i);for(let s=ct;s<n.length;s++){const i=n[s];Ur(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ir(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Er(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Sr(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Er(o,r),e>0&&(t[n-1][4]=r[4]);const s=sn(t,ct+e);Ur(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function kr(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&Ur(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&xr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&xr(e[1],e),n=e&&e[4]}e=n}}(e)}}function xr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Er(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ar(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Or(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function Nr(t,e,n,r,i){null!==r?Ar(t,e,n,r,i):Or(t,e,n)}function Pr(t,e){return St(t)?t.parentNode(e):e.parentNode}function Rr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return Ot(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Ot(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Nr(o,i,n[a],s,!1);else Nr(o,i,n,s,!1)}function Dr(t,e){if(null!==e){const n=e.type;if(3&n)return Ot(e,t);if(4&n)return Lr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Dr(t,n);{const n=t[e.index];return ht(n)?Lr(-1,n):xt(n)}}if(32&n)return yr(e,t)()||xt(t[e.index]);{const n=Mr(t,e);return null!==n?Array.isArray(n)?n[0]:Dr(_r(t[16]),n):Dr(t,e.next)}}return null}function Mr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Lr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Dr(t,r)}return e[7]}function Fr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&lr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Fr(t,e,n.child,r,i,o,!1),Cr(e,t,i,a,o);else if(32&u){const s=yr(n,r);let u;for(;u=s();)Cr(e,t,i,u,o);Cr(e,t,i,a,o)}else 16&u?jr(t,e,r,n,i,o):Cr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ur(t,e,n,r,i,o){Fr(n,r,t.firstChild,e,i,o,!1)}function jr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Cr(e,t,i,a[u],o);else Fr(t,e,a,s[3],i,o,!0)}function Vr(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function qr(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Br(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Hr="ng-template";function Gr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Br(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function zr(t){return 4===t.type&&t.value!==Hr}function Kr(t,e,n){return e===(4!==t.type||n?t.value:Hr)}function Wr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Te(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Kr(t,u,n)||""===u&&1===e.length){if(Yr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Gr(t.attrs,c,n)){if(Yr(r))return!1;s=!0}continue}const l=Zr(8&r?"class":u,i,zr(t),n);if(-1===l){if(Yr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Br(e,c,0)||2&r&&c!==t){if(Yr(r))return!1;s=!0}}}}else{if(!s&&!Yr(r)&&!Yr(u))return!1;if(s&&Yr(u))continue;s=!1,r=u|1&r}}return Yr(r)||s}function Yr(t){return 0==(1&t)}function Zr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Qr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Wr(t,e[r],n))return!0;return!1}function $r(t,e){return t?":not("+e.trim()+")":e}function Xr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Yr(s)||(e+=$r(o,i),i=""),r=s,o=o||!Yr(r);n++}return""!==i&&(e+=$r(o,i)),e}const Jr={};function ti(t){ei(qt(),Vt(),ue()+t,Wt())}function ei(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&pe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ge(e,r,0,n)}ce(n)}function ni(t,e){return t<<17|e<<2}function ri(t){return t>>17&32767}function ii(t){return 2|t}function oi(t){return(131068&t)>>2}function si(t,e){return-131069&t|e<<2}function ai(t){return 1|t}function ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Jt(i),n.contentQueries(2,e[o],o)}}}function ci(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function li(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Gt(),s=Kt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function hi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function fi(t,e,n){ne(e);try{const r=t.viewQuery;null!==r&&qi(1,r,n);const i=t.template;null!==i&&gi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ui(t,e),t.staticViewQueries&&qi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Li(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ae()}}function di(t,e,n,r){const i=e[2];if(256==(256&i))return;ne(e);const o=Wt();try{Lt(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&gi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&pe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),ve(e,0)}if(function(t){for(let e=br(t);null!==e;e=wr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=br(t);null!==e;e=wr(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ui(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&pe(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),ve(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ce(~r);else{const i=r,o=n[++t],s=n[++t];Qt(o,i),s(2,e[i])}}}finally{ce(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Di(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&qi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&pe(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),ve(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ae()}}function pi(t,e,n,r){const i=e[10],o=!Wt(),s=Rt(e);try{o&&!s&&i.begin&&i.begin(),s&&fi(t,e,r),di(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function gi(t,e,n,r,i){const o=ue(),s=2&r;try{ce(-1),s&&e.length>ut&&ei(t,e,ut,Wt()),n(r,i)}finally{ce(o)}}function vi(t,e,n){jt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Pe(n,e),lr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&Oi(e,n,r);const u=Ge(e,t,a,n);lr(u,e),null!==s&&Ni(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,Ot(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ut.lFrame.currentDirectiveIndex;try{ce(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];$t(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ei(r,i)}}finally{ce(-1),$t(s)}}(t,e,n))}function mi(t,e,n=Ot){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function yi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=_i(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function _i(t,e,n,r,i,o,s,a,u,c){const l=ut+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function bi(t,e,n,r){const i=Hi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Gi(t).push(r,i.length-1))}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ti(t,e,n,r,i,o,s,a){const u=Ot(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Ki(t,n,c,r,i),dt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,St(o)?o.setProperty(u,r,i):Ce(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ci(t,e,n,r){let i=!1;if(jt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Qr(n,s.selectors,!1)&&(i||(i=[]),Le(Pe(n,e),t,s.type),gt(s)?(Si(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,xi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=hi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ie(n.mergedAttrs,c.hostAttrs),Ai(t,n,e,u,c),ki(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||zr(e)?null:Pi(n,i);o.push(c),s=wi(n,u,s),a=wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ie(n.mergedAttrs,n.attrs),i}function Ii(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ei(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Si(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ki(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function xi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ai(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new be(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Ii(t,e,0,r,hi(t,n,i.hostVars,Jr),i)}function Oi(t,e,n){const r=Ot(e,t),i=yi(n),o=t[10],s=Fi(t,ci(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ni(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Pi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ri(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Di(t,e){const n=Pt(e,t);if(Dt(n)){const t=n[1];80&n[2]?di(t,n,t.template,n[8]):n[5]>0&&Mi(n)}}function Mi(t){for(let n=br(t);null!==n;n=wr(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];di(t,e,t.template,e[8])}else e[5]>0&&Mi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Dt(r)&&r[5]>0&&Mi(r)}}function Li(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),fi(r,n,n[8])}function Fi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ui(t){for(;t;){t[2]|=64;const e=_r(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ji(t,e,n){const r=e[10];r.begin&&r.begin();try{di(t,e,t.template,n)}catch(i){throw zi(e,i),i}finally{r.end&&r.end()}}function Vi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=hr(n),i=r[1];pi(i,r,i.template,n)}}(t[8])}function qi(t,e,n){Jt(0),e(t,n)}const Bi=(()=>Promise.resolve(null))();function Hi(t){return t[7]||(t[7]=[])}function Gi(t){return t.cleanup||(t.cleanup=[])}function zi(t,e){const n=t[9],r=n?n.get(pr,null):null;r&&r.handleError(e)}function Ki(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Wi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Yi=new Je("INJECTOR",-1);class Zi{get(t,e=ln){if(e===ln){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Qi=new Je("Set Injector scope."),$i={},Xi={};let Ji;function to(){return void 0===Ji&&(Ji=new Zi),Ji}function eo(t,e=null,n=null,r){return new no(t,n,e||to(),r)}class no{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&rn(e,n=>this.processProvider(n,t,e)),rn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Yi,oo(void 0,this));const o=this.records.get(Qi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ln,n=A.Default){this.assertNotDestroyed();const r=gn(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Je)&&T(t);e=n&&this.injectableDefInScope(n)?oo(ro(t),$i):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?to():this.parent).get(t,e=n&A.Optional&&e===ln?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[fn]&&i.unshift(e[fn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(hn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{gn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{rn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];rn(r,t=>this.processProvider(t,n,r||B))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,oo(a,$i));const u=r.providers;if(null!=u&&!s){const e=t;rn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ao(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return so(t)?oo(void 0,t.useValue):oo(io(t),$i)}(t);if(ao(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=oo(void 0,$i,!0),e.factory=()=>yn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===$i&&(e.value=Xi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ro(t){const e=T(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof Je)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[E]||t[k]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function io(t,e,n){let r;if(ao(t)){const e=p(t);return vt(e)||ro(e)}if(so(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...yn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>mn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||ro(e);r=()=>new e(...yn(t.deps))}var i;return r}function oo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function so(t){return null!==t&&"object"==typeof t&&dn in t}function ao(t){return"function"==typeof t}const uo=function(t,e,n){return function(t,e=null,n=null,r){const i=eo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class co{static create(t,e){return Array.isArray(t)?uo(t,e,""):uo(t.providers,t.parent,t.name||"")}}function lo(t,e){de(hr(t)[1],Ht())}function ho(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=fo(t.inputs),e.declaredInputs=fo(t.declaredInputs),e.outputs=fo(t.outputs);const n=i.hostBindings;n&&vo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&po(t,o),s&&go(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===ho&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ie(i.hostAttrs,n=Ie(n,i.hostAttrs))}}(r)}function fo(t){return t===q?{}:t===B?[]:t}function po(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function go(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function vo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}co.THROW_IF_NOT_FOUND=ln,co.NULL=new Zi,co.\u0275prov=b({token:co,providedIn:"any",factory:()=>mn(Yi)}),co.__NG_ELEMENT_ID__=-1;let mo=null;function yo(){if(!mo){const t=V.Symbol;if(t&&t.iterator)mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(mo=n)}}}return mo}function _o(t){return!!bo(t)&&(Array.isArray(t)||!(t instanceof Map)&&yo()in t)}function bo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function To(t,e,n,r){const i=Vt();return wo(i,Zt(),e)&&(qt(),function(t,e,n,r,i,o){const s=Ot(t,e);!function(t,e,n,r,i,o,s){if(null==o)St(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?m(o):s(o,r||"",i);St(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(le(),i,t,e,n,r)),To}function Co(t,e,n,r){return wo(t,Zt(),n)?e+m(n)+r:Jr}function Io(t,e,n,r,i,o,s,a){const u=Vt(),c=qt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=li(e,t,4,s||null,Mt(c,a));Ci(e,n,l,Mt(c,u)),de(e,l);const h=l.tViews=_i(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];zt(h,!1);const f=u[11].createComment("");Rr(c,u,f,h),lr(f,u),Fi(u,u[l]=Ri(f,u,f,h)),pt(h)&&vi(c,u,h),null!=s&&mi(u,h,a)}function Eo(t,e=A.Default){const n=Vt();return null===n?mn(t,e):je(Ht(),n,p(t),e)}function So(t,e,n){const r=Vt();return wo(r,Zt(),e)&&Ti(qt(),le(),r,t,e,r[11],n,!1),So}function ko(t,e,n,r,i){const o=i?"class":"style";Ki(t,n,e.inputs[o],o,r)}function xo(t,e,n,r){const i=Vt(),o=qt(),s=ut+t,a=i[11],u=i[s]=Ir(a,e,Ut.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=li(e,t,2,i,Mt(a,o));return Ci(e,n,u,Mt(a,s)),null!==u.attrs&&Wi(u,u.attrs,!1),null!==u.mergedAttrs&&Wi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&we(a,u,l);const h=c.classes;null!==h&&qr(a,u,h);const f=c.styles;null!==f&&Vr(a,u,f),64!=(64&c.flags)&&Rr(o,i,u,c),0===Ut.lFrame.elementDepthCount&&lr(u,i),Ut.lFrame.elementDepthCount++,pt(c)&&(vi(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&mi(i,c)}function Ao(){let t=Ht();Kt()?Ut.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=qt();n.firstCreatePass&&(de(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ko(n,e,Vt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ko(n,e,Vt(),e.stylesWithoutHost,!1)}function Oo(t,e,n,r){xo(t,e,n,r),Ao()}function No(){return Vt()}function Po(t){return!!t&&"function"==typeof t.then}function Ro(t){return!!t&&"function"==typeof t.subscribe}const Do=Ro;function Mo(t,e,n,r){const i=Vt(),o=qt(),s=Ht();return function(t,e,n,r,i,o,s,a){const u=pt(r),c=t.firstCreatePass&&Gi(t),l=Hi(e);let h=!0;if(3&r.type||a){const f=Ot(r,e),d=a?a(f):f,p=l.length,g=a?t=>a(xt(t[r.index])):r.index;if(St(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Fo(r,e,0,o,!1);const t=n.listen(d,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=Fo(r,e,0,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=Fo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Mo}function Lo(t,e,n,r){try{return!1!==n(r)}catch(i){return zi(t,i),!1}}function Fo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Ui(s);let a=Lo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Lo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Uo(t=1){return function(t){return(Ut.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ut.lFrame.contextLView))[8]}(t)}function jo(t,e,n){return Vo(t,"",e,"",n),jo}function Vo(t,e,n,r,i){const o=Vt(),s=Co(o,e,n,r);return s!==Jr&&Ti(qt(),le(),o,t,s,o[11],i,!1),Vo}function qo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ri(o):oi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Bo(t[a],e)&&(u=!0,t[a+1]=r?ai(n):ii(n)),a=r?ri(n):oi(n)}u&&(t[n+1]=r?ii(o):ai(o))}function Bo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&cn(t,e)>=0}function Ho(t,e){return function(t,e,n,r){const i=Vt(),o=qt(),s=function(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ue()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=zo(n=Go(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Go(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==oi(r))return t[ri(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Go(null,t,e,n[1],r),n=zo(n,e.attrs,r),function(t,e,n,r){t[ri(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=zo(r,t[o].hostAttrs,true);return zo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ri(s),u=oi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||cn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ri(t[a+1]);t[r+1]=ni(e,a),0!==e&&(t[e+1]=si(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ni(a,0),0!==a&&(t[a+1]=si(t[a+1],r)),a=r;else t[r+1]=ni(u,0),0===a?a=r:t[u+1]=si(t[u+1],r),u=r;l&&(t[r+1]=ii(t[r+1])),qo(t,c,r,!0),qo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&cn(o,e)>=0&&(n[r+1]=ai(n[r+1]))}(e,c,t,r),s=ni(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Jr&&wo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Wo(1==(1&c)?Ko(u,e,n,i,oi(c),s):void 0)||(Wo(o)||function(t){return 2==(2&t)}(c)&&(o=Ko(u,null,n,i,a,s)),function(t,e,n,r,i){const o=St(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,At(ue(),n),i,o))}(o,o.data[ue()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(Nn(t))),t}(e),true,s)}(t,e),Ho}function Go(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=zo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function zo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),an(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ko(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Jr&&(l=c?B:void 0);let h=c?un(l,r):u===r?l:void 0;if(o&&!Wo(h)&&(h=un(e,r)),Wo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ri(f):oi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=un(t,r))}return a}function Wo(t){return void 0!==t}function Yo(t,e=""){const n=Vt(),r=qt(),i=t+ut,o=r.firstCreatePass?li(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return St(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Rr(r,n,s,o),zt(o,!1)}function Zo(t){return Qo("",t,""),Zo}function Qo(t,e,n){const r=Vt(),i=Co(r,t,e,n);return i!==Jr&&function(t,e,n){const r=At(e,t);!function(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ue(),i),Qo}function $o(t,e,n){const r=Vt();return wo(r,Zt(),e)&&Ti(qt(),le(),r,t,e,r[11],n,!0),$o}const Xo=void 0;var Jo=["en",[["a","p"],["AM","PM"],Xo],[["AM","PM"],Xo,Xo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xo,"{1} 'at' {0}",Xo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ts={};function es(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=rs(e);if(n)return n;const r=e.split("-")[0];if(n=rs(r),n)return n;if("en"===r)return Jo;throw new Error(`Missing locale data for the locale "${t}".`)}function ns(t){return es(t)[is.PluralCase]}function rs(t){return t in ts||(ts[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),ts[t]}var is=(()=>((is=is||{})[is.LocaleId=0]="LocaleId",is[is.DayPeriodsFormat=1]="DayPeriodsFormat",is[is.DayPeriodsStandalone=2]="DayPeriodsStandalone",is[is.DaysFormat=3]="DaysFormat",is[is.DaysStandalone=4]="DaysStandalone",is[is.MonthsFormat=5]="MonthsFormat",is[is.MonthsStandalone=6]="MonthsStandalone",is[is.Eras=7]="Eras",is[is.FirstDayOfWeek=8]="FirstDayOfWeek",is[is.WeekendRange=9]="WeekendRange",is[is.DateFormat=10]="DateFormat",is[is.TimeFormat=11]="TimeFormat",is[is.DateTimeFormat=12]="DateTimeFormat",is[is.NumberSymbols=13]="NumberSymbols",is[is.NumberFormats=14]="NumberFormats",is[is.CurrencyCode=15]="CurrencyCode",is[is.CurrencySymbol=16]="CurrencySymbol",is[is.CurrencyName=17]="CurrencyName",is[is.Currencies=18]="Currencies",is[is.Directionality=19]="Directionality",is[is.PluralCase=20]="PluralCase",is[is.ExtraData=21]="ExtraData",is))();const os="en-US";let ss=os;function as(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ss=t.toLowerCase().replace(/_/g,"-"))}function us(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)us(t[o],e,n,r,i);else{const o=qt(),s=Vt();let a=ao(t)?t:p(t.provide),u=io(t);const c=Ht(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(ao(t)||!t.multi){const r=new be(u,i,Eo),d=hs(a,e,i?l:l+f,h);-1===d?(Le(Pe(c,s),o,a),cs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=hs(a,e,l+f,h),p=hs(a,e,l,l+f),g=d>=0&&n[d],v=p>=0&&n[p];if(i&&!v||!i&&!g){Le(Pe(c,s),o,a);const l=function(t,e,n,r,i){const o=new be(t,n,Eo);return o.multi=[],o.index=e,o.componentProviders=0,ls(o,i,r&&!n),o}(i?ds:fs,n.length,i,r,u);!i&&v&&(n[p].providerFactory=l),cs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else cs(o,t,d>-1?d:p,ls(n[i?p:d],u,!i&&r));!i&&r&&v&&n[p].componentProviders++}}}function cs(t,e,n,r){const i=ao(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ls(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function hs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function fs(t,e,n,r){return ps(this.multi,[])}function ds(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ge(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ps(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ps(i,o);return o}function ps(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function gs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=qt();if(r.firstCreatePass){const i=gt(t);us(n,r.data,r.blueprint,i,!0),us(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class vs{}class ms{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class ys{}function _s(...t){}function bs(t,e){return new Ts(Ot(t,e))}ys.NULL=new ms;const ws=function(){return bs(Ht(),Vt())};let Ts=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ws,t})();function Cs(t){return t instanceof Ts?t.nativeElement:t}class Is{}let Es=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ss(),t})();const Ss=function(){const t=Vt(),e=Pt(Ht().index,t);return function(t){return t[11]}(lt(e)?e:t)};let ks=(()=>{class t{}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>null}),t})();class xs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const As=new xs("12.1.2");class Os{constructor(){}supports(t){return _o(t)}create(t){return new Ps(t)}}const Ns=(t,e)=>e;class Ps{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ns}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ls(n,r,i)?e:n,s=Ls(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!_o(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[yo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Rs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ms),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ms),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Rs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ds{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ms{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ds,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ls(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Fs{constructor(){}supports(t){return t instanceof Map||bo(t)}create(){return new Us}}class Us{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new js(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class js{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Vs(){return new qs([new Os])}let qs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Vs()),deps:[[t,new Tn,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=b({token:t,providedIn:"root",factory:Vs}),t})();function Bs(){return new Hs([new Fs])}let Hs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Bs()),deps:[[t,new Tn,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=b({token:t,providedIn:"root",factory:Bs}),t})();function Gs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),ht(o))for(let t=ct;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Gs(e[1],e,n,r)}const s=n.type;if(8&s)Gs(t,e,n.child,r);else if(32&s){const t=yr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Mr(e,n);if(Array.isArray(t))r.push(...t);else{const n=_r(e[16]);Gs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class zs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Gs(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Sr(t,n),sn(e,n))}this._attachedToViewContainer=!1}kr(this._lView[1],this._lView)}onDestroy(t){bi(this._lView[1],this._lView,null,t)}markForCheck(){Ui(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ji(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Yt(!0);try{ji(t,e,n)}finally{Yt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Ur(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ks extends zs{constructor(t){super(t),this._view=t}detectChanges(){Vi(this._view)}checkNoChanges(){!function(t){Yt(!0);try{Vi(t)}finally{Yt(!1)}}(this._view)}get context(){return null}}const Ws=function(t){return function(t,e,n){if(dt(t)&&!n){const n=Pt(t.index,e);return new zs(n,n)}return 47&t.type?new zs(e[16],e):null}(Ht(),Vt(),16==(16&t))};let Ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ws,t})();const Zs=[new Fs],Qs=new qs([new Os]),$s=new Hs(Zs),Xs=function(){return na(Ht(),Vt())};let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xs,t})();const ta=Js,ea=class extends ta{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),fi(e,n,t),new zs(n)}};function na(t,e){return 4&t.type?new ea(e,t,bs(t,e)):null}class ra{}class ia{}const oa=function(){return ha(Ht(),Vt())};let sa=(()=>{class t{}return t.__NG_ELEMENT_ID__=oa,t})();const aa=sa,ua=class extends aa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return bs(this._hostTNode,this._hostLView)}get injector(){return new We(this._hostTNode,this._hostLView)}get parentInjector(){const t=Me(this._hostTNode,this._hostLView);if(Se(t)){const e=xe(t,this._hostLView),n=ke(t);return new We(e[1].data[n+8],e)}return new We(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ca(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ra,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ua(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ct+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ct?(e[4]=n[i],on(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Lr(i,o),a=n[11],u=Pr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Ur(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),on(la(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ca(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Sr(this._lContainer,e);n&&(sn(la(this._lContainer),e),kr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Sr(this._lContainer,e);return n&&null!=sn(la(this._lContainer),e)?new zs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ca(t){return t[8]}function la(t){return t[8]||(t[8]=[])}function ha(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=Ot(t,e);Ar(n,Pr(n,r),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ri(r,e,i,t),Fi(e,n)}return new ua(n,t,e)}const fa={};class da extends ys{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new va(e,this.ngModule)}}function pa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ga=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gr});class va extends vs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Xr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return pa(this.componentDef.inputs)}get outputs(){return pa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,fa,i);return o!==fa||r===fa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Is,kt),s=i.get(ks,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(St(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ir(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?Ct:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:gr,clean:Bi,playerHandler:null,flags:0},f=_i(0,null,null,1,0,null,null,null,null,null),d=ci(null,f,h,l,null,null,o,a,s,i);let p,g;ne(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=li(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Wi(a,u,!0),null!==t&&(we(i,t,u),null!==a.classes&&qr(i,t,a.classes),null!==a.styles&&Vr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ci(n,yi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Le(Pe(a,n),s,e.type),Si(s,a),xi(a,n.length,1)),Fi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)we(a,c,["ng-version",As.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Yr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&we(a,c,t),e&&e.length>0&&qr(a,c,e.join(" "))}if(g=Nt(f,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ht();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ai(t,r,e,hi(t,e,1,null),n));const i=Ge(e,t,r.directiveStart,r);lr(i,e);const o=Ot(r,e);return o&&lr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ht();e.contentQueries(1,s,t.directiveStart)}const a=Ht();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ce(a.index),Ii(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ei(e,s)),s}(t,this.componentDef,d,h,[lo]),fi(f,d,null)}finally{ae()}return new ma(this.componentType,p,bs(g,d),d,g)}}class ma extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ks(r),this.componentType=t}get injector(){return new We(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ya=new Map;class _a extends ra{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new da(this);const n=at(t),r=t[W]||null;r&&as(r),this._bootstrapComponents=vr(n.bootstrap),this._r3Injector=eo(t,e,[{provide:ra,useValue:this},{provide:ys,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=co.THROW_IF_NOT_FOUND,n=A.Default){return t===co||t===ra||t===Yi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ba extends ia{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,ya.get(i),n),ya.set(i,n));const o=vr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new _a(this.moduleType,t)}}function wa(t){return e=>{setTimeout(t,void 0,e)}}const Ta=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=wa(u),a&&(a=wa(a)),c&&(c=wa(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Ca(){return this._results[yo()]()}class Ia{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=yo(),n=Ia.prototype;n[e]||(n[e]=Ca)}get changes(){return this._changes||(this._changes=new Ta)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=nn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Ea{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ea(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Sa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Fa(t,e).matches&&this.queries[e].setDirty()}}class ka{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class xa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new xa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Aa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Aa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Oa(e,i)),this.matchTNodeWithReadOption(t,e,He(e,t,i,!1,!1))}else n===Js?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,He(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ts||r===sa||r===Js&&4&e.type)this.addMatch(e.index,-2);else{const n=He(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Oa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Na(t,e,n,r){return-1===n?function(t,e){return 11&t.type?bs(t,e):4&t.type?na(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ts?bs(e,t):n===Js?na(e,t):n===sa?ha(e,t):void 0}(t,e,r):Ge(t,t[1],n,e)}function Pa(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Na(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ra(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Pa(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ct;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ra(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ra(n[1],n,i,r)}}}}}return r}function Da(t){const e=Vt(),n=qt(),r=Xt();Jt(r+1);const i=Fa(n,r);if(t.dirty&&Rt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ra(n,e,r,[]):Pa(n,e,i,r);t.reset(o,Cs),t.notifyOnChanges()}return!0}return!1}function Ma(t,e,n,r){const i=qt();if(i.firstCreatePass){const o=Ht();(function(t,e,n){null===t.queries&&(t.queries=new xa),t.queries.track(new Aa(e,n))})(i,new ka(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Ia(4==(4&n));bi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Sa),e[19].queries.push(new Ea(r))}(i,Vt(),n)}function La(){return t=Vt(),e=Xt(),t[19].queries[e].queryList;var t,e}function Fa(t,e){return t.queries.getByIndex(e)}const Ua=new Je("Application Initializer");let ja=(()=>{class t{constructor(t){this.appInits=t,this.resolve=_s,this.reject=_s,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Po(e))t.push(e);else if(Do(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(mn(Ua,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Va=new Je("AppId"),qa={provide:Va,useFactory:function(){return`${Ba()}${Ba()}${Ba()}`},deps:[]};function Ba(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ha=new Je("Platform Initializer"),Ga=new Je("Platform ID"),za=new Je("appBootstrapListener");let Ka=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Wa=new Je("LocaleId"),Ya=new Je("DefaultCurrencyCode");class Za{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Qa=function(t){return new ba(t)},$a=Qa,Xa=function(t){return Promise.resolve(Qa(t))},Ja=function(t){const e=Qa(t),n=vr(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new va(n)),t},[]);return new Za(e,n)},tu=Ja,eu=function(t){return Promise.resolve(Ja(t))};let nu=(()=>{class t{constructor(){this.compileModuleSync=$a,this.compileModuleAsync=Xa,this.compileModuleAndAllComponentsSync=tu,this.compileModuleAndAllComponentsAsync=eu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const ru=(()=>Promise.resolve(0))();function iu(t){"undefined"==typeof Zone?ru.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ou{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ta(!1),this.onMicrotaskEmpty=new Ta(!1),this.onStable=new Ta(!1),this.onError=new Ta(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,uu(t),t.isCheckStableRunning=!0,au(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),uu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return cu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),lu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return cu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),lu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,uu(t),au(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ou.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ou.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,su,_s,_s);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const su={};function au(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function cu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function lu(t){t._nesting--,au(t)}class hu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ta,this.onMicrotaskEmpty=new Ta,this.onStable=new Ta,this.onError=new Ta}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let fu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ou.assertNotInAngularZone(),iu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())iu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(mn(ou))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})(),du=(()=>{class t{constructor(){this._applications=new Map,mu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return mu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();class pu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function gu(t){mu=t}let vu,mu=new pu,yu=!1;function _u(){return yu=!0,!0}const bu=new Je("AllowMultipleToken");class wu{constructor(t,e){this.name=t,this.token=e}}function Tu(t,e,n=[]){const r=`Platform: ${e}`,i=new Je(r);return(e=[])=>{let o=Cu();if(!o||o.injector.get(bu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Qi,useValue:"platform"});!function(t){if(vu&&!vu.destroyed&&!vu.injector.get(bu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vu=t.get(Iu);const e=t.get(Ha,null);e&&e.forEach(t=>t())}(co.create({providers:t,name:r}))}return function(t){const e=Cu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Cu(){return vu&&!vu.destroyed?vu:null}let Iu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new hu:("zone.js"===t?void 0:t)||new ou({enableLongStackTrace:_u(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:ou,useValue:n}];return n.run(()=>{const e=co.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(pr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{ku(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Po(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ja);return t.runInitializers(),t.donePromise.then(()=>(as(i.injector.get(Wa,os)||os),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Eu({},e);return function(t,e,n){const r=new ba(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Su);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(mn(co))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function Eu(t,e){return Array.isArray(e)?e.reduce(Eu,t):Object.assign(Object.assign({},t),e)}let Su=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ou.assertNotInAngularZone(),iu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ou.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof vs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ra),i=n.create(co.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(fu,null),a=s&&i.injector.get(du);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),ku(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ku(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(za,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(mn(ou),mn(co),mn(pr),mn(ys),mn(ja))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function ku(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class xu{}class Au{}const Ou={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Nu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ou}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Pu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Pu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(mn(nu),mn(Au,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function Pu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ru=function(t){return null},Du=Tu(null,"core",[{provide:Ga,useValue:"unknown"},{provide:Iu,deps:[co]},{provide:du,deps:[]},{provide:Ka,deps:[]}]),Mu=[{provide:Su,useClass:Su,deps:[ou,co,pr,ys,ja]},{provide:ga,deps:[ou],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ja,useClass:ja,deps:[[new wn,Ua]]},{provide:nu,useClass:nu,deps:[]},qa,{provide:qs,useFactory:function(){return Qs},deps:[]},{provide:Hs,useFactory:function(){return $s},deps:[]},{provide:Wa,useFactory:function(t){return as(t=t||"undefined"!=typeof $localize&&$localize.locale||os),t},deps:[[new bn(Wa),new wn,new Tn]]},{provide:Ya,useValue:"USD"}];let Lu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(mn(Su))},t.\u0275mod=et({type:t}),t.\u0275inj=w({providers:Mu}),t})()},57:(t,e,n)=>{"use strict";n.d(e,{hO:()=>S,xv:()=>_,Dh:()=>y,HU:()=>d,GT:()=>m,sI:()=>I,on:()=>w,ss:()=>p,pX:()=>v,yq:()=>T});var r=n(7771),i=n(3637),o=n(3342),s=n(3101),a=n(309),u=n(7716),c=n(2329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],v=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},y=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig"),b=new u.GfV("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const T=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function I(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[y,u.R0b,[new u.FiY,_]]};let S=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",b.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:y,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[E]}),t})()},7367:(t,e,n)=>{"use strict";var r=n(9759),i=n(6034),o=n(4762),s=n(4685),a=n(300);function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new s.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenObservers:[]},g={enabled:!1};function v(t){return d.get(t)||p}function m(t,e){d.set(t,e)}function y(){return g}function _(){return self.grecaptcha}function b(t){if(!v(t).activated)throw f.create("use-before-activation",{appName:t.name})}function w(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return b(t),[4,v(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise(function(n,r){var i=v(t).reCAPTCHAState;e.ready(function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}function T(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=v(t);m(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var C="https://content-firebaseappcheck.googleapis.com/v1beta",I=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(t),new Promise(function(t){setTimeout(t,r)}))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var r})})},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function E(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,function(){var t,i,s,a,u,c,l,h,d,p;return o.__generator(this,function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw f.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}})})}function S(t,e){var n=t.options;return{url:C+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function k(t,e){var n=t.options;return{url:C+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}var x="firebase-app-check-store",A="debug-token",O=null;function N(){return O||(O=new Promise(function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(x,{keyPath:"compositeKey"})}}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}}))}function P(t){return D(M(t))}function R(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,N()];case 1:return n=o.sent(),r=n.transaction(x,"readwrite"),i=r.objectStore(x),s=i.put({compositeKey:t,value:e}),[2,new Promise(function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function D(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,N()];case 1:return e=o.sent(),n=e.transaction(x,"readonly"),r=n.objectStore(x),i=r.get(t),[2,new Promise(function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function M(t){return t.options.appId+"-"+t.name}var L=new a.Logger("@firebase/app-check");function F(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,P(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),L.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}function U(t,e){return s.isIndexedDBAvailable()?function(t,e){return R(M(t),e)}(t,e).catch(function(t){L.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function j(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){if((t=y()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var V={error:"UNKNOWN_ERROR"};function q(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,h,d,p,g,_,T,C,I;return o.__generator(this,function(x){switch(x.label){case 0:return b(t),r=v(t),a=void 0,(i=r.token)?[3,2]:[4,F(t)];case 1:(u=x.sent())&&z(u)&&(i=u,m(t,o.__assign(o.__assign({},r),{token:i})),G(t,{token:i.token})),x.label=2;case 2:return!n&&i&&z(i)?[2,{token:i.token}]:y().enabled?(l=E,h=k,d=[t],[4,j()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,d.concat([x.sent()])),e])];case 4:return c=x.sent(),[4,U(t,c)];case 5:return x.sent(),m(t,o.__assign(o.__assign({},r),{token:c})),[2,{token:c.token}];case 6:return x.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return p=x.sent(),g=s.issuedAtTime(p.token),_=null!==g&&g<Date.now()&&g>0?1e3*g:Date.now(),i=o.__assign(o.__assign({},p),{issuedAtTimeMillis:_}),[3,11];case 8:return[4,w(t).catch(function(t){throw f.create("recaptcha-error")})];case 9:return T=x.sent(),[4,E(S(t,T),e)];case 10:i=x.sent(),x.label=11;case 11:return[3,13];case 12:return C=x.sent(),L.error(C),a=C,[3,13];case 13:return i?[3,14]:(I=function(t){return{token:(e=V,s.base64.encodeString(JSON.stringify(e),!1)),error:t};var e}(a),[3,16]);case 14:return I={token:i.token},m(t,o.__assign(o.__assign({},r),{token:i})),[4,U(t,i)];case 15:x.sent(),x.label=16;case 16:return G(t,I),[2,I]}})})}function B(t,e,n,r,i){var s=v(t),a={next:r,error:i,type:n},u=o.__assign(o.__assign({},s),{tokenObservers:o.__spreadArray(o.__spreadArray([],s.tokenObservers),[a])});if(!u.tokenRefresher){var c=function(t,e){var n=this;return new I(function(){return o.__awaiter(n,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return v(t).token?[3,2]:[4,q(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,q(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var e=v(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(t,e);u.tokenRefresher=c}if(u.tokenRefresher.isRunning()||!0!==s.isTokenAutoRefreshEnabled||u.tokenRefresher.start(),s.token&&z(s.token)){var l=s.token;Promise.resolve().then(function(){return r({token:l.token})}).catch(function(){})}m(t,u)}function H(t,e){var n=v(t),r=n.tokenObservers.filter(function(t){return t.next!==e});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function G(t,e){for(var n=0,r=v(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(o){}}}function z(t){return t.expireTimeMillis-Date.now()>0}var K="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{app:e,activate:function(t,n){return function(t,e,n){var r=v(t);if(r.activated)throw f.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,m(t,i),i.siteKey&&function(t,e){var n=v(t),r=new s.Deferred;m(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u,c,l=_();return l?l.ready(function(){T(t,e,l,i),r.resolve(l)}):(u=function(){var n=_();if(!n)throw new Error("no recaptcha");n.ready(function(){T(t,e,n,i),r.resolve(n)})},(c=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",c.onload=u,document.head.appendChild(c)),r.promise}(t,i.siteKey).catch(function(){})}(e,t,n)},setTokenAutoRefreshEnabled:function(t){return function(t,e){var n=v(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),m(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(e,t)},getToken:function(t){return function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r;return o.__generator(this,function(i){switch(i.label){case 0:return[4,q(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}})})}(e,n,t)},onTokenChanged:function(t,r,i){return function(t,e,n,r,i){var o,s=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?s=n.error.bind(n):r&&(s=r),B(t,e,"EXTERNAL",o,s),function(){return H(t,o)}}(e,n,t,r)},INTERNAL:{delete:function(){for(var t=0,n=v(e).tokenObservers;t<n.length;t++)H(e,n[t].next);return Promise.resolve()}}};var e,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,e,n){t.getProvider(K).initialize()})),t.INTERNAL.registerComponent(new i.Component(K,function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{getToken:function(t){return q(e,n,t)},addTokenListener:function(t){return B(e,n,"INTERNAL",t)},removeTokenListener:function(t){return H(e,t)}};var e,n},"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.2.0")}(l.default),function(){var t=s.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=y();e.enabled=!0;var n=new s.Deferred;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,D(A)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:((r=e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),R(A,r)).catch(function(t){return L.warn("Failed to persist debug token to indexeddb. Error: "+t)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r})})}())}}()},9759:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>w,firebase:()=>b});var r,i,o=n(4762),s=n(4685),a=n(6034),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.deepCopy)(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.contains)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.contains)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.deepExtend)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.__assign)((0,o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.deepExtend)(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=v;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(b);const w=b},6423:(t,e,n)=>{"use strict";var r=n(9759);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Ra(e,n)})},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e(function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Ra(o(s.length-1),e),r=n.next()}while(!r.done)})},e});var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==f(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:b).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var C=Date.now;function I(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function S(t,e,n){this.code=A+t,this.message=e||O[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new S(e.substring(A.length),t.message,t.serverResponse):null}I(S,Error),S.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},S.prototype.toJSON=function(){return this.w()};var x,A="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function M(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function L(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}x=P("__EID__")?"__EID__":void 0,I(D,Error),D.prototype.name="CustomError",I(M,D),M.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new F(function(){return new B},function(t){t.reset()});function q(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=H(t,e)}function Z(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function $(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var J,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){J=ht;break t}}J=""}function ft(t){return ut(J,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===Ct&&e||"",this.b=Tt}function bt(t){return t instanceof _t&&t.constructor===_t&&t.b===Tt?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.ta=!0,_t.prototype.sa=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,Tt={},Ct={};function It(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function Et(t,e){this.a=e===Ot?t:""}function St(t){return t instanceof Et&&t.constructor===Et?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=bt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Et(t=e?e.createScriptURL(t):t,Ot)}(t=n.replace(xt,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?bt(t):encodeURIComponent(String(t))}))}Et.prototype.ta=!0,Et.prototype.sa=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var xt=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={};function Nt(t,e){this.a=e===Ut?t:""}function Pt(t){return t instanceof Nt&&t.constructor===Nt?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Nt.prototype.ta=!0,Nt.prototype.sa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Dt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Lt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t))t=new Nt(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Dt);t=e&&Rt.test(e[1])?new Nt(t,Ut):null}return t}function Ft(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Ut))}var Ut={},jt=new Nt("about:invalid#zClosurez",Ut);function Vt(t,e,n){this.a=n===qt?t:""}Vt.prototype.ta=!0,Vt.prototype.sa=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Bt(t,e,n,r){return t=t instanceof Nt?t:Ft(t),e=e||a,n=n instanceof _t?bt(n):n||"",e.open(Pt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Gt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=h;var Kt,Wt,Yt=ft("Opera"),Zt=ft("Trident")||ft("MSIE"),Qt=ft("Edge"),$t=Qt||Zt,Xt=ft("Gecko")&&!(ut(J.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Jt=ut(J.toLowerCase(),"webkit")&&!ft("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Wt=J,Xt?/rv:([^\);]+)(\)|;)/.exec(Wt):Qt?/Edge\/([\d\.]+)/.exec(Wt):Zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Jt?/WebKit\/(\S+)/.exec(Wt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(ne&&(ee=ne?ne[1]:""),Zt){var re=te();if(null!=re&&re>parseFloat(ee)){Kt=String(re);break t}}Kt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=tt(String(Kt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var se=a.document&&Zt&&(te()||parseInt(Kt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var ae=!Zt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){dt(e,function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}G(s?X(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout(function(){throw t},0)}function ve(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(_e)}}else he=function(){var t=_e;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),me||(he(),me=!0),ye.add(t,e)}var me=!1,ye=new j;function _e(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}U(V,t)}me=!1}function be(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){De(n,Te,t)},function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}De(n,Ce,t)})}catch(r){De(this,Ce,r)}}var we=0,Te=2,Ce=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new F(function(){return new Ie},function(t){t.reset()});function Se(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof be)return t;var e=new be(h);return De(e,Te,t),e}function xe(t){return new be(function(e,n){n(t)})}function Ae(t,e,n){Me(t,e,n,null)||ve(T(e,t))}function Oe(t){return new be(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ae(t[o],T(i,o,!0),T(i,o,!1));else e(r)})}function Ne(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?Ne(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Fe(n),Ue(n,i,Ce,e)))}t.c=null}else De(t,Ce,e)}function Pe(t,e){t.b||t.a!=Te&&t.a!=Ce||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Se(null,null,null);return i.a=new be(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,Pe(t,i),i.a}function De(t,e,n){t.a==we&&(t===n&&(e=Ce,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Ce||n instanceof qe||function(t,e){t.g=!0,ve(function(){t.g&&Ve.call(null,e)})}(t,n)))}function Me(t,e,n,r){if(t instanceof be)return Pe(t,Se(e||h,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Le(t){t.h||(t.h=!0,ve(t.gc,t))}function Fe(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Ce&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(i){Ve.call(null,i)}U(Ee,e)}function je(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Re(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,Pe(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new qe(t);ve(function(){Ne(this,e)},this)}},t.$c=function(t){this.a=we,De(this,Te,t)},t.ad=function(t){this.a=we,De(this,Ce,t)},t.gc=function(){for(var t;t=Fe(this);)Ue(this,t,this.a,this.i);this.h=!1};var Ve=ge;function qe(t){D.call(this,t)}function Be(){0!=He&&(Ge[v(this)]=this),this.ya=this.ya,this.pa=this.pa}I(qe,D),qe.prototype.name="cancel";var He=0,Ge={};function ze(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=He)){var e=v(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ge[e]}}Be.prototype.ya=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ke=Object.freeze||function(t){return t},We=!Zt||9<=Number(se),Ye=Zt&&!oe("9"),Ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function $e(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},I($e,Qe);var Xe=Ke({2:"touch",3:"pen",4:"mouse"});$e.prototype.preventDefault=function(){$e.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},$e.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++tn,this.wa=this.Qa=!1}function nn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&Z(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}rn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new en(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),un={};function cn(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?Tn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=yn(t);if(a||(t[an]=a=new rn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=mn,e=We?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ze||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?Cn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=sn(o=t.a[e],n,r,i))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&dn(n))}function dn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Je])on(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(on(n,t),0==n.b&&(n.src=null,e[an]=null)):nn(t)}}}function pn(t){return t in un?un[t]:un[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&dn(t),n.call(r,e)}function mn(t,e){if(t.wa)return!0;if(!We){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new $e(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new $e(e,this))}function yn(t){return(t=t[an])instanceof rn?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return p(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function wn(){Be.call(this),this.v=new rn(this),this.bc=this,this.hb=null}function Tn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Cn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&on(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Sn(t){var e=null;return new be(function(n,r){-1==(e=En(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function kn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function xn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function On(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(wn,Be),wn.prototype[Je]=!0,wn.prototype.addEventListener=function(t,e,n,r){cn(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){fn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;mt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=In(s,r,!0,t)&&i}if(i=In(s=t.b=n,r,!0,t)&&i,i=In(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=An.prototype).X=function(){On(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return On(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},t.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Dn(this,t.c),this.l=t.l,this.a=t.a,Mn(this,t.g),this.f=t.f,Ln(this,er(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),Mn(this,n[4]),this.f=qn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new Zn(null,this.i))}function Dn(t,e,n){t.c=n?qn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Mn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof Zn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),tr(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=Bn(e,Wn)),t.b=new Zn(e,t.i))}function Fn(t,e,n){t.b.set(e,n)}function Un(t,e){return t.b.get(e)}function jn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Vn(t,e,n,r){var i=new Rn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&Mn(i,n),r&&(i.f=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Bn(e,Gn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Bn(e,Gn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?Kn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Bn(n,Yn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?Dn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Mn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Ln(e,er(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Gn=/[#\/\?@]/g,zn=/[#\?:]/g,Kn=/[#\?]/g,Wn=/[#\?@]/g,Yn=/#/g;function Zn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $n(t){var e=xn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Zn(null,void 0);t=kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?tr(n,i,o):n.add(i,o)}return n}function Xn(t,e){Qn(t),e=nr(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&On(t)))}function Jn(t,e){return Qn(t),e=nr(t,e),Nn(t.a.b,e)}function tr(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(nr(t,e),X(n)),t.b+=n.length)}function er(t){var e=new Zn;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function nr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rr(t){var e=[];return or(new ir,t,e),e.join("")}function ir(){}function or(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),or(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ur(r,n),n.push(":"),or(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ur(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Zn.prototype).add=function(t,e){Qn(this),this.c=null,t=nr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach(function(n,r){G(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=$(e,this.a.get(nr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Jn(this,t=nr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ur(t,e){e.push('"',t.replace(ar,function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e}),'"')}function cr(){var t=Ar();return Zt&&!!se&&11==se||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=Pt(Lt(t)||jt)),e.location.href=n}function fr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<fr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function dr(t){return!!((t=(t||Ar()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(e){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ar().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Sr(Ar())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Lt(void 0!==n.href?n.href:String(n))||jt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Ft(e),s.href=Pt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=Pt(e),s&&($t&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Gt(t)+'">',t=new Vt(t=(r=It())?r.createHTML(t):t,null,qt),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(L("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new be(function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))}).o(function(e){throw fn(window,"load",t),e})}function _r(t){return t=t||Ar(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Tr(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Cr(){var t=Tr();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Er="Chrome";function Sr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Ir:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var kr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function xr(t,e){e=e||[];var n,r=[],i={};for(n in kr)i[kr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Tr())?r=Sr(i=Ar()):"Worker"===r&&(r=Sr(i=Ar())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Ar(){return a.navigator&&a.navigator.userAgent||""}function Or(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=a.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!cr()||!!a.indexedDB}catch(n){return wr()&&!!a.indexedDB}return!1}function Pr(){return(Rr()||"chrome-extension:"===Dr()||_r())&&!Cr()&&Nr()&&!wr()}function Rr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return a.location&&a.location.protocol||null}function Mr(t){return!dr(t=t||Ar())&&Sr(t)!=Ir}function Lr(t){return void 0===t?null:rr(t)}function Fr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Ur(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=Sr(t=t||Ar())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ar(),e=Tr(),this.b=dr(t)||"ReactNative"===e}function Hr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Gr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function zr(){return!(!Or("fireauth.oauthhelper",a)&&!Or("fireauth.iframe",a))}Br.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Dr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Kr,Wr={};function Yr(t){Wr[t]||(Wr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Zr={};Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:2}),Kr=2==Zr.abcd}catch(Wt){Kr=!1}function Qr(t,e,n){Kr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function $r(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Xr(t){var e={};return $r(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ii]),Qr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ei(t){try{var e=new si(t)}catch(n){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function si(t){ti.call(this,t),Qr(this,"phoneNumber",t[oi])}function ai(t){var e={},n=t[hi],r=t[di],i=t[pi];if(t=ei(t[fi]),!i||i!=ci&&i!=li&&!n||i==li&&!r||i==ui&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[vi]=n||null,e[yi]=n||null,e[gi]=r):(e[vi]=r||null,e[yi]=r||null,e[gi]=n||null),e[mi]=t||null,Qr(this,bi,i),Qr(this,_i,Jr(e))}I(si,ti),si.prototype.w=function(){var t=si.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ui="REVERT_SECOND_FACTOR_ADDITION",ci="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",hi="email",fi="mfaInfo",di="newEmail",pi="requestType",gi="email",vi="fromEmail",mi="multiFactorInfo",yi="previousEmail",_i="data",bi="operation";function wi(t){var e=Un(t=jn(t),Ti)||null,n=Un(t,Ci)||null,r=Un(t,Si)||null;if(r=r&&xi[r]||null,!e||!n||!r)throw new S("argument-error",Ti+", "+Ci+"and "+Si+" are required in a valid action code URL.");$r(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,Ii)||null,languageCode:Un(t,Ei)||null,tenantId:Un(t,ki)||null})}var Ti="apiKey",Ci="oobCode",Ii="continueUrl",Ei="languageCode",Si="mode",ki="tenantId",xi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ui,signIn:ci,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ai(t){try{return new wi(t)}catch(e){return null}}function Oi(t){var e=t[Mi];if(void 0===e)throw new S("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new S("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[Ui];var r=n[Li];if(n=n[Fi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new S("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[ji])&&e.length)this.f=e;else if(void 0!==e)throw new S("argument-error",ji+" property must be a non empty string when specified.")}else if(void 0!==e)throw new S("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new S("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new S("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",Pi="dynamicLinkDomain",Ri="handleCodeInApp",Di="iOS",Mi="url",Li="installApp",Fi="minimumVersion",Ui="packageName",ji="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var qi=null;function Bi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Bi(t)}catch(e){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!qi){qi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===qi[o]&&(qi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ki=["client_id","response_type","scope","redirect_uri","state"],Wi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Ki},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Ki},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Ki},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:zi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Yi(t){for(var e in Wi)if(Wi[e].fa==t)return Wi[e];return null}function Zi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[$i];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[Qi])return new Xi(t)}catch(r){}return null}var Qi="idToken",$i="providerId";function Xi(t){var e=t[$i];if(!e&&t[Qi]){var n=Hi(t[Qi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Ji(t){Xi.call(this,t),Qr(this,"profile",Jr((t=Ur(t.rawUserInfo||"{}"))||{}))}function to(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function io(t){var e=jn(t),n=Un(e,"link"),r=Un(jn(n),"link");return e=Un(e,"deep_link_id"),Un(jn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new S("internal-error","Internal assert: no raw session string available");if(t&&e)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}I(Ji,Xi),I(to,Ji),I(eo,Ji),I(no,Ji),I(ro,Ji);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then(function(t){if(t[Qs]){var n=Hi(t[Qs]);if(!n||e!=n.i)throw new S("user-mismatch");return t}throw new S("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==A+"user-not-found"?new S("user-mismatch"):t})}function lo(t,e){if(!e)throw new S("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:$n(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function mo(t,e){this.Qc=e||[],$r(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Yi(t)||{}).Ja||null,this.pb=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function _o(t){mo.call(this,t,Ki),this.a=[]}function bo(){_o.call(this,"facebook.com")}function wo(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function To(){_o.call(this,"github.com")}function Co(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function Io(){_o.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Io).credential({idToken:n,accessToken:e})}function So(){mo.call(this,"twitter.com",zi)}function ko(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Oo(){$r(this,{providerId:"password",isOAuthProvider:!1})}function No(t,e){if(!(e=Po(e)))throw new S("argument-error","Invalid email link!");return new xo(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function Po(t){return(t=Ai(t=io(t)))&&t.operation===ci?t:null}function Ro(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new S("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Do(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Ro(e)}return null}function Mo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Lo(t){try{this.a=t||r.default.auth()}catch(e){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}$r(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new S("missing-verification-id");if(!e)throw new S("missing-verification-code");return new Ro({fb:t,eb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return wo(n);case"github.com":return Co(n);case"twitter.com":return ko(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function jo(t){if(!t.isOAuthProvider)throw new S("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return ke(this.a?this.a:this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},lo.prototype.ka=function(t){return ma(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,ya(t,n)},lo.prototype.c=function(t,e){return co(_a(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return ma(t,go(this))},po.prototype.b=function(t,e){var n=go(this);return n.idToken=e,ya(t,n)},po.prototype.c=function(t,e){return co(_a(t,go(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Jb=gt(t),this},I(yo,mo),I(_o,mo),_o.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},_o.prototype.Rb=function(){return X(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},I(bo,_o),Qr(bo,"PROVIDER_ID","facebook.com"),Qr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(To,_o),Qr(To,"PROVIDER_ID","github.com"),Qr(To,"GITHUB_SIGN_IN_METHOD","github.com"),I(Io,_o),Qr(Io,"PROVIDER_ID","google.com"),Qr(Io,"GOOGLE_SIGN_IN_METHOD","google.com"),I(So,mo),Qr(So,"PROVIDER_ID","twitter.com"),Qr(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?tu(t,ka,{email:this.a,oobCode:this.f}):tu(t,Za,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?tu(t,xa,{idToken:e,email:this.a,oobCode:this.f}):tu(t,qa,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return co(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},$r(Oo,{PROVIDER_ID:"password"}),$r(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),$r(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(t){return t.gb(Mo(this))},Ro.prototype.b=function(t,e){var n=Mo(this);return n.idToken=e,tu(t,$a,n)},Ro.prototype.c=function(t,e){var n=Mo(this);return n.operation="REAUTH",co(t=tu(t,Xa,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Lo.prototype.gb=function(t,e){var n=this.a.a;return ke(e.verify()).then(function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then(function(t){return function(t,e){return tu(t,Ha,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==ao?i.Ha().then(function(e){return function(t,e){return tu(t,Ga,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return tu(t,ja,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},$r(Lo,{PROVIDER_ID:"phone"}),$r(Lo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,Go=null;function zo(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",S.call(this,e,n)}function Ko(t,e,n){S.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function Wo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Uo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new S(e,t.message||void 0);return new Ko(e,n,t.message)}return null}function Yo(){}function Zo(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function $o(){}function Xo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Tb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function Jo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}I(zo,S),I(Ko,S),Ko.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Ko.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,I(Zo,Yo),Zo.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Zo.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Zo,I($o,Yo),$o.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Xo;throw Error("Unsupported browser")},$o.prototype.b=function(){return{}},(t=Xo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Jo(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Jo(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Jo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){r||C(),delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(L("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(p(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var us={},cs=null;function ls(t){var e;if(cs||(cs=new es(""),us[""]=cs,cs.c=os),!(e=us[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,us[t]=e}return e}function hs(t,e){t&&t.log(ss,e,void 0)}function fs(t){this.f=t}function ds(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(fs,Yo),fs.prototype.a=function(){return new ds(this.f)},fs.prototype.b=function(t){return function(){return t}}({}),I(ds,wn);var ps=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function vs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ms(t)}function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ys(t){wn.call(this),this.headers=new An,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=_s,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ms(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,vs(this)),this.readyState=ps},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ms(this)),this.a&&(this.readyState=3,ms(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?vs(this):ms(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,vs(this))},t.sc=function(t){this.a&&(this.response=t,vs(this))},t.Va=function(t){var e=this.i;e&&e.log(is,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&vs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(ys,wn);var _s="";ys.prototype.b=ls("goog.net.XhrIo");var bs=/^https?$/i,ws=["POST","PUT"];function Ts(t){return"content-type"==t.toLowerCase()}function Cs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Is(t),Ss(t)}function Is(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Es(t){if(t.c&&void 0!==s)if(t.C[1]&&4==xs(t)&&2==As(t))hs(t.b,Os(t,"Local request error detected and ignored"));else if(t.i&&4==xs(t))En(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==xs(t)){hs(t.b,Os(t,"Request complete")),t.c=!1;try{var e,n=As(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Pn)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!bs.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<xs(t)?t.a.statusText:""}catch(l){hs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+As(t)+"]",Is(t)}}finally{Ss(t)}}}function Ss(t,e){if(t.a){ks(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ks(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function xs(t){return t.a?t.a.readyState:0}function As(t){try{return 2<xs(t)?t.a.status:-1}catch(e){return-1}}function Os(t,e){return e+" ["+t.P+" "+t.l+" "+As(t)+"]"}function Ns(t){var e=Bs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ps(t,e,n){t.a=!0,t.c=n,t.f=!e,Ls(t)}function Rs(t){if(t.a){if(!t.v)throw new Fs(t);t.v=!1}}function Ds(t,e,n,r){t.g.push([e,n,r]),t.a&&Ls(t)}function Ms(t){return W(t.g,function(t){return p(t[1])})}function Ls(t){if(t.h&&t.a&&Ms(t)){var e=t.h,n=Vs[e];n&&(a.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ms(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Ns?(Ds(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new js(e),Vs[e.a]=e,t.h=e.a)}function Fs(){D.call(this)}function Us(){D.call(this)}function js(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=ys.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hs(this.b,Os(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(hs(this.b,Os(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),ys.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Es(this):this.Jc())},t.Jc=function(){Es(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _s:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return hs(this.b,"Can not get response: "+e.message),null}},Ns.prototype.cancel=function(t){if(this.a)this.c instanceof Ns&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Us(this),Rs(this),Ps(this,!1,t))}},Ns.prototype.m=function(t,e){this.i=!1,Ps(this,t,e)},Ns.prototype.then=function(t,e,n){var r,i,o=new be(function(t,e){r=t,i=e});return Ds(this,r,function(t){t instanceof Us?o.cancel():i(t)}),o.then(t,e,n)},Ns.prototype.$goog_Thenable=!0,I(Fs,D),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",I(Us,D),Us.prototype.message="Deferred was canceled",Us.prototype.name="CanceledError",js.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function qs(t){var e={},n=e.document||document,r=St(t).toString(),i=pe(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Ns(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout(function(){Hs(i,!0);var t=new Ks(zs,"Timeout reached for loading script "+r);Rs(s),Ps(s,!1,t)},h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,e.xd||!1,u),Rs(s),Ps(s,!0,null))},i.onerror=function(){Hs(i,!0,u);var t=new Ks(Gs,"Error while loading script "+r);Rs(s),Ps(s,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=St(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===c&&(c=l(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Gs=0,zs=1;function Ks(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Ws(t){this.f=t}function Ys(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||$s,this.g=gt(t.secureTokenHeaders||Xs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Js,this.a=gt(t.firebaseHeaders||ta),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Tr(),!(n=a.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!wr())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=wr()?new fs(self):Cr()?new Ws(n):new $o,this.b=null}I(Ks,D),I(Ws,Yo),Ws.prototype.a=function(){return new this.f},Ws.prototype.b=function(){return{}};var Zs,Qs="idToken",$s=new Br(3e4,6e4),Xs={"Content-Type":"application/x-www-form-urlencoded"},Js=new Br(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e&&(t.l=ra("https://securetoken.googleapis.com/v1/token",e),t.h=ra("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ra("https://identitytoolkit.googleapis.com/v2/",e))}function ra(t,e){return t=jn(t),e=jn(e.url),t.f=t.a+t.f,Dn(t,e.c),t.a=e.a,Mn(t,e.g),t.toString()}function ia(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function oa(t,e,n,r,i,o,s){(function(){var t=Ar();return!((t=Sr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Zt&&se&&!(9<se))})()||wr()?t=w(t.u,t):(Zs||(Zs=new be(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[aa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ds(t,null,e,void 0)}(qs(kt(sa,{onload:aa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=w(t.s,t)),t(e,n,r,i,o,s)}Ys.prototype.T=function(){return this.b},Ys.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ys(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}Tn(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return hs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Cn(s,"ready",function(){u&&clearTimeout(u),ze(this)}),Cn(s,"timeout",function(){u&&clearTimeout(u),ze(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Ho),t.a.onreadystatechange=w(t.Wb,t);try{hs(t.b,Os(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return hs(t.b,Os(t,"Error opening Xhr: "+s.message)),void Cs(t,s)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)G(t,e,void 0);else for(var n=xn(t),r=kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!Y(ws,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{ks(t),0<t.g&&(t.u=function(t){return Zt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),hs(t.b,Os(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=En(t.Ma,t.g,t)),hs(t.b,Os(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){hs(t.b,Os(t,"Send error: "+s.message)),Cs(t,s)}}(s,t,n,r,i)};var sa=new _t(Ct,"https://apis.google.com/js/client.js?onload=%{onload}"),aa="__fcb"+Math.floor(1e6*Math.random()).toString();function ua(t){if("string"!=typeof(t=t.email)||!mr.test(t))throw new S("invalid-email")}function ca(t){"email"in t&&ua(t)}function la(t){if(!t[Qs]){if(t.mfaPendingCredential)throw new S("multi-factor-auth-required",null,gt(t));throw new S("internal-error")}}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new S("internal-error")}else{if(!t.sessionInfo)throw new S("missing-verification-id");if(!t.code)throw new S("missing-verification-code")}}Ys.prototype.s=function(t,e,n,r,i){var o=this;Zs.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ys.prototype.Ab=function(){return tu(this,Ba,{})},Ys.prototype.Cb=function(t,e){return tu(this,Va,{idToken:t,email:e})},Ys.prototype.Db=function(t,e){return tu(this,qa,{idToken:t,password:e})};var fa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function da(t){if(!t.phoneVerificationInfo)throw new S("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new S("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new S("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Jn(t=new Zn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function va(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Wo(t)):t.errorMessage&&(e=eu(t.errorMessage)),e)throw e;la(t)}function ma(t,e){return e.returnIdpCredential=!0,tu(t,za,e)}function ya(t,e){return e.returnIdpCredential=!0,tu(t,Wa,e)}function _a(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,tu(t,Ka,e)}function ba(t){if(!t.oobCode)throw new S("invalid-action-code")}(t=Ys.prototype).Eb=function(t,e){var n={idToken:t},r=[];return dt(fa,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),tu(this,Va,n)},t.wb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),tu(this,Ma,t)},t.xb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),tu(this,Pa,t)},t.vb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),tu(this,Ra,t)},t.Fb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),tu(this,Da,t)},t.gb=function(t){return tu(this,Qa,t)},t.ob=function(t,e){return tu(this,Ua,{oobCode:t,newPassword:e})},t.Sa=function(t){return tu(this,Ta,{oobCode:t})},t.kb=function(t){return tu(this,wa,{oobCode:t})};var wa={endpoint:"setAccountInfo",A:ba,Z:"email",B:!0},Ta={endpoint:"resetPassword",A:ba,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new S("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(ua(t),!t.password)throw new S("weak-password")},G:la,V:!0,B:!0},Ia={endpoint:"createAuthUri",B:!0},Ea={endpoint:"deleteAccount",O:["idToken"]},Sa={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new S("internal-error")}},ka={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ua,G:la,V:!0,B:!0},xa={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ua,G:la,V:!0},Aa={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:da,G:la,B:!0,Na:!0},Oa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:da,G:la,B:!0,Na:!0},Na={endpoint:"getAccountInfo"},Pa={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new S("internal-error");ua(t)},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},Da={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new S("internal-error");ua(t)},Z:"email",B:!0},La={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Fa={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new S("internal-error")}},Ua={endpoint:"resetPassword",A:ba,Z:"email",B:!0},ja={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Va={endpoint:"setAccountInfo",O:["idToken"],A:ca,V:!0},qa={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ca(t),!t.password)throw new S("weak-password")},G:la,V:!0},Ba={endpoint:"signupNewUser",G:la,V:!0,B:!0},Ha={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new S("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Ga={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},za={endpoint:"verifyAssertion",A:pa,Za:ga,G:va,V:!0,B:!0},Ka={endpoint:"verifyAssertion",A:pa,Za:ga,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new S("user-not-found");if(t.errorMessage)throw eu(t.errorMessage);la(t)},V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new S("internal-error")},Za:ga,G:va,V:!0},Ya={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new S("invalid-custom-token")},G:la,V:!0,B:!0},Za={endpoint:"verifyPassword",A:function(t){if(ua(t),!t.password)throw new S("wrong-password")},G:la,V:!0,B:!0},Qa={endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},$a={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new S("internal-error");ha(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Wo(t);la(t)}},Xa={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Ja={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Qs]^!!t.refreshToken)throw new S("internal-error")},B:!0,Na:!0};function tu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return xe(new S("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return ke(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=jn(e+n);Fn(a,"key",t.c),s&&Fn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Fn(a,c,i[c]);return new be(function(e,n){oa(t,a.toString(),function(t){t?t.error?n(nu(t,o||{})):e(t):n(new S("network-request-failed"))},r,u?void 0:rr(Fr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)}).then(function(t){return r=t,e.Za?e.Za(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new S("internal-error");return r[e.Z]})}function eu(t){return nu({error:{errors:[{message:t}],code:400,message:t}})}function nu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],e);return!e&&t&&(e=Lr(t)),new S("internal-error",e)}function ru(t){this.b=t,this.a=null,this.sb=function(t){return(au||(au=new be(function(t,e){function n(){qr(),Or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:ou.get()})}if(Or("gapi.iframes.Iframe"))t();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Or("gapi.load")?n():e(Error("Network Error"))},ke(qs(r=kt(iu,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw au=null,t}))).then(function(){return new be(function(e,n){Or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},su.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var iu=new _t(Ct,"https://apis.google.com/js/api.js?onload=%{onload}"),ou=new Br(3e4,6e4),su=new Br(5e3,15e3),au=null;function uu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Vn((t=jn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Fn(this.a,"apiKey",this.h),Fn(this.a,"appName",this.i),this.b=null,this.c=[]}function cu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function lu(t){try{return r.default.app(t).auth().Ga()}catch(e){return[]}}function hu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function fu(t){var e=lr();return function(t){return tu(t,La,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=jn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=jn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new zo(lr())})}function du(t){return t.m||(t.m=yr().then(function(){if(!t.u){var e=t.c,n=t.i,r=lu(t.b),i=new uu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new ru(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then(function(){t.a.register("authEvent",e,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)})}(t)})),t.m}function pu(t){return t.l||(t.C=t.c?xr(t.c,lu(t.b)):null,t.l=new Ys(t.g,P(t.i),t.C),t.f&&na(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new cu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.zb(l).toString()}function vu(t){if(this.a=t||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function mu(t){this.b=t,this.a={},this.f=w(this.c,this)}uu.prototype.toString=function(){return this.f?Fn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Fn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Fn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},cu.prototype.zb=function(t){return this.h=t,this},cu.prototype.toString=function(){if(this.v){var t=jn(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Fn(t,"apiKey",this.s),Fn(t,"appName",this.c),Fn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.default.app(this.c).auth().la()}catch(u){n=null}for(var i in e.pb=n,Fn(t,"providerId",this.a.providerId),e=Fr((n=this.a).Jb))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),pt(e)||Fn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&Fn(t,"scopes",n.join(",")),this.l?Fn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Fn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Fn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Un(t,a)&&Fn(t,a,this.b[a]);return this.h?Fn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Fn(t,"eid",this.f):Xn(t.b,"eid"),(a=lu(this.c)).length&&Fn(t,"fw",a.join(",")),t.toString()},(t=hu.prototype).Pb=function(t,e,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return du(t).then(function(){return function(t,e){return t.sb.then(function(){return new be(function(n){t.a.send(e.type,e,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&pr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new be(function(e){return function n(){Sn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Sn(n).then(function(){e(r)})})},t.Yb=function(){var t=Ar();return!Mr(t)&&!Vr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return xe(new S("popup-blocked"));if(s&&!Mr())return this.ma().o(function(e){pr(t),i(e)}),r(),ke();this.a||(this.a=fu(pu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw pr(t),i(e),e});return r(),e}).then(function(){jo(n),s||hr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Ob=function(t,e,n,r){this.a||(this.a=fu(pu(this)));var i=this;return this.a.then(function(){jo(e),hr(gu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return du(this).then(function(){return t.v.sb}).o(function(){throw t.a=null,new S("network-request-failed")})},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Q(this.h,function(e){return e==t})},(t=vu.prototype).get=function(t){return ke(this.a.getItem(t)).then(function(t){return t&&Ur(t)})},t.set=function(t,e){return ke(this.a.setItem(t,Lr(e)))},t.U=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var yu,_u=[];function bu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wu(t){this.a=t}function Tu(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return xe(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Iu(t,c),e}).o(function(e){throw Iu(t,c),e})}function Iu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Q(t.a,function(t){return t==e})}}function Eu(){if(!Au())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(G(_u,function(n){n.b==t&&(e=n)}),!e){var e=new mu(t);_u.push(e)}return e}(),bu(this.v,"keyChanged",function(e,n){return Du(t).then(function(e){return 0<e.length&&G(t.a,function(t){t(e)}),{keyProcessed:Y(e,n.key)}})}),bu(this.v,"ping",function(){return ke(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?ke().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):ke(null)}().then(function(e){(t.h=e)&&(t.g=new Tu(new wu(e)),Cu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Su(t){return new be(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Su(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function ku(t){return t.i||(t.i=Su(t)),t.i}function xu(t,e){var n=0;return new be(function r(i,o){ku(t).then(e).then(i).o(function(e){if(!(3<++n))return ku(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function Au(){try{return!!a.indexedDB}catch(Wt){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function Nu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Pu(t){return new be(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ru(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):ke()}function Du(t){return ku(t).then(function(t){var e=Ou(Nu(t,!1));return e.getAll?Pu(e.getAll()):new be(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=fr(t.c,n),t.c=n}return r})}function Mu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Lu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then(function(){if(Au()){var t=jr(),r="__sak"+t;return yu||(yu=new Eu),(n=yu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){G(e.a,function(e){e(t)})}),t})}function Fu(){this.a={},this.type="inMemory"}function Uu(){if(!function(){var t="Node"==Tr();if(!(t=ju()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Tr())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=ju()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function ju(){try{var t=a.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Vu(){this.type="nullStorage"}function qu(){if(!function(){var t="Node"==Tr();if(!(t=Bu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Tr())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Bu()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bu(){try{var t=a.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){var t={};t.Browser=Ku,t.Node=Wu,t.ReactNative=Yu,t.Worker=Zu,this.a=t[Tr()]}mu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,function(e){i.push(ke().then(function(){return e(t.origin,t.data.data)}))}),Oe(i).then(function(r){var i=[];G(r,function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})}),G(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},wu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Tu.prototype.close=function(){for(;0<this.a.length;)Iu(this,this.a[0]);this.b=!0},(t=Eu.prototype).set=function(t,e){var n=this,r=!1;return xu(this,function(e){return Pu((e=Ou(Nu(e,!0))).get(t))}).then(function(i){return xu(n,function(o){if(o=Ou(Nu(o,!0)),i)return i.value=e,Pu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Pu(o.add(s))})}).then(function(){return n.c[t]=e,Ru(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return xu(this,function(e){return Pu(Ou(Nu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return xu(this,function(r){return n=!0,e.b++,Pu(Ou(Nu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Ru(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Mu(t),function e(){t.f=setTimeout(function(){t.l=Du(t).then(function(e){0<e.length&&G(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t}),0==this.a.length&&Mu(this)},(t=Lu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t})},(t=Fu.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.U=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=Uu.prototype).get=function(t){var e=this;return ke().then(function(){return Ur(e.a.getItem(t))})},t.set=function(t,e){var n=this;return ke().then(function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return ke().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&cn(a.window,"storage",t)},t.ia=function(t){a.window&&fn(a.window,"storage",t)},(t=Vu.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.U=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return ke().then(function(){return Ur(e.a.getItem(t))})},t.set=function(t,e){var n=this;return ke().then(function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return ke().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Gu,zu,Ku={F:Uu,cb:qu},Wu={F:Uu,cb:qu},Yu={F:vu,cb:Vu},Zu={F:Uu,cb:Vu},Qu={rd:"local",NONE:"none",td:"session"};function $u(){var t=!(Vr(Ar())||!br()),e=Mr(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new Hu),t=Gu;try{this.g=!cr()&&zr()||!a.indexedDB?new t.a.F:new Lu(wr()?new Fu:new t.a.F)}catch(r){this.g=new Fu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Fu}this.v=new Fu,this.f=w(this.Zb,this),this.b={}}function Xu(){return zu||(zu=new $u),zu}function Ju(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function tc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ec(t,e,n){return n=tc(e,n),"local"==e.F&&(t.b[n]=null),Ju(t,e.F).U(n)}function nc(t){t.c&&(clearInterval(t.c),t.c=null)}function rc(t){this.a=t,this.b=Xu()}(t=$u.prototype).get=function(t,e){return Ju(this,t.F).get(tc(t,e))},t.set=function(t,e,n){var r=tc(t,n),i=this,o=Ju(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=tc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(Ju(this,"local").ca(this.f),this.h||(cr()||!zr())&&a.indexedDB||!this.l||function(t){nc(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new $e({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tc(t,e),this.a[t]&&(Q(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Ju(this,"local").ia(this.f),nc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ju(this,"local").ia(this.f):nc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},Zt&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,w(this.nb,this))},t.nb=function(t){this.a[t]&&G(this.a[t],function(t){t()})};var ic,oc={name:"authEvent",F:"local"};function sc(){this.a=Xu()}function ac(t,e){this.b=uc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ic&&(ic=a.Int32Array?new Int32Array(gc):gc),this.reset()}I(ac,function(){this.b=-1});for(var uc=64,cc=uc-1,lc=[],hc=0;hc<cc;hc++)lc[hc]=0;var fc=$(128,lc);function dc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|ic[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function pc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(dc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(dc(t),i=0)}}t.c=i,t.g+=n}ac.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):X(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vc(){ac.call(this,8,mc)}I(vc,ac);var mc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new sc,this.g=new rc(this.h),this.f=null,this.b=[],this.a=this.c=null}function _c(t){return new S("invalid-cordova-configuration",t)}function bc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function wc(t){return t.f||(t.f=t.ma().then(function(){return new be(function(e){t.Ea(function n(r){return e(r),t.Ta(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Tc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ur(Un(o=jn(i),"firebaseError")||null))?k(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}bc(t,i)})}var n=new Vo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=Sn(500).then(function(){return Tc(t).then(function(){r||bc(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Or("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Go||(Go=new Bo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Or("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Tc(t){var e=null;return function(t){return t.b.get(oc,t.a).then(function(t){return qo(t)})}(t.g).then(function(n){return e=n,ec((n=t.g).b,oc,n.a)}).then(function(){return e})}function Cc(t){this.a=t,this.b=Xu()}(t=yc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(_r(void 0)?yr().then(function(){return new be(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):xe(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Or("universalLinks.subscribe",a))throw _c("cordova-universal-links-plugin-fix is not installed");if(void 0===Or("BuildInfo.packageName",a))throw _c("cordova-plugin-buildinfo is not installed");if("function"!=typeof Or("cordova.plugins.browsertab.openUrl",a))throw _c("cordova-plugin-browsertab is not installed");if("function"!=typeof Or("cordova.InAppBrowser.open",a))throw _c("cordova-plugin-inappbrowser is not installed")},function(){throw new S("cordova-not-ready")})},t.Pb=function(t,e){return e(new S("operation-not-supported-in-this-environment")),ke()},t.Nb=function(){return xe(new S("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return xe(new S("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=ke().then(function(){return jo(e),wc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Vo(e,r,null,o,new S("no-auth-event"),null,i),u=Or("BuildInfo.packageName",a);if("string"!=typeof u)throw new S("invalid-cordova-configuration");var c=Or("BuildInfo.displayName",a),l={};if(Ar().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Ar().toLowerCase().match(/android/))return xe(new S("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new vc;pc(e,t),t=[];var n=8*e.g;pc(e,fc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(dc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=gu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(oc,s.w(),e)}).then(function(){var e=Or("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new S("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Or("cordova.plugins.browsertab.openUrl",a)))throw new S("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Or("cordova.InAppBrowser.open",a)))throw new S("invalid-cordova-configuration");e=Ar(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new be(function(t,e){u=function(){var e=Or("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Hr()&&c()},o.addEventListener("resume",c=function(){s||(s=Sn(2e3).then(function(){e(new S("redirect-cancelled-by-user"))}))},!1),Ar().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return Tc(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null})},t.Ea=function(t){this.b.push(t),wc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new S("no-auth-event")),t(e))})},t.Ta=function(t){Q(this.b,function(e){return e==t})};var Ic={name:"pendingRedirect",F:"session"};function Ec(t){return ec(t.b,Ic,t.a)}function Sc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new qc,this.C=new Kc,this.g=new Cc(jc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=kc(this.D,this.v,this.m,x,this.J)}function kc(t,e,n,i,o){var s=r.default.SDK_VERSION||null;return _r()?new yc(t,e,n,s,i,o):new hu(t,e,n,s,i,o)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Ac(t){t.a.Yb()&&xc(t).o(function(e){var n=new Vo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Mc(e)&&t.s(n)}),t.a.Ub()||Bc(t.b)}function Oc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ic,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Ec(t.g).then(function(){xc(t).o(function(e){var n=new Vo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Mc(e)&&t.s(n)})}):Ac(t)}).o(function(){Ac(t)})}function Nc(t,e){Q(t.h,function(t){return t==e})}Sc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=kc(this.D,this.v,this.m,null,this.J),this.i={}},Sc.prototype.s=function(t){if(!t)throw new S("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Bc(this.b),e};var Pc=new Br(2e3,1e4),Rc=new Br(3e4,6e4);function Dc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Mc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Lc(t,e,n,r,i){var o;return function(t){return t.b.set(Ic,"pending",t.a)}(t.g).then(function(){return t.a.Ob(e,n,r,i).o(function(e){if(Mc(e))throw new S("operation-not-supported-in-this-environment");return o=e,Ec(t.g).then(function(){throw o})}).then(function(){return t.a.ac()?new be(function(){}):Ec(t.g).then(function(){return t.ra()}).then(function(){}).o(function(){})})})}function Fc(t,e,n,r,i){return t.a.Pb(r,function(t){e.na(n,null,t,i)},Pc.get())}Sc.prototype.ra=function(){return this.b.ra()};var Uc={};function jc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Vc(t,e,n,r){var i=jc(e,n,r);return Uc[i]||(Uc[i]=new Sc(t,e,n,r)),Uc[i]}function qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,zc(t,!1,null,null))}function Hc(t){t.g&&!t.i&&zc(t,!1,null,null)}function Gc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return xe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Gc(t,n):Gc(t,{user:null}),t.f=[],t.c=[]}function Kc(){}function Wc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Yc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Lo(t).gb(e,n).then(function(t){return new Yc(t,r)})}function Qc(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");$r(this,{token:t,expirationTime:Gr(1e3*e.exp),authTime:Gr(1e3*e.auth_time),issuedAtTime:Gr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function $c(t,e,n){var r=e&&e[Jc];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;G(e[Xc]||[],function(t){(t=ei(t))&&i.b.push(t)}),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(zc(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){zc(t,a,e,null)}).o(function(e){zc(t,a,null,e)})}(this,t,e):xe(new S("invalid-auth-event")):(zc(this,!1,null,null),ke())}else xe(new S("invalid-auth-event"))},qc.prototype.ra=function(){var t=this;return new be(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new S("timeout");t.a&&t.a.cancel(),t.a=Sn(Rc.get()).then(function(){t.b||(t.g=!0,zc(t,!0,null,e))})}(t))})},Kc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):xe(new S("invalid-auth-event"))}else xe(new S("invalid-auth-event"))},Yc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var Xc="mfaInfo",Jc="mfaPendingCredential";function tl(t,e,n,r){S.call(this,"multi-factor-auth-required",r,e),this.b=new $c(t,e,n),Qr(this,"resolver",this.b)}function el(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new tl(e,t.serverResponse,n,t.message)}catch(r){}return null}function nl(){}function rl(t){Qr(this,"factorId",t.fa),this.a=t}function il(t){if(rl.call(this,t),this.a.fa!=Lo.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ol(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function sl(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new si(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),al(this,n)}function al(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function ul(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function cl(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return Hr()||!t?ke():new be(function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){cl(t,!0)}).o(function(e){t.i(e)&&cl(t,!1)})}function ll(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function hl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function fl(t,e){t.b=Hi(e[Qs]||""),t.a=e.refreshToken,hl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function dl(t,e){this.a=t||null,this.b=e||null,$r(this,{lastSignInTime:Gr(e||null),creationTime:Gr(t||null)})}function pl(t,e,n,r,i,o){$r(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.default.SDK_VERSION?xr(r.default.SDK_VERSION):null;this.a=new Ys(this.l,P(x),i),(this.u=t.emulatorConfig||null)&&na(this.a,this.u),this.h=new ll(this.a),Il(this,e[Qs]),fl(this.h,e),Qr(this,"refreshToken",this.h.a),kl(this,n||{}),wn.call(this),this.P=!1,this.s&&Pr()&&(this.b=Vc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new ul(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0})}(this),this.ba=w(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){vl(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){_l(o,t.f)},this.ja=null,this.S=new sl(this,n),Qr(this,"multiFactor",this.S)}function vl(t,e){t.u=e,na(t.a,e),t.b&&(e=t.b,t.b=Vc(t.s,t.l,t.m,t.u),t.P&&(Nc(e,t),Oc(t.b,t)))}function ml(t,e){t.qa&&fn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&cn(e,"languageCodeChanged",t.Pa)}function yl(t,e){t.$&&fn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&cn(e,"emulatorConfigChanged",t.Ba)}function _l(t,e){t.aa=e,ia(t.a,r.default.SDK_VERSION?xr(r.default.SDK_VERSION,t.aa):null)}function bl(t,e){t.ja&&fn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&cn(e,"frameworkChanged",t.Oa)}function wl(t){try{return r.default.app(t.m).auth()}catch(e){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Tl(t){t.J||t.D.b||(t.D.start(),fn(t,"tokenChanged",t.ba),cn(t,"tokenChanged",t.ba))}function Cl(t){fn(t,"tokenChanged",t.ba),t.D.stop()}function Il(t,e){t.Aa=e,Qr(t,"_lat",e)}function El(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Oe(e).then(function(){return t})}function Sl(t){t.b&&!t.P&&(t.P=!0,Oc(t.b,t))}function kl(t,e){$r(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new dl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function xl(){}function Al(t){return ke().then(function(){if(t.J)throw new S("app-deleted")})}function Ol(t){return K(t.providerData,function(t){return t.providerId})}function Nl(t,e){e&&(Pl(t,e.providerId),t.providerData.push(e))}function Pl(t,e){Q(t.providerData,function(t){return t.providerId==e})}function Rl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Dl(t,e){t!=e&&($r(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Qr(t,"metadata",e.metadata?function(t){return new dl(t.a,t.b)}(e.metadata):new dl),G(e.providerData,function(e){Nl(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),al(t.S,e.S.b))}function Ml(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return tu(t.a,Na,{idToken:e}).then(w(t.Kc,t))}(t,e).then(function(){return n||Rl(t,"isAnonymous",!1),e})})}function Ll(t,e){e[Qs]&&t.Aa!=e[Qs]&&(fl(t.h,e),t.dispatchEvent(new ol("tokenChanged")),Il(t,e[Qs]),Rl(t,"refreshToken",t.h.a))}function Fl(t,e){return Ml(t).then(function(){if(Y(Ol(t),e))return El(t).then(function(){throw new S("provider-already-linked")})})}function Ul(t,e,n){return Xr({user:t,credential:Uo(e),additionalUserInfo:e=Zi(e),operationType:n})}function jl(t,e){return Ll(t,e),t.reload().then(function(){return t})}function Vl(t,e,n,i,o){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));if(t.i&&!o)return xe(t.i);var s=Yi(n.providerId),a=jr(t.uid+":::"),u=null;(!Mr()||br())&&t.s&&n.isOAuthProvider&&(u=gu(t.s,t.l,t.m,e,n,null,a,r.default.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=gr(u,s&&s.va,s&&s.ua);return i=i().then(function(){if(Bl(t),!o)return t.I().then(function(){})}).then(function(){return Dc(t.b,c,e,n,a,!!u,t.tenantId)}).then(function(){return new be(function(n,r){t.na(e,null,new S("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Fc(t.b,t,e,c,a)})}).then(function(t){return c&&pr(c),t?Xr(t):null}).o(function(t){throw c&&pr(c),t}),Hl(t,i,o)}function ql(t,e,n,r,i){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));if(t.i&&!i)return xe(t.i);var o=null,s=jr(t.uid+":::");return r=r().then(function(){if(Bl(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,El(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Kl,t.w(),e.a)),e}).then(function(){return Lc(t.b,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Wl(t.ha);throw o}).then(function(){if(o)throw o}),Hl(t,r,i)}function Bl(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new S("internal-error");throw new S("auth-domain-config-required")}}function Hl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),xe(t.i)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new ol("userInvalidated")),t.i=e),e})}(t,e,n);return t.N.push(r),r.oa(function(){Z(t.N,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),wl(t),w(t.jc,t))),n||e})}function Gl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gl(e,n,t);return t.providerData&&G(t.providerData,function(t){t&&Nl(i,Xr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function zl(t){this.a=t,this.b=Xu()}$c.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then(function(t){var n=gt(e.f);return delete n[Xc],delete n[Jc],mt(n,t),e.g(n)})},I(tl,S),nl.prototype.tb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Mo(t.a)}),tu(e,Aa,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Mo(t.a)}),tu(e,Oa,n)})}(this,t,e)},I(rl,nl),I(il,rl),I(ol,Qe),(t=sl.prototype).yc=function(t){al(this,function(t){var e=[];return G(t.mfaInfo||[],function(t){(t=ei(t))&&e.push(t)}),e}(t.hd))},t.Sb=function(){return this.a.I().then(function(t){return new oo(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then(function(n){return t.tb(r,n,e)}).then(function(t){return Ll(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return tu(r,Ja,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=z(e.b,function(t){return t.uid!=n});return al(e,r),Ll(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,function(t){return t.w()})}}},ul.prototype.start=function(){this.a=this.c,cl(this,!0)},ul.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ll.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ll.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?xe(new S("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new be(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?oa(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(nu(t)):t.access_token&&t.refresh_token?n(t):r(new S("internal-error")):r(new S("network-request-failed"))},"POST",$n(e).toString(),t.g,t.m.get()):r(new S("internal-error"))})}(t.f,e).then(function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,hl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},dl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(gl,wn),gl.prototype.xa=function(t){this.za=t,ea(this.a,t)},gl.prototype.la=function(){return this.za},gl.prototype.Ga=function(){return X(this.aa)},gl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(gl.prototype,"providerId","firebase"),(t=gl.prototype).reload=function(){var t=this;return Hl(this,Al(this).then(function(){return Ml(t).then(function(){return El(t)}).then(xl)}))},t.oc=function(t){return this.I(t).then(function(t){return new Qc(t)})},t.I=function(t){var e=this;return Hl(this,Al(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new S("internal-error");return t.accessToken!=e.Aa&&(Il(e,t.accessToken),e.dispatchEvent(new ol("tokenChanged"))),Rl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new S("internal-error");kl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Nl(this,e[n]);Rl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ol("userReloaded",{hd:t}))},t.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Hl(this,t.c(this.a,this.uid).then(function(t){return Ll(e,t),n=Ul(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Hl(this,Fl(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ul(e,t,"link"),jl(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Hl(this,Fl(this,"phone").then(function(){return Zc(wl(n),t,e,w(n.rb,n))}))},t.Mc=function(t,e){var n=this;return Hl(this,ke().then(function(){return Zc(wl(n),t,e,w(n.ub,n))}),!0)},t.Cb=function(t){var e=this;return Hl(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Ll(e,t),e.reload()}))},t.ed=function(t){var e=this;return Hl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Ll(e,t),e.reload()}))},t.Db=function(t){var e=this;return Hl(this,this.I().then(function(n){return e.a.Db(n,t)}).then(function(t){return Ll(e,t),e.reload()}))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Al(this);var e=this;return Hl(this,this.I().then(function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Ll(e,t),Rl(e,"displayName",t.displayName||null),Rl(e,"photoURL",t.photoUrl||null),G(e.providerData,function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))}),El(e)}).then(xl))},t.cd=function(t){var e=this;return Hl(this,Ml(this).then(function(n){return Y(Ol(e),t)?function(t,e,n){return tu(t,Sa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return G(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),G(Ol(e),function(t){n[t]||Pl(e,t)}),n[Lo.PROVIDER_ID]||Qr(e,"phoneNumber",null),El(e)}):El(e).then(function(){throw new S("no-such-provider")})}))},t.delete=function(){var t=this;return Hl(this,this.I().then(function(e){return tu(t.a,Ea,{idToken:e})}).then(function(){t.dispatchEvent(new ol("userDeleted"))})).then(function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");ml(t,null),yl(t,null),bl(t,null),t.N=[],t.J=!0,Cl(t),Qr(t,"refreshToken",null),t.b&&Nc(t.b,t)})},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Mb,this):null},t.Ec=function(t){var e=this;return Vl(this,"linkViaPopup",t,function(){return Fl(e,t.providerId).then(function(){return El(e)})},!1)},t.Nc=function(t){return Vl(this,"reauthViaPopup",t,function(){return ke()},!0)},t.Fc=function(t){var e=this;return ql(this,"linkViaRedirect",t,function(){return Fl(e,t.providerId)},!1)},t.Oc=function(t){return ql(this,"reauthViaRedirect",t,function(){return ke()},!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hl(this,this.I().then(function(n){return ya(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ul(i,t,"link"),jl(i,t)}).then(function(){return o}))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hl(this,ke().then(function(){return co(_a(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ul(i,t,"reauthenticate"),Ll(i,t),i.i=null,i.reload()}).then(function(){return o}),!0)},t.vb=function(t){var e=this,n=null;return Hl(this,this.I().then(function(e){return n=e,void 0===t||pt(t)?{}:Vi(new Oi(t))}).then(function(t){return e.a.vb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Fb=function(t,e){var n=this,r=null;return Hl(this,this.I().then(function(t){return r=t,void 0===e||pt(e)?{}:Vi(new Oi(e))}).then(function(e){return n.a.Fb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Hl(this,t=co(ke(t),n.uid).then(function(t){return e=Ul(n,t,"reauthenticate"),Ll(n,t),n.i=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),G(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),mt(t,this.S.w()),t};var Kl={name:"redirectUser",F:"session"};function Wl(t){return ec(t.b,Kl,t.a)}function Yl(t){this.a=t,this.b=Xu(),this.c=null,this.f=function(t){var e=$l("local"),n=$l("session"),r=$l("none");return function(t,e,n){var r=tc(e,n),i=Ju(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Ur(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ql,t.a).then(function(t){return t?$l(t):e})})})}).then(function(e){return t.c=e,Zl(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener($l("local"),this.a,w(this.g,this))}function Zl(t,e){var n,r=[];for(n in Qu)Qu[n]!==e&&r.push(ec(t.b,$l(Qu[n]),t.a));return r.push(ec(t.b,Ql,t.a)),function(t){return new be(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ae(t[a],T(o,a),s);else e(i)})}(r)}Yl.prototype.g=function(){var t=this,e=$l("local");eh(this,function(){return ke().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Zl(t,"local").then(function(){t.c=e})})})};var Ql={name:"persistence",F:"session"};function $l(t){return{name:"authUser",F:t}}function Xl(t,e){return eh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Jl(t){return eh(t,function(){return ec(t.b,t.c,t.a)})}function th(t,e,n){return eh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Gl(t||{})})})}function eh(t,e){return t.f=t.f.then(e,e),t.f}function nh(t){if(this.l=!1,Qr(this,"settings",new Wc),Qr(this,"app",t),!lh(this).options||!lh(this).options.apiKey)throw new S("invalid-api-key");t=r.default.SDK_VERSION?xr(r.default.SDK_VERSION):null,this.a=new Ys(lh(this).options&&lh(this).options.apiKey,P(x),t),this.P=[],this.s=[],this.N=[],this.Pa=r.default.INTERNAL.createSubscribe(w(this.zc,this)),this.W=void 0,this.ib=r.default.INTERNAL.createSubscribe(w(this.Ac,this)),uh(this,null),this.i=new Yl(lh(this).options.apiKey+":"+lh(this).name),this.D=new zl(lh(this).options.apiKey+":"+lh(this).name),this.$=ph(this,function(t){var e=lh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Kl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Gl(t||{})})}(t.D,lh(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Wl(t.D)});return ph(t,e)}(t).then(function(){return th(t.i,e,t.R)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Xl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Jl(t.i)})):null}).then(function(e){uh(t,e||null)});return ph(t,n)}(this)),this.h=ph(this,function(t){return t.$.then(function(){return ah(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener($l("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.qa=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=lh(t).options.authDomain,n=lh(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=Vc(e,n,lh(t).name,t.R),Oc(t.b,t),hh(t)&&Sl(hh(t)),t.m){Sl(t.m);var r=t.m;r.xa(t.la()),ml(r,t),_l(r=t.m,t.J),bl(r,t),vl(r=t.m,t.R),yl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=jn(this.R.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function rh(t){Qe.call(this,"languageCodeChanged"),this.h=t}function ih(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function oh(t){Qe.call(this,"frameworkChanged"),this.f=t}function sh(t){return t.Oa||xe(new S("auth-domain-config-required"))}function ah(t){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));var e=sh(t).then(function(){return t.b.ra()}).then(function(t){return t?Xr(t):null});return ph(t,e)}function uh(t,e){hh(t)&&(function(t,e){Q(t.W,function(t){return t==e})}(hh(t),t.Ba),fn(hh(t),"tokenChanged",t.qa),fn(hh(t),"userDeleted",t.za),fn(hh(t),"userInvalidated",t.Aa),Cl(hh(t))),e&&(e.W.push(t.Ba),cn(e,"tokenChanged",t.qa),cn(e,"userDeleted",t.za),cn(e,"userInvalidated",t.Aa),0<t.u&&Tl(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),ml(e,t),_l(e,t.J),bl(e,t),vl(e,t.R),yl(e,t))}function ch(t,e){var n=null,r=null;return ph(t,e.then(function(e){return n=Uo(e),r=Zi(e),function(t,e){var n={};return n.apiKey=lh(t).options.apiKey,n.authDomain=lh(t).options.authDomain,n.appName=lh(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then(function(){return function(t,e,n,r){var i=new gl(t,e);return n&&(i.ha=n),r&&_l(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return hh(t)&&e.uid==hh(t).uid?(Dl(hh(t),e),t.da(e)):(uh(t,e),Sl(e),t.da(e))}).then(function(){dh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),t,w(t.kc,t))),n||e}).then(function(){return Xr({user:hh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function lh(t){return t.app}function hh(t){return t.currentUser}function fh(t){return hh(t)&&hh(t)._lat||null}function dh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](fh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](fh(t))}}function ph(t,e){return t.P.push(e),e.oa(function(){Z(t.P,e)}),e}function gh(){}function vh(){this.a={},this.b=1e12}Yl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");t:{for(r in Qu)if(Qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Tr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Au()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),eh(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Zl(n,t)}).then(function(){if(n.c=$l(t),e)return n.b.set(n.c,e,n.a)}):ke()})},I(nh,wn),I(rh,Qe),I(ih,Qe),I(oh,Qe),(t=nh.prototype).yb=function(t){return ph(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ea(this.a,this.aa),this.dispatchEvent(new rh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&yr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,na(this.a,this.R),this.dispatchEvent(new ih(this.R))}},t.Gc=function(t){this.J.push(t),ia(this.a,r.default.SDK_VERSION?xr(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new oh(this.J))},t.Ga=function(){return X(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:lh(this).options.apiKey,authDomain:lh(this).options.authDomain,appName:lh(this).name,currentUser:hh(this)&&hh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ch(i,ma(i.a,o))})},t.Xc=function(t){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),i=jr(),o=null;(!Mr()||br())&&lh(this).options.authDomain&&t.isOAuthProvider&&(o=gu(lh(this).options.authDomain,lh(this).options.apiKey,lh(this).name,"signInViaPopup",t,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.R));var s=gr(o,n&&n.va,n&&n.ua);return ph(this,n=sh(this).then(function(n){return Dc(n,s,"signInViaPopup",t,i,!!o,e.T())}).then(function(){return new be(function(t,n){e.na("signInViaPopup",null,new S("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Fc(e.b,e,"signInViaPopup",s,i)})}).then(function(t){return s&&pr(s),t?Xr(t):null}).o(function(t){throw s&&pr(s),t}))},t.Yc=function(t){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));var e=this;return ph(this,sh(this).then(function(){return function(t){return eh(t,function(){return t.b.set(Ql,t.c.F,t.a)})}(e.i)}).then(function(){return Lc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.ra=function(){var t=this;return ah(this).then(function(e){return t.b&&Hc(t.b.b),e}).o(function(e){throw t.b&&Hc(t.b.b),e})},t.dd=function(t){if(!t)return xe(new S("null-user"));if(this.S!=t.tenantId)return xe(new S("tenant-id-mismatch"));var e=this,n={};n.apiKey=lh(this).options.apiKey,n.authDomain=lh(this).options.authDomain,n.appName=lh(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Qs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&_l(e,r),Dl(e,t),e}(t,n,e.D,e.Ga());return ph(this,this.h.then(function(){if(lh(e).options.apiKey!=t.l)return r.reload()}).then(function(){return hh(e)&&t.uid==hh(e).uid?(Dl(hh(e),t),e.da(t)):(uh(e,r),Sl(r),e.da(r))}).then(function(){dh(e)}))},t.Bb=function(){var t=this;return ph(this,this.h.then(function(){return t.b&&Hc(t.b.b),hh(t)?(uh(t,null),Jl(t.i).then(function(){dh(t)})):ke()}))},t.Zc=function(){var t=this;return th(this.i,lh(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=hh(t)&&e){n=hh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Dl(hh(t),e),hh(t).I();(hh(t)||e)&&(uh(t,e),e&&(Sl(e),e.ha=t.D),t.b&&Oc(t.b,t),dh(t))}})},t.da=function(t){return Xl(this.i,t)},t.mc=function(){dh(this),this.da(hh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then(function(){return ch(e,ke(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(hh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),ph(t,t.h.then(function(){!t.l&&Y(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(fh(t)))}))}(this,function(){t.next(hh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(hh(r)):"function"==typeof t.next&&t.next(hh(r))}),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(hh(r)):"function"==typeof t.next&&t.next(hh(r))}),this.ib(t,e,n)},t.nc=function(t){var e=this;return ph(this,this.h.then(function(){return hh(e)?hh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return ch(e,tu(e.a,Ya,{token:t}))}).then(function(t){var n=t.user;return Rl(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return ch(n,tu(n.a,Za,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return ch(n,tu(n.a,Ca,{email:t,password:e}))})},t.ab=function(t){var e=this;return this.h.then(function(){return ch(e,t.ka(e.a))})},t.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then(function(){var e=hh(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ch(t,t.a.Ab()).then(function(e){var n=e.user;return Rl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return hh(this)&&hh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&hh(this)&&Tl(hh(this))},t.Pc=function(t){var e=this;G(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&hh(this)&&Cl(hh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ph(this,this.h.then(function(){e.l||Y(e.s,t)&&t(fh(e))}))},t.removeAuthTokenListener=function(t){Q(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener($l("local"),t.a,this.ja),this.b&&(Nc(this.b,this),Hc(this.b.b)),Promise.resolve()},t.hc=function(t){return ph(this,function(t,e){return tu(t,Ia,{identifier:e,continueUri:Rr()?lr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Po(t)},t.xb=function(t,e){var n=this;return ph(this,ke().then(function(){var t=new Oi(e);if(!t.c)throw new S("argument-error",Ri+" must be true when sending sign in link to email");return Vi(t)}).then(function(e){return n.a.xb(t,e)}).then(function(){}))},t.jd=function(t){return this.Sa(t).then(function(t){return t.data.email})},t.ob=function(t,e){return ph(this,this.a.ob(t,e).then(function(){}))},t.Sa=function(t){return ph(this,this.a.Sa(t).then(function(t){return new ai(t)}))},t.kb=function(t){return ph(this,this.a.kb(t).then(function(){}))},t.wb=function(t,e){var n=this;return ph(this,ke().then(function(){return void 0===e||pt(e)?{}:Vi(new Oi(e))}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.Wc=function(t,e){return ph(this,Zc(this,t,e,w(this.ab,this)))},t.Vc=function(t,e){var n=this;return ph(this,ke().then(function(){var r=e||lr(),i=No(t,r);if(!(r=Po(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new S("tenant-id-mismatch");return n.ab(i)}))},gh.prototype.render=function(){},gh.prototype.reset=function(){},gh.prototype.getResponse=function(){},gh.prototype.execute=function(){};var mh=null;function yh(t,e){return(e=_h(e))&&t.a[e]||null}function _h(t){return(t=void 0===t?1e12:t)?t.toString():null}function bh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():cn(this.f,"click",this.i)}function wh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Th(){}function Ch(){}vh.prototype.render=function(t,e){return this.a[this.b.toString()]=new bh(t,e),this.b++},vh.prototype.reset=function(t){var e=yh(this,t);t=_h(t),e&&t&&(e.delete(),delete this.a[t])},vh.prototype.getResponse=function(t){return(t=yh(this,t))?t.getResponse():null},vh.prototype.execute=function(t){(t=yh(this,t))&&t.execute()},bh.prototype.getResponse=function(){return wh(this),this.b},bh.prototype.execute=function(){wh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},bh.prototype.delete=function(){wh(this),this.g=!0,clearTimeout(this.a),this.a=null,fn(this.f,"click",this.i)},Qr(Th,"FACTOR_ID","phone"),Ch.prototype.g=function(){return mh||(mh=new vh),ke(mh)},Ch.prototype.c=function(){};var Ih=null;function Eh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Sh=new _t(Ct,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),kh=new Br(3e4,6e4);Eh.prototype.g=function(t){var e=this;return new be(function(n,r){var i=setTimeout(function(){r(new S("network-request-failed"))},kh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete a[e.a]},ke(qs(kt(Sh,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Eh.prototype.c=function(){this.b--};var xh=null;function Ah(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Ih||(Ih=new Ch),s=Ih):(xh||(xh=new Eh),s=xh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ph])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Rh],!a.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ys(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Oh];this.a[Oh]=function(t){if(Dh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Or(c,a);"function"==typeof e&&e(t)}};var l=this.a[Nh];this.a[Nh]=function(){if(Dh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Or(l,a);"function"==typeof t&&t()}}}var Oh="callback",Nh="expired-callback",Ph="sitekey",Rh="size";function Dh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Mh(t,e){return t.h.push(e),e.oa(function(){Z(t.h,e)}),e}function Lh(t){if(t.J)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function Fh(t,e,n){var i=!1;try{this.b=n||r.default.app()}catch(a){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.default.SDK_VERSION?xr(r.default.SDK_VERSION,s):null,Ah.call(this,n,t,e,function(){try{var t=o.b.auth().la()}catch(e){t=null}return t},s,P(x),i)}function Uh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=jh.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=jh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new S("argument-error",t+" failed: "+r)}(t=Ah.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Mh(this,ke().then(function(){if(Rr()&&!wr())return yr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,tu(t.s,Fa,{})}).then(function(e){t.a[Ph]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Lh(this);var t=this;return Mh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Gt(s.name),'"'),s.type){o.push(' type="',Gt(s.type),'"');var a={};mt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Lh(this);var t=this;return Mh(this,this.render().then(function(e){return new be(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Lh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Lh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Fh,Ah);var jh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Vh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function qh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Bh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Hh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Gh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function zh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Kh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Wh(t){return g(t)&&"string"==typeof t.uid}function Yh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Zh(t,e){for(var n in e){var r=e[n].name;t[r]=Xh(r,t[n],e[n].j)}}function Qh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T(function(t){return this[t]},n),set:T(function(t,e,n,r){Uh(t,[n],[r],!0),this[e]=r},r,n,e[n].lb),enumerable:!0})}}function $h(t,e,n,r){t[e]=Xh(e,n,r)}function Xh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Uh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Zh(nh.prototype,{kb:{name:"applyActionCode",j:[Vh("code")]},Sa:{name:"checkActionCode",j:[Vh("code")]},ob:{name:"confirmPasswordReset",j:[Vh("code"),Vh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Vh("email"),Vh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Vh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Vh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yh(Bh(),Hh(),"nextOrObserver"),Hh("opt_error",!0),Hh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yh(Bh(),Hh(),"nextOrObserver"),Hh("opt_error",!0),Hh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Vh("email"),Yh(Bh("opt_actionCodeSettings",!0),Gh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Vh("email"),Bh("actionCodeSettings")]},yb:{name:"setPersistence",j:[Vh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[zh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[zh()]},Tc:{name:"signInWithCustomToken",j:[Vh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Vh("email"),Vh("password")]},Vc:{name:"signInWithEmailLink",j:[Vh("email"),Vh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Yh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gl)}},Gh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Vh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Vh("url"),Bh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Vh("code")]}}),Qh(nh.prototype,{lc:{name:"languageCode",lb:Yh(Vh(),Gh(),"languageCode")},ti:{name:"tenantId",lb:Yh(Vh(),Gh(),"tenantId")}}),(nh.Persistence=Qu).LOCAL="local",nh.Persistence.SESSION="session",nh.Persistence.NONE="none",Zh(gl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[qh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[zh()]},rb:{name:"linkWithCredential",j:[zh()]},Dc:{name:"linkWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[zh()]},ub:{name:"reauthenticateWithCredential",j:[zh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Yh(Bh("opt_actionCodeSettings",!0),Gh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Vh(null,!0)]},cd:{name:"unlink",j:[Vh("provider")]},Cb:{name:"updateEmail",j:[Vh("email")]},Db:{name:"updatePassword",j:[Vh("password")]},ed:{name:"updatePhoneNumber",j:[zh("phone")]},Eb:{name:"updateProfile",j:[Bh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Vh("email"),Yh(Bh("opt_actionCodeSettings",!0),Gh(null,!0),"opt_actionCodeSettings",!0)]}}),Zh(vh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zh(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zh(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qh(Wc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:qh("appVerificationDisabledForTesting")}}),Zh(Yc.prototype,{confirm:{name:"confirm",j:[Vh("verificationCode")]}}),$h(uo,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,Ao,Do,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Yh(Vh(),Bh(),"json")]),$h(Oo,"credential",function(t,e){return new xo(t,e)},[Vh("email"),Vh("password")]),Zh(xo.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Zh(bo.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),$h(bo,"credential",wo,[Yh(Vh(),Bh(),"token")]),$h(Oo,"credentialWithLink",No,[Vh("email"),Vh("emailLink")]),Zh(To.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),$h(To,"credential",Co,[Yh(Vh(),Bh(),"token")]),Zh(Io.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),$h(Io,"credential",Eo,[Yh(Vh(),Yh(Bh(),Gh()),"idToken"),Yh(Vh(),Gh(),"accessToken",!0)]),Zh(So.prototype,{Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),$h(So,"credential",ko,[Yh(Vh(),Bh(),"token"),Vh("secret",!0)]),Zh(_o.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},credential:{name:"credential",j:[Yh(Vh(),Yh(Bh(),Gh()),"optionsOrIdToken"),Yh(Vh(),Gh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Zh(po.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Zh(lo.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),$h(Lo,"credential",Fo,[Vh("verificationId"),Vh("verificationCode")]),Zh(Lo.prototype,{gb:{name:"verifyPhoneNumber",j:[Yh(Vh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Kh(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Kh(t.session,ao)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?Kh(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Zh(Ro.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Zh(S.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Zh(Ko.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Zh(zo.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Zh(tl.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Zh($c.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),Zh(sl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Vh("displayName",!0)]},bd:{name:"unenroll",j:[Yh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Wh},Vh(),"multiFactorInfoIdentifier")]}}),Zh(Fh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),$h(wi,"parseLink",Ai,[Vh("link")]),$h(Th,"assertion",function(t){return new il(t)},[zh("phone")]),function(){if(void 0===r.default||!r.default.INTERNAL||!r.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ci,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ui,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:nh,AuthCredential:uo,Error:S};$h(t,"EmailAuthProvider",Oo,[]),$h(t,"FacebookAuthProvider",bo,[]),$h(t,"GithubAuthProvider",To,[]),$h(t,"GoogleAuthProvider",Io,[]),$h(t,"TwitterAuthProvider",So,[]),$h(t,"OAuthProvider",_o,[Vh("providerId")]),$h(t,"SAMLAuthProvider",yo,[Vh("providerId")]),$h(t,"PhoneAuthProvider",Lo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof nh)}}]),$h(t,"RecaptchaVerifier",Fh,[Yh(Vh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Bh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.default.app.App)}}]),$h(t,"ActionCodeURL",wi,[]),$h(t,"PhoneMultiFactorGenerator",Th,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new nh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.8"),r.default.INTERNAL.extendNamespace({User:gl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},6034:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Component:()=>o,ComponentContainer:()=>u,Provider:()=>a});var r=n(4762),i=n(4685),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.__read)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){var t;return(0,r.__generator)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.__read)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.__values)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.__read)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.__values)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},9192:(t,e,n)=>{"use strict";var r=n(9759),i=n(6034),o=n(4685),s=n(4762),a=n(300);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),f=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new f},p=d("localStorage"),g=d("sessionStorage"),v=new a.Logger("@firebase/database"),m=(l=1,function(){return l++}),y=function(t){var e=(0,o.stringToByteArray)(t),n=new o.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=_.apply(null,i):n+="object"==typeof i?(0,o.stringify)(i):i,n+=" "}return n},b=null,w=!0,T=function(t,e){(0,o.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=a.LogLevel.VERBOSE,b=v.log.bind(v),e&&g.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,g.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===g.get("logging_enabled")&&T(!0)),b){var n=_.apply(null,t);b(n)}},I=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,(0,s.__spreadArray)([t],(0,s.__read)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));v.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));throw v.error(n),new Error(n)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));v.warn(n)},x=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",O="[MAX_NAME]",N=function(t,e){if(t===e)return 0;if(t===A||e===O)return-1;if(e===A||t===O)return 1;var n=j(t),r=j(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.stringify)(e))},D=function(t){if("object"!=typeof t||null===t)return(0,o.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.stringify)(e[i]),r+=":",r+=D(t[e[i]]);return r+"}"},M=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var F=function(t){var e,n,r,i,s;(0,o.assert)(!x(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},U=new RegExp("^-?(0*)\\d{1,10}$"),j=function(t){if(U.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(e){setTimeout(function(){throw k("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},B=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){k('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),H=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';k(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),G=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K="websocket",W="long_polling",Y=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function Z(t,e,n){var r;if((0,o.assert)("string"==typeof e,"typeof type must == string"),(0,o.assert)("object"==typeof n,"typeof params must == object"),e===K)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==W)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return L(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},t}(),$={},X={};function J(t){var e=t.toString();return $[e]||($[e]=new Q),$[e]}var tt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),et="start",nt="close",rt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=I(t),this.stats_=J(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Z(e,W,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new it(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.__read)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===et)n.id=o,n.password=a;else{if(i!==nt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.__read)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.isNodeSdk)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.base64Encode)(e),r=M(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),it=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),ot=null;"undefined"!=typeof MozWebSocket?ot=MozWebSocket:"undefined"!=typeof WebSocket&&(ot=WebSocket);var st=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=I(this.connId),this.stats_=J(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Z(t,K,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization=this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new ot(this.connURL,[],r)}else this.mySock=new ot(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ot&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=M(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),at=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[rt,st]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=st&&st.isAvailable(),o=i&&!st.previouslyFailed();if(e.webSocketOnly&&(i||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[st];else{var a=this.transports_=[];try{for(var u=(0,s.__values)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ut=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=I("c:"+this.id+":"),this.transportManager_=new at(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=q(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=R("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),q(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),lt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,s.__spreadArray)([],(0,s.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.assert)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ht=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return(0,s.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(lt),ft=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ft("")}function pt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function gt(t){return t.pieces_.length-t.pieceNum_}function vt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ft(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ft(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ft)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ft(n,0)}function wt(t){return t.pieceNum_>=t.pieces_.length}function Tt(t,e){var n=pt(t),r=pt(e);if(null===n)return e;if(n===r)return Tt(vt(t),vt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=N(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function It(t,e){if(gt(t)!==gt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(gt(t)>gt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);kt(this)};function kt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+xt(t))}function xt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var At,Ot,Nt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return(0,s.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(lt),Pt=1e3,Rt=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=I("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Pt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Nt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ht.getInstance().on("online",h.onOnline_,h),h}return(0,s.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.Deferred,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.contains)(t,"w")){var n=(0,o.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();k("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+(0,o.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,s.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,a,u,c,l,h,f,d,p,g,v=this;return(0,s.__generator)(this,function(m){switch(m.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){(0,o.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=s.__read.apply(void 0,[m.sent(),2]),d=f[0],p=f[1],u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new ut(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){k(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")},a)),[3,4];case 3:return g=m.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&k(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return D(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ft(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,s.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,(0,s.__values)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?t["framework.cordova"]=1:(0,o.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ht.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Dt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Mt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Dt(A,t),r=new Dt(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Dt.MIN},t}(),Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return At},set:function(t){At=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return N(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(O,At)},e.prototype.makePost=function(t,e){return(0,o.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Dt(t,At)},e.prototype.toString=function(){return".key"},e}(Mt),Ft=new Lt,Ut=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),jt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:qt.EMPTY_NODE,this.right=null!=o?o:qt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return qt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return qt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new jt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),qt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ut(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ut(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function Bt(t,e){return N(t.name,e.name)}function Ht(t,e){return N(t,e)}var Gt,zt,Kt,Wt,Yt,Zt=function(t){return"number"==typeof t?"number:"+F(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.contains)(e,".sv"),"Priority must be a string or number.")}else(0,o.assert)(t===Ot||t.isEmpty(),"priority of unexpected type.");(0,o.assert)(t===Ot||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$t=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Gt},set:function(t){Gt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return wt(e)?this:".priority"===pt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=pt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===gt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(vt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Zt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?F(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?N(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(O,new $t("[PRIORITY-POST]",Kt))},e.prototype.makePost=function(t,e){var n=zt(t);return new Dt(e,new $t("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Mt)),Jt=Math.log(2),te=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new jt(s,o.node,jt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new jt(s,o.node,jt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new jt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,jt.BLACK):(a(h,jt.BLACK),a(h,jt.RED))}return o}(new te(t.length));return new qt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.assert)(ne&&Xt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ne},{".priority":Xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof qt?e:null},t.prototype.hasIndex=function(t){return(0,o.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.assert)(e!==Ft,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Dt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?ee(i,e.getCompare()):ne;var l=e.toString(),h=(0,s.__assign)({},this.indexSet_);h[l]=e;var f=(0,s.__assign)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.map)(this.indexes_,function(t,i){var s=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(s,"Missing index implementation for "+i),t===ne){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Dt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ee(a,s.getCompare())}return ne}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Dt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.map)(this.indexes_,function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Dt(e.name,r)):t}),this.indexSet_)},t}(),ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Yt||(Yt=new t(new qt(Ht),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Yt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Yt:e},t.prototype.getChild=function(t){var e=pt(t);return null===e?this:this.getImmediateChild(e).getChild(vt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Dt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Yt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=pt(t);if(null===n)return e;(0,o.assert)(".priority"!==pt(t)||1===gt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(vt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Zt(this.getPriority().val())+":"),this.forEachChild(Xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Ft||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ft||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xt),r=e.getIterator(Xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ft?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new qt(Ht),ie.EMPTY_NODE,re.Default)||this}return(0,s.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new $t(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return L(t,function(e,r){if((0,o.contains)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(L(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dt(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=ee(r,Bt,function(t){return t.name},Ht);if(i){var a=ee(r,Xt.getCompare());return new ie(s,se(e),new re({".priority":a},{".priority":Xt}))}return new ie(s,se(e),re.Default)}Object.defineProperties(Dt,{MIN:{value:new Dt(A,ie.EMPTY_NODE)},MAX:{value:new Dt(O,oe)}}),Lt.__EMPTY_NODE=ie.EMPTY_NODE,$t.__childrenNodeConstructor=ie,Ot=oe,Kt=oe,zt=se;var ae,ue,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.assert)(!wt(e)&&".priority"!==pt(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,s.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?N(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dt(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Dt(O,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Mt),le=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?N(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return Dt.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Dt(e,n)},e.prototype.toString=function(){return".value"},e}(Mt)),he="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fe=(ae=0,ue=[],function(t){var e,n=t===ae;ae=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=he.charAt(t%64),t=Math.floor(t/64);(0,o.assert)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ue[e];e--)ue[e]=0;ue[e]++}else for(e=0;e<12;e++)ue[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=he.charAt(ue[e]);return(0,o.assert)(20===i.length,"nextPushId: Length should be 20."),i}),de=function(t){if("2147483647"===t)return"-";var e=j(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return O;var o=he.charAt(he.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},pe=function(t){if("-2147483648"===t)return A;var e=j(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=he.charAt(he.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ge(t){return{type:"value",snapshotNode:t}}function ve(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):(0,o.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ve(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(ve(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Xt,function(t,e){i.matches(new Dt(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),we=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.assert)(u.numChildren()===this.limit_,"");var c=new Dt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ye(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me(e,f));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(ve(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(me(l.name,l.node)),i.trackChildChange(ve(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Te=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ie(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ee(t,e){var n=t.copy();return n.index_=e,n}function Se(t){var e,n={};return t.isDefault()||(t.index_===Xt?e="$priority":t.index_===le?e="$value":t.index_===Ft?e="$key":((0,o.assert)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.stringify)(e),t.startSet_&&(n.startAt=(0,o.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function ke(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}var xe=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=I("p:rest:"),o.listens_={},o}return(0,s.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Se(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.safeGet)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Se(t._queryParams),r=t._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var a=(0,s.__read)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.jsonEval)(h.responseText)}catch(e){k("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&k("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),Ae=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Oe(){return{value:null,children:new Map}}function Ne(t,e,n){if(wt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=pt(e);t.children.has(r)||t.children.set(r,Oe()),Ne(t.children.get(r),e=vt(e),n)}}function Pe(t,e){if(wt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xt,function(e,n){Ne(t,new ft(e),n)}),Pe(t,e)}if(t.children.size>0){var r=pt(e);return e=vt(e),t.children.has(r)&&Pe(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Re(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Re(r,new ft(e.toString()+"/"+t),n)})}var De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,s.__assign)({},t);return this.last_&&L(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Me=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,function(e,i){i>0&&(0,o.contains)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Le=(()=>(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Le||(Le={})),Le))();function Fe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ue,je=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Le.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(wt(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ft(e));return new t(dt(),n,this.revert)}return(0,o.assert)(pt(this.path)===e,"operationForChild called for unrelated child."),new t(vt(this.path),this.affectedTree,this.revert)},t}(),Ve=function(){function t(t,e){this.source=t,this.path=e,this.type=Le.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,dt()):new t(this.source,vt(this.path))},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Le.OVERWRITE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,vt(this.path),this.snap)},t}(),Be=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Le.MERGE}return t.prototype.operationForChild=function(e){if(wt(this.path)){var n=this.children.subtree(new ft(e));return n.isEmpty()?null:n.value?new qe(this.source,dt(),n.value):new t(this.source,dt(),n)}return(0,o.assert)(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,vt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),He=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(wt(t))return this.isFullyInitialized()&&!this.filtered_;var e=pt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ge=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function ze(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ke(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return Ke(new He(e,n,r),t.serverCache)}function Ye(t,e,n,r){return Ke(t.eventCache,new He(e,n,r))}function Ze(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var $e=function(){function t(t,e){void 0===e&&(Ue||(Ue=new qt(P)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return L(e,function(t,e){n=n.set(new ft(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(wt(t))return null;var n=pt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(vt(t),e);return null!=i?{path:bt(new ft(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(wt(e))return this;var n=pt(e),r=this.children.get(n);return null!==r?r.subtree(vt(e)):new t(null)},t.prototype.set=function(e,n){if(wt(e))return new t(n,this.children);var r=pt(e),i=(this.children.get(r)||new t(null)).set(vt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(wt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=pt(e),r=this.children.get(n);if(r){var i=r.remove(vt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(wt(t))return this.value;var e=pt(t),n=this.children.get(e);return n?n.get(vt(t)):null},t.prototype.setTree=function(e,n){if(wt(e))return n;var r,i=pt(e),o=(this.children.get(i)||new t(null)).setTree(vt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(wt(t))return null;var i=pt(t),o=this.children.get(i);return o?o.findOnPath_(vt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(wt(e))return this;this.value&&r(n,this.value);var i=pt(e),o=this.children.get(i);return o?o.foreachOnPath_(vt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new $e(null))},t}();function Je(t,e,n){if(wt(e))return new Xe(new $e(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Tt(i,e);return o=o.updateChild(s,n),new Xe(t.writeTree_.set(i,o))}var a=new $e(n),u=t.writeTree_.setTree(e,a);return new Xe(u)}function tn(t,e,n){var r=t;return L(n,function(t,n){r=Je(r,bt(e,t),n)}),r}function en(t,e){if(wt(e))return Xe.empty();var n=t.writeTree_.setTree(e,new $e(null));return new Xe(n)}function nn(t,e){return null!=rn(t,e)}function rn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Tt(n.path,e)):null}function on(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xt,function(t,n){e.push(new Dt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Dt(t,n.value))}),e}function sn(t,e){if(wt(e))return t;var n=rn(t,e);return new Xe(null!=n?new $e(n):t.writeTree_.subtree(e))}function an(t){return t.writeTree_.isEmpty()}function un(t,e){return cn(dt(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function ln(t,e){return wn(e,t)}function hn(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(bt(t.path,n),e))return!0;return!1}function fn(t){return t.visible}function dn(t,e,n){for(var r=Xe.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=Je(r,u=Tt(n,a),s.snap):Et(a,n)&&(u=Tt(a,n),r=Je(r,dt(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(Et(n,a))r=tn(r,u=Tt(n,a),s.children);else if(Et(a,n))if(wt(u=Tt(a,n)))r=tn(r,dt(),s.children);else{var c=(0,o.safeGet)(s.children,pt(u));if(c){var l=c.getChild(vt(u));r=Je(r,dt(),l)}}}}}return r}function pn(t,e,n,r,i){if(r||i){var o=sn(t.visibleWrites,e);return!i&&an(o)?n:i||null!=n||nn(o,dt())?un(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=rn(t.visibleWrites,e);if(null!=s)return s;var a=sn(t.visibleWrites,e);return an(a)?n:null!=n||nn(a,dt())?un(a,n||ie.EMPTY_NODE):null}function gn(t,e,n,r){return pn(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e,n){var r=ie.EMPTY_NODE,i=rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=sn(t.visibleWrites,e);return n.forEachChild(Xt,function(t,e){var n=un(sn(o,new ft(t)),e);r=r.updateImmediateChild(t,n)}),on(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return on(sn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(nn(t.visibleWrites,s))return null;var a=sn(t.visibleWrites,s);return an(a)?i.getChild(n):un(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function yn(t,e){return function(t,e){return rn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function _n(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=rn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(sn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return wn(bt(t.treePath,e),t.writeTree)}function wn(t,e){return{treePath:t,writeTree:e}}var Tn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ve(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Cn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),In=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new He(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=sn(t.visibleWrites,e),c=rn(u,dt());if(null!=c)a=c;else{if(null==n)return[];a=un(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function En(t,e,n,r,i,s){var a=e.eventCache;if(null!=yn(r,n))return e;var u=void 0,c=void 0;if(wt(n))if((0,o.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=vn(r,l instanceof ie?l:ie.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var f=gn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var d=pt(n);if(".priority"===d){(0,o.assert)(1===gt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var v=vt(n),m=void 0;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();var y=mn(r,n,a.getNode(),c);m=null!=y?a.getNode().getImmediateChild(d).updateChild(v,y):a.getNode().getImmediateChild(d)}else m=_n(r,d,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),d,m,v,i,s):a.getNode()}}return We(e,u,a.isFullyInitialized()||wt(n),t.filter.filtersNodes())}function Sn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(wt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=pt(n);if(!c.isCompleteForPath(n)&&gt(n)>1)return e;var d=vt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Cn,null)}var g=Ye(e,u,c.isFullyInitialized()||wt(n),l.filtersNodes());return En(t,g,n,i,new In(i,g,o),a)}function kn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new In(i,e,o);if(wt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,u,!0,t.filter.filtersNodes());else{var h=pt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=vt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(wt(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===mt(f)&&g.getChild(_t(f)).isEmpty()?g:g.updateChild(f,r):ie.EMPTY_NODE}a=d.equals(p)?e:We(e,t.filter.updateChild(c.getNode(),h,p,f,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function xn(t,e){return t.eventCache.isCompleteForChild(e)}function An(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function On(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=wt(n)?r:new $e(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ft(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ft(n),h,i,o,s,a)}}),c}var Nn,Pn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new we(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new He(u,s.isFullyInitialized(),i.filtersNodes()),h=new He(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ke(h,l),this.eventGenerator_=new Ge(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Rn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!wt(e)&&!n.getImmediateChild(pt(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Mn(t,e,n){var r=[];if(n){(0,o.assert)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Ln(t,e,n,r){e.type===Le.MERGE&&null!==e.source.queryId&&((0,o.assert)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)(Ze(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Tn;if(n.type===Le.OVERWRITE){var c=n;c.source.fromUser?s=kn(t,e,c.path,c.snap,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!wt(c.path),s=Sn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Le.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);xn(e,pt(c))&&(a=kn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);xn(e,pt(c))||(a=kn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=On(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Le.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=yn(r,n))return e;var u=new In(r,e,i),c=e.eventCache.getNode(),l=void 0;if(wt(n)||".priority"===pt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=gn(r,Qe(e));else{var f=e.serverCache.getNode();(0,o.assert)(f instanceof ie,"serverChildren would be complete if leaf node"),h=vn(r,f)}l=t.filter.updateFullNode(c,h=h,s)}else{var d=pt(n),p=_n(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,vt(n),u,s):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,ie.EMPTY_NODE,vt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=yn(r,dt()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=yn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(wt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(wt(n)){var c=new $e(null);return u.getNode().forEachChild(Ft,function(t,e){c=c.set(new ft(t),e)}),On(t,e,n,c,i,o,a,s)}return e}var l=new $e(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),On(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Le.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return En(t,Ye(e,o.getNode(),o.isFullyInitialized()||wt(n),o.isFiltered()),n,r,Cn,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ze(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ge(Ze(e)))}}(e,s,f),{viewCache:s,changes:f}}(t.processor_,a,e,n,r);return i=t.processor_,(0,o.assert)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.assert)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Fn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Fn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),ze(t,i,"child_removed",e,r,n),ze(t,i,"child_added",e,r,n),ze(t,i,"child_moved",o,r,n),ze(t,i,"child_changed",e,r,n),ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Un,jn=function(){this.views=new Map};function Vn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Ln(c,e,n,r)}var l=[];try{for(var h=(0,s.__values)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Ln(c=f.value,e,n,r))}catch(d){i={error:d}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function qn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=gn(n,i?r:null),a=!1;s?a=!0:r instanceof ie?(s=vn(n,r),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=Ke(new He(s,a,!1),new He(r,i,!1));return new Pn(e,u)}return o}function Bn(t){var e,n,r=[];try{for(var i=(0,s.__values)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Hn(t,e){var n,r,i=null;try{for(var o=(0,s.__values)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Rn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Gn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function zn(t,e){return null!=Gn(t,e)}function Kn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=(0,s.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Yn=1,Zn=function(t){this.listenProvider_=t,this.syncPointTree_=new $e(null),this.pendingWriteTree_={visibleWrites:Xe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Qn(t,e,n,r,i){return function(t,e,n,r,i){(0,o.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Je(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?nr(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function $n(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=dn(t.allWrites,fn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=en(t.visibleWrites,r.path):L(r.children,function(e){t.visibleWrites=en(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new $e(null);return null!=r.snap?i=i.set(dt(),!0):L(r.children,function(t){i=i.set(new ft(t),!0)}),nr(t,new je(r.path,i,n))}return[]}function Xn(t,e,n){return nr(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||zn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Kn(t);if("default"===u)try{for(var f=(0,s.__values)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=(0,s.__read)(d.value,2),v=g[0];l=l.concat(Mn(p=g[1],n,r)),Dn(p)&&(t.views.delete(v),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Mn(p,n,r)),Dn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Kn(t)&&c.push(new((0,o.assert)(Nn,"Reference.ts has not been loaded"),Nn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(i,function(t,e){return Kn(e)});if(h&&!f){var d=t.syncPointTree_.subtree(i);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Kn(e))return[Wn(e)];var r=[];return e&&(r=Bn(e)),L(n,function(t,e){r=r.concat(e)}),r})}(d),g=0;g<p.length;++g){var v=p[g],m=v.query,y=or(t,v);t.listenProvider_.startListening(hr(m),sr(t,m),y.hashFn,y.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(hr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ar(e));t.listenProvider_.stopListening(hr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=ar(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function tr(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Tt(t,r);i=i||Hn(e,n),s=s||Kn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Kn(u),i=i||Hn(u,dt())):(u=new jn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Hn(e,dt());n&&(i=i.updateImmediateChild(t,n))}));var c=zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=ar(e);(0,o.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Yn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var s=qn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,function(t,e){r.push(ve(t,e))}),n.isFullyInitialized()&&r.push(ge(n.getNode())),Fn(t,r,n.getNode(),e)}(s,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,a);if(!c&&!s){var d=Gn(u,e);f=f.concat(function(t,e,n){var r=e._path,i=sr(t,e),s=or(t,n),a=t.listenProvider_.startListening(hr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.assert)(!Kn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!wt(t)&&e&&Kn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(Bn(e).map(function(t){return t.query}))),L(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(hr(h),sr(t,h))}return a}(t,e,d))}return f}function er(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Hn(n,Tt(t,e));if(r)return r});return pn(r,e,i,n,!0)}function nr(t,e){return rr(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,dt()))}function rr(t,e,n,r){if(wt(t.path))return ir(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=Hn(i,dt()));var o=[],s=pt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(rr(a,u,c,l))}return i&&(o=o.concat(Vn(i,t,r,n))),o}function ir(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=Hn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(ir(u,i,s,a)))}),i&&(o=o.concat(Vn(i,t,r,n))),o}function or(t,e){var n=e.query,r=sr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ie.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ur(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=Tt(o,e);return lr(t,o,new Ve(Fe(s),a))}return[]}(t,n._path,r):function(t,e){return nr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Jn(t,n,null,i)}}}function sr(t,e){var n=ar(e);return t.queryToTagMap.get(n)}function ar(t){return t._path.toString()+"$"+t._queryIdentifier}function ur(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return(0,o.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ft(t.substr(0,e))}}function lr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.assert)(r,"Missing sync point for query tag that we're tracking"),Vn(r,n,ln(t.pendingWriteTree_,e),null)}function hr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.assert)(Un,"Reference.ts has not been loaded"),Un)(t._repo,t._path):t}var fr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return er(this.syncTree_,this.path_)},t}(),pr=function(t,e,n){return t&&"object"==typeof t?((0,o.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?gr(t[".sv"],e,n):"object"==typeof t[".sv"]?vr(t[".sv"],e):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},gr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.assert)(!1,"Unexpected server value: "+t)}},vr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.assert)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},mr=function(t,e,n,r){return _r(e,new dr(n,t),r)},yr=function(t,e,n){return _r(t,new fr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=pr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=pr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new $t(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new $t(o))),u.forEachChild(Xt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function wr(t,e){for(var n=e instanceof ft?e:new ft(e),r=t,i=pt(n);null!==i;){var s=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new br(i,r,s),i=pt(n=vt(n))}return r}function Tr(t){return t.node.value}function Cr(t,e){t.node.value=e,xr(t)}function Ir(t){return t.node.childCount>0}function Er(t,e){L(t.node.children,function(n,r){e(new br(n,t,r))})}function Sr(t,e,n,r){n&&!r&&e(t),Er(t,function(t){Sr(t,e,!0,r)}),n&&r&&e(t)}function kr(t){return new ft(null===t.parent?t.name:kr(t.parent)+"/"+t.name)}function xr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Tr(t)&&!Ir(t)}(n),i=(0,o.contains)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,xr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,xr(t))}(t.parent,t.name,t)}var Ar=/[\[\].#$\/\u0000-\u001F\u007F]/,Or=/[\[\].#$\u0000-\u001F\u007F]/,Nr=10485760,Pr=function(t){return"string"==typeof t&&0!==t.length&&!Ar.test(t)},Rr=function(t){return"string"==typeof t&&0!==t.length&&!Or.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!x(t)||t&&"object"==typeof t&&(0,o.contains)(t,".sv")},Mr=function(t,e,n,r){r&&void 0===e||Lr((0,o.errorPrefix)(t,"value"),e,n)},Lr=function(t,e,n){var r=n instanceof ft?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+xt(r));if("function"==typeof e)throw new Error(t+"contains a function "+xt(r)+" with contents = "+e.toString());if(x(e))throw new Error(t+"contains "+e.toString()+" "+xt(r));if("string"==typeof e&&e.length>Nr/3&&(0,o.stringLength)(e)>Nr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+xt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(L(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Pr(e)))throw new Error(t+" contains an invalid key ("+e+") "+xt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.stringLength)(e),kt(t)}(r,e),Lr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.stringLength)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+xt(r)+" in addition to actual children.")}},Fr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];L(e,function(t,e){var r=new ft(t);if(Lr(i,e,bt(n,r)),".priority"===mt(r)&&!Dr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Ur=function(t,e,n){if(!n||void 0!==e){if(x(e))throw new Error((0,o.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(e))throw new Error((0,o.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Vr=function(t,e,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},qr=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Br=function(t,e){if(".info"===pt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Hr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Pr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rr(t)}(n))throw new Error((0,o.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Gr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.errorPrefix)(t,e)+"must be a boolean.")},zr=function(){this.eventLists_=[],this.recursionDepth_=0};function Kr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||It(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){Kr(t,n),Zr(t,function(t){return It(t,e)})}function Yr(t,e,n){Kr(t,n),Zr(t,function(t){return Et(t,e)||Et(e,t)})}function Zr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&C("event: "+n.toString()),V(r)}}}var $r="repo_interrupt",Xr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oe(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Jr(t){var e=t.infoData_.getNode(new ft(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ti(t){return(e=(e={timestamp:Jr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ei(t,e,n,r,i){t.dataUpdateCount++;var s=new ft(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.map)(n,function(t){return se(t)});a=function(t,e,n,r){var i=ur(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,u=Tt(s,e),c=$e.fromObject(n);return lr(t,s,new Be(Fe(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=se(n);a=function(t,e,n,r){var i=ur(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,u=Tt(s,e);return lr(t,s,new qe(Fe(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.map)(n,function(t){return se(t)});a=function(t,e,n){var r=$e.fromObject(n);return nr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=se(n);a=Xn(t.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=pi(t,s)),Yr(t.eventQueue_,f,a)}function ni(t,e){ri(t,"connected",e),!1===e&&function(t){li(t,"onDisconnectEvents");var e=ti(t),n=Oe();Re(t.onDisconnect_,dt(),function(r,i){var o=mr(r,i,t.serverSyncTree_,e);Ne(n,r,o)});var r=[];Re(n,dt(),function(e,n){r=r.concat(Xn(t.serverSyncTree_,e,n));var i=_i(t,e);pi(t,i)}),t.onDisconnect_=Oe(),Yr(t.eventQueue_,dt(),r)}(t)}function ri(t,e,n){var r=new ft("/.info/"+e),i=se(n);t.infoData_.updateSnapshot(r,i);var o=Xn(t.infoSyncTree_,r,i);Yr(t.eventQueue_,r,o)}function ii(t){return t.nextWriteId_++}function oi(t,e,n,r,i){li(t,"set",{path:e.toString(),value:n,priority:r});var o=ti(t),s=se(n,r),a=er(t.serverSyncTree_,e),u=yr(s,a,o),c=ii(t),l=Qn(t.serverSyncTree_,e,u,c,!0);Kr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||k("set at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,c,!o);Yr(t.eventQueue_,e,s),hi(0,i,n,r)});var h=_i(t,e);pi(t,h),Yr(t.eventQueue_,h,[])}function si(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Pe(t.onDisconnect_,e),hi(0,n,r,i)})}function ai(t,e,n,r){var i=se(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Ne(t.onDisconnect_,e,i),hi(0,r,n,o)})}function ui(t,e,n){var r;r=".info"===pt(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt($r)}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,(0,s.__spreadArray)([r],(0,s.__read)(e)))}function hi(t,e,n,r){e&&V(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function fi(t,e,n){return er(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||yi(t,e),Tr(e)){var n=vi(t,e);(0,o.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=fi(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Tt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=e;t.server_.put(f.toString(),h,function(r){li(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat($n(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(yi(t,wr(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),Yr(t.eventQueue_,e,i),a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(k("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;pi(t,e)}},a)}(t,kr(e),n)}else Ir(e)&&Er(e,function(e){di(t,e)})}function pi(t,e){var n=gi(t,e),r=kr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=Tt(n,c.path),h=!1;if((0,o.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else{var f=fi(t,c.path,s);c.currentInputSnapshot=f;var d=e[a].update(f.val());if(void 0!==d){Lr("transaction failed: Data returned ",d,c.path);var p=se(d);"object"==typeof d&&null!=d&&(0,o.contains)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,v=ti(t),m=yr(p,f,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=ii(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Qn(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat($n(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0))}Yr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(yi(t,t.transactionQueueTree_),u=0;u<r.length;u++)V(r[u]);di(t,t.transactionQueueTree_)}}(t,vi(t,n),r),r}function gi(t,e){var n,r=t.transactionQueueTree_;for(n=pt(e);null!==n&&void 0===Tr(r);)r=wr(r,n),n=pt(e=vt(e));return r}function vi(t,e){var n=[];return mi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function mi(t,e,n){var r=Tr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Er(e,function(e){mi(t,e,n)})}function yi(t,e){var n=Tr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cr(e,n.length>0?n:void 0)}Er(e,function(e){yi(t,e)})}function _i(t,e){var n=kr(gi(t,e)),r=wr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Sr(r,function(e){bi(t,e)}),n}function bi(t,e){var n=Tr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat($n(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Cr(e,void 0):n.length=s+1,Yr(t.eventQueue_,kr(e),i),a=0;a<r.length;a++)V(r[a])}}var wi=function(t,e){var n=Ti(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Y(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ft(n.pathString)}},Ti=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,s.__values)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Ci=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},t}(),Ii=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ei=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Si=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.Deferred;return si(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Br("OnDisconnect.remove",this._path);var t=new o.Deferred;return ai(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Br("OnDisconnect.set",this._path),Mr("OnDisconnect.set",t,this._path,!1);var e=new o.Deferred;return ai(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Br("OnDisconnect.setWithPriority",this._path),Mr("OnDisconnect.setWithPriority",t,this._path,!1),Ur("OnDisconnect.setWithPriority",e,!1);var n=new o.Deferred;return function(t,e,n,r,i){var o=se(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Ne(t.onDisconnect_,e,o),hi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Br("OnDisconnect.update",this._path),Fr("OnDisconnect.update",t,this._path,!1);var e=new o.Deferred;return function(t,e,n,r){if((0,o.isEmpty)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&L(n,function(n,r){var i=se(r);Ne(t.onDisconnect_,bt(e,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),ki=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return wt(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ni(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=ke(this._queryParams),e=D(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return ke(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=It(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function xi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ai(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ft){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==O)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Xt){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(t.getIndex()instanceof ce||t.getIndex()===le,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Oi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ni=function(t){function e(e,n){return t.call(this,e,n,new Te,!1)||this}return(0,s.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=_t(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(ki),Pi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ft(e),r=Mi(this.ref,e);return new t(this._node.getChild(n),r,Xt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Mi(n.ref,r),Xt))})},t.prototype.hasChild=function(t){var e=new ft(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ri(t,e){return(t=(0,o.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?Mi(t._root,e):t._root}function Di(t,e){(t=(0,o.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=wi(e,t._repo.repoInfo_.nodeAdmin);Hr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ri(t,n.path.toString())}function Mi(t,e){var n;return null===pt((t=(0,o.getModularInstance)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qr("child","path",n,!1)):qr("child","path",e,!1),new Ni(t._repo,bt(t._path,e))}function Li(t,e){t=(0,o.getModularInstance)(t),Br("push",t._path),Mr("push",e,t._path,!0);var n,r=Jr(t._repo),i=fe(r),s=Mi(t,i),a=Mi(t,i);return n=null!=e?Ui(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Fi(t){return Br("remove",t._path),Ui(t,null)}function Ui(t,e){t=(0,o.getModularInstance)(t),Br("set",t._path),Mr("set",e,t._path,!1);var n=new o.Deferred;return oi(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function ji(t,e){t=(0,o.getModularInstance)(t),Br("setPriority",t._path),Ur("setPriority",e,!1);var n=new o.Deferred;return oi(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Vi(t,e,n){if(Br("setWithPriority",t._path),Mr("setWithPriority",e,t._path,!1),Ur("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.Deferred;return oi(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function qi(t,e){Fr("update",e,t._path,!1);var n=new o.Deferred;return function(t,e,n,r){li(t,"update",{path:e.toString(),value:n});var i=!0,s=ti(t),a={};if(L(n,function(n,r){i=!1,a[n]=mr(bt(e,n),se(r),t.serverSyncTree_,s)}),i)C("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=$e.fromObject(n);return nr(t,new Be({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Kr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||k("update at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,u,!o),a=s.length>0?pi(t,e):e;Yr(t.eventQueue_,a,s),hi(0,r,n,i)}),L(n,function(n){var r=_i(t,bt(e,n));pi(t,r)}),Yr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Bi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ci("value",this,new Pi(t.snapshotNode,new Ni(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ii(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Hi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ii(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.assert)(null!=t.childName,"Child events should have a childName.");var n=Mi(new Ni(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ci(t.type,this,new Pi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Gi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ui(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ei(n,o||void 0),c="value"===e?new Bi(u):new Hi(e,u);return function(t,e,n){var r;r=".info"===pt(e._path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ui(t._repo,t,c)}}function zi(t,e,n,r){return Gi(t,"value",e,n,r)}function Ki(t,e,n,r){return Gi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return Gi(t,"child_changed",e,n,r)}function Yi(t,e,n,r){return Gi(t,"child_moved",e,n,r)}function Zi(t,e,n,r){return Gi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Ei(n):null;"value"===e?r=new Bi(i):e&&(r=new Hi(e,i)),ui(t._repo,t,r)}var $i=function(){},Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Mr("endAt",this._value,t._path,!0);var e=Ie(t._queryParams,this._value,this._key);if(Oi(e),Ai(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ki(t._repo,t._path,e,t._orderByCalled)},e}($i);function Ji(t,e){return Vr("endAt","key",e,!0),new Xi(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Mr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ft?("string"==typeof n&&(n=pe(n)),i=Ie(e,n,r)):i=Ie(e,n,null==r?A:pe(r)),i.endBeforeSet_=!0,i);if(Oi(o),Ai(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ki(t._repo,t._path,o,t._orderByCalled)},e}($i);function eo(t,e){return Vr("endBefore","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Mr("startAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(Oi(e),Ai(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ki(t._repo,t._path,e,t._orderByCalled)},e}($i);function ro(t,e){return void 0===t&&(t=null),Vr("startAt","key",e,!0),new no(t,e)}var io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Mr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ft?("string"==typeof n&&(n=de(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?O:de(r)),i.startAfterSet_=!0,i);if(Oi(o),Ai(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ki(t._repo,t._path,o,t._orderByCalled)},e}($i);function oo(t,e){return Vr("startAfter","key",e,!0),new io(t,e)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ki(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}($i);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ki(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}($i);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(t)}var lo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){xi(t,"orderByChild");var e=new ft(this._path);if(wt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Ee(t._queryParams,n);return Ai(r),new ki(t._repo,t._path,r,!0)},e}($i);function ho(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qr("orderByChild","path",t,!1),new lo(t)}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){xi(t,"orderByKey");var e=Ee(t._queryParams,Ft);return Ai(e),new ki(t._repo,t._path,e,!0)},e}($i);function po(){return new fo}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){xi(t,"orderByPriority");var e=Ee(t._queryParams,Xt);return Ai(e),new ki(t._repo,t._path,e,!0)},e}($i);function vo(){return new go}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){xi(t,"orderByValue");var e=Ee(t._queryParams,le);return Ai(e),new ki(t._repo,t._path,e,!0)},e}($i);function yo(){return new mo}var _o=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(Mr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xi(this._value,this._key)._apply(new no(this._value,this._key)._apply(t))},e}($i);function bo(t,e){return Vr("equalTo","key",e,!0),new _o(t,e)}function wo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.getModularInstance)(t);try{for(var u=(0,s.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){(0,o.assert)(!Nn,"__referenceConstructor has already been defined"),Nn=t}(Ni),function(t){(0,o.assert)(!Un,"__referenceConstructor has already been defined"),Un=t}(Ni);var To={},Co=!1;function Io(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=wi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=wi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new G(G.OWNER):new H(t.name,t.options,e);Hr("Invalid Firebase Database URL",a),wt(a.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=To[e.name];i||(To[e.name]=i={});var o=i[t.toURLString()];return o&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Xr(t,Co,n,r),i[t.toURLString()]=o,o}(u,t,l,new B(t.name,n));return new Eo(h,t)}var Eo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new xe(t.repoInfo_,function(e,n,r,i){ei(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ni(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Rt(t.repoInfo_,e,function(e,n,r,i){ei(t,e,n,r,i)},function(e){ni(t,e)},function(e){!function(t,e){L(e,function(e,n){ri(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Me(t.stats_,t.server_)},i=t.repoInfo_.toString(),X[i]||(X[i]=r()),X[i]),t.infoData_=new Ae,t.infoSyncTree_=new Zn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Xn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(t,"connected",!1),t.serverSyncTree_=new Zn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Yr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ni(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=To[e=this.app.name])&&n[t.key]===t||S("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&S("Cannot call "+t+" on a deleted database.")},t}();function So(t){(t=(0,o.getModularInstance)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function ko(t){var e;(t=(0,o.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume($r)}var xo={".sv":"timestamp"},Ao=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Oo(t,e,n){var r;if(t=(0,o.getModularInstance)(t),Br("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.Deferred,a=zi(t,function(){});return function(e,n,r,i,a,u){li(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Pi(r,new Ni(t._repo,t._path),Xt),s.resolve(new Ao(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=fi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Lr("transaction failed: Data returned ",h,c.path),c.status=0;var f=wr(e.transactionQueueTree_,n),d=Tr(f)||[];d.push(c),Cr(f,d);var p=void 0;"object"==typeof h&&null!==h&&(0,o.contains)(h,".priority")?(p=(0,o.safeGet)(h,".priority"),(0,o.assert)(Dr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(er(e.serverSyncTree_,n)||ie.EMPTY_NODE).getPriority().val();var g=ti(e),v=se(h,p),y=yr(v,l,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(e);var _=Qn(e.serverSyncTree_,n,y,c.currentWriteId,c.applyLocally);Yr(e.eventQueue_,n,_),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var No=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Po=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ro=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),qr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),qr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Mo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Do=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Ro(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return zi(this._delegate,c,l),n;case"child_added":return Ki(this._delegate,c,l),n;case"child_removed":return Zi(this._delegate,c,l),n;case"child_changed":return Wi(this._delegate,c,l),n;case"child_moved":return Yi(this._delegate,c,l),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),jr("Query.off",t,!0),(0,o.validateCallback)("Query.off","callback",e,!0),(0,o.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Tt(t,n);r=r||Hn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Hn(i,dt()):(i=new jn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new He(r,!0,!1):null;return Ze(qn(i,e,ln(t.pendingWriteTree_,e._path),o?s.getNode():ie.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=se(n).withIndex(e._queryParams.getIndex()),i=Xn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return li(t,"get for query "+(0,o.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.getModularInstance)(t))._repo,t).then(function(e){return new Pi(e,new Ni(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Ro(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(t,e){var r=new Ro(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Yi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,wo(this._delegate,ao(e)))},t.prototype.limitToLast=function(e){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,wo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,wo(this._delegate,ho(e)))},t.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,wo(this._delegate,po()))},t.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,wo(this._delegate,vo()))},t.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,wo(this._delegate,yo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,wo(this._delegate,ro(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,wo(this._delegate,oo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,wo(this._delegate,Ji(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,wo(this._delegate,eo(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,wo(this._delegate,bo(e,n)))},t.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Mo(this.database,new Ni(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Mo=function(t){function e(e,n){var r=t.call(this,e,new ki(n._repo,n._path,new Te,!1))||this;return r.database=e,r._delegate=n,r}return(0,s.__extends)(e,t),e.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Mi(this._delegate,t))},e.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",e,!0);var n=Ui(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Br("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",e,!0);var i=qi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Vi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",t,!0);var e=Fi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",t,!1),(0,o.validateCallback)("Reference.transaction","onComplete",e,!0),Gr("Reference.transaction","applyLocally",n,!0);var i=Oo(this._delegate,t,{applyLocally:n}).then(function(t){return new Po(t.committed,new Ro(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=ji(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=Li(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Br("Reference.onDisconnect",this._delegate._path),new No(new Si(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Do),Lo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new G(G.OWNER);else if(r.mockUserToken){var a=(0,o.createMockUserToken)(r.mockUserToken,t.app.options.projectId);s=new G(a)}!function(t,e,n,r){t.repoInfo_=new Y(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Mo){var e=Di(this._delegate,t.toString());return new Mo(this,e)}return e=Ri(this._delegate,t),new Mo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.validateArgCount)(e,1,1,arguments.length);var n=Di(this._delegate,t);return new Mo(this,n)},t.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),So(this._delegate)},t.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),ko(this._delegate)},t.ServerValue={TIMESTAMP:xo,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Fo=Object.freeze({__proto__:null,forceLongPolling:function(){st.forceDisallow(),rt.forceAllow()},forceWebSockets:function(){rt.forceDisallow()},isWebSocketsAvailable:function(){return st.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new De(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);L(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return u.setComponent(new i.Component("auth-internal",function(){return r},"PRIVATE")),{instance:new Lo(Io(e,u,void 0,n,a),e),namespace:o}}}),Uo=Rt;Rt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Rt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var jo=Object.freeze({__proto__:null,DataConnection:Uo,RealTimeConnection:ut,hijackHash:function(t){var e=Rt.prototype.put;return Rt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Rt.prototype.put=e}},ConnectionTarget:Y,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Co=t}(t)}}),Vo=Lo.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.Component("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Lo(Io(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Mo,Query:Do,Database:Lo,DataSnapshot:Ro,enableLogging:T,INTERNAL:Fo,ServerValue:Vo,TEST_ACCESS:jo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.7"),(0,o.isNodeSdk)()&&(t.exports=n)}(r.default)},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,{LogLevel:()=>s,Logger:()=>h,setLogLevel:()=>f,setUserLogHandler:()=>d});var o=[],s=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={})),s))(),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},4685:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CONSTANTS:()=>i,Deferred:()=>d,ErrorFactory:()=>N,FirebaseError:()=>O,MAX_VALUE_MILLIS:()=>st,RANDOM_FACTOR:()=>at,Sha1:()=>Y,areCookiesEnabled:()=>x,assert:()=>o,assertionError:()=>s,async:()=>$,base64:()=>u,base64Decode:()=>l,base64Encode:()=>c,calculateBackoffMillis:()=>ut,contains:()=>q,createMockUserToken:()=>p,createSubscribe:()=>Z,decode:()=>L,deepCopy:()=>h,deepExtend:()=>f,errorPrefix:()=>tt,extractQuerystring:()=>W,getGlobal:()=>A,getModularInstance:()=>lt,getUA:()=>g,isAdmin:()=>V,isBrowser:()=>y,isBrowserExtension:()=>_,isElectron:()=>w,isEmpty:()=>H,isIE:()=>T,isIndexedDBAvailable:()=>S,isMobileCordova:()=>v,isNode:()=>m,isNodeSdk:()=>I,isReactNative:()=>b,isSafari:()=>E,isUWP:()=>C,isValidFormat:()=>j,isValidTimestamp:()=>F,issuedAtTime:()=>U,jsonEval:()=>D,map:()=>G,ordinal:()=>ct,querystring:()=>z,querystringDecode:()=>K,safeGet:()=>B,stringLength:()=>ot,stringToByteArray:()=>it,stringify:()=>M,validateArgCount:()=>J,validateCallback:()=>nt,validateContextObject:()=>rt,validateIndexedDBOpenable:()=>k,validateNamespace:()=>et});var r=n(4762),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function _(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function T(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return g().indexOf("MSAppHost/")>=0}function I(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function E(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){return"indexedDB"in self&&null!=indexedDB}function k(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function x(){return!(!navigator||!navigator.cookieEnabled)}function A(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,N.prototype.create),o}return(0,r.__extends)(e,t),e}(Error),N=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?P(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function P(t,e){return t.replace(R,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var R=/\{\$([^}]+)}/g;function D(t){return JSON.parse(t)}function M(t){return JSON.stringify(t)}var L=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=D(l(o[0])||""),n=D(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},F=function(t){var e=L(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},U=function(t){var e=L(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},j=function(t){var e=L(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},V=function(t){var e=L(t).claims;return"object"==typeof e&&!0===e.admin};function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function H(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function G(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function z(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function K(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("="),r=n[1];e[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),e}function W(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Y=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Z(t,e){var n=new Q(t,e);return n.subscribe.bind(n)}var Q=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function $(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function X(){}var J=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e){return t+" failed: "+e+" argument "}function et(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(tt(t,"namespace")+"must be a valid firebase namespace.")}function nt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tt(t,e)+"must be a valid function.")}function rt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tt(t,e)+"must be a valid context object.")}var it=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ot=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},st=144e5,at=.5;function ut(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(at*r*(Math.random()-.5)*2);return Math.min(st,r+i)}function ct(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(t):""+t}function lt(t){return t&&t._delegate?t._delegate:t}},2329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.default});var r=n(9759),i="8.7.1";r.default.registerVersion("firebase",i,"app"),r.default.SDK_VERSION=i},6676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},7574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),o=n(6490),s=n(6554),a=n(4487),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(2494),i=n(4449);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),o=n(5319),s=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),o=n(5319),s=n(9181),a=n(2494),u=n(4449);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),o=n(9105);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,o.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof s?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new s(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),o=n(7444);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),o=n(5319),s=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(7574);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(7574),i=n(7444),o=n(5319),s=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(7574),i=n(5015),o=n(4087);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(7574),i=n(4869),o=n(3282),s=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(4869),i=n(6693),o=n(4087);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(9773),i=n(4487);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(8002),i=n(4402),o=n(5345);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),o=n(5917),s=n(7574);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},8819:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2441),i=n(1307),o=n(9765);function s(){return new o.xQ}function a(){return t=>{return(0,i.x)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},3101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(7574);let i=1;const o=Promise.resolve(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var f=n(9796);class d extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,f.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(7393);function i(){}var o=n(9105);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(7574),i=n(5319);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var r=n(6465);const i=new(n(6102).v)(r.o)},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>s,N:()=>o});var r=n(6465),i=n(6102);const o=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),s=o},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),o=n(377),s=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},5419:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CreatingPageModule:()=>o});var r=n(8583),i=n(7716);let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[r.ez]]}),t})()},6975:(t,e,n)=>{"use strict";var r=n(8583),i=n(7716);class o extends r.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class s extends o{static makeCurrent(){(0,r.HT)(new s)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(u=u||document.querySelector("base"),u?u.getAttribute("href"):null);return null==e?null:function(t){a=a||document.createElement("a"),a.setAttribute("href",t);const e=a.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){u=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return(0,r.Mx)(document.cookie,t)}}let a,u=null;const c=new i.OlP("TRANSITION_ID"),l=[{provide:i.ip1,useFactory:function(t,e,n){return()=>{n.get(i.CZH).donePromise.then(()=>{const n=(0,r.q)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[c,r.K0,i.zs3],multi:!0}];class h{static init(){(0,i.VLi)(new h)}addToWindow(t){i.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),i.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),i.dqk.frameworkStabilizers||(i.dqk.frameworkStabilizers=[]),i.dqk.frameworkStabilizers.push(t=>{const e=i.dqk.getAllAngularTestabilities();let n=e.length,r=!1;const o=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?(0,r.q)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let f=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const d=new i.OlP("EventManagerPlugins");let p=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(d),i.LFG(i.R0b))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();class g{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=(0,r.q)().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let v=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),m=(()=>{class t extends v{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(y),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(y))}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.K0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();function y(t){(0,r.q)().remove(t)}const _={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},b=/%COMP%/g;function w(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?w(t,i,n):(i=i.replace(b,t),n.push(i))}return n}function T(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let C=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new I(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new E(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case i.ifc.ShadowDom:return new S(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=w(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(p),i.LFG(m),i.LFG(i.AFp))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();class I{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(_[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=_[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=_[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(i.JOm.DashCase|i.JOm.Important)?t.style.setProperty(e,n,r&i.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&i.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,T(n)):this.eventManager.addEventListener(t,e,T(n))}}class E extends I{constructor(t,e,n,r){super(t),this.component=n;const i=w(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(b,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(b,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class S extends I{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=w(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let k=(()=>{class t extends g{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.K0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const x=["alt","control","meta","shift"],A={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},N={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let P=(()=>{class t extends g{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const o=t.parseEventName(n),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,r.q)().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(x.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&O.hasOwnProperty(e)&&(e=O[e]))}return A[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),x.forEach(r=>{r!=n&&(0,N[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.K0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const R=(0,i.eFA)(i._c5,"browser",[{provide:i.Lbi,useValue:r.bD},{provide:i.g9A,useValue:function(){s.makeCurrent(),h.init()},multi:!0},{provide:r.K0,useFactory:function(){return(0,i.RDi)(document),document},deps:[]}]),D=[[],{provide:i.zSh,useValue:"root"},{provide:i.qLn,useFactory:function(){return new i.qLn},deps:[]},{provide:d,useClass:k,multi:!0,deps:[r.K0,i.R0b,i.Lbi]},{provide:d,useClass:P,multi:!0,deps:[r.K0]},[],{provide:C,useClass:C,deps:[p,m,i.AFp]},{provide:i.FYo,useExisting:C},{provide:v,useExisting:m},{provide:m,useClass:m,deps:[r.K0]},{provide:i.dDg,useClass:i.dDg,deps:[i.R0b]},{provide:p,useClass:p,deps:[d,i.R0b]},{provide:r.JF,useClass:f,deps:[]},[]];let M=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:i.AFp,useValue:e.appId},{provide:c,useExisting:i.AFp},l]}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(t,12))},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:D,imports:[r.ez,i.hGG]}),t})();"undefined"!=typeof window&&window;var L=n(4402),F=n(5917),U=n(9765),j=n(7971);class V extends U.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new j.N;return this._value}next(t){super.next(this._value=t)}}var q=n(4869),B=n(9796),H=n(7393);class G extends H.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class z extends H.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var K=n(7444),W=n(7574);function Y(t,e,n,r,i=new z(t,n,r)){if(!i.closed)return e instanceof W.y?e.subscribe(i):(0,K.s)(e)(i)}var Z=n(6693);const Q={};class ${constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new X(t,this.resultSelector))}}class X extends G{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Q),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Y(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Q?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const J=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var tt=n(3282);function et(...t){return(0,tt.J)(1)((0,F.of)(...t))}var nt=n(9193);function rt(t){return new W.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,L.D)(n):(0,nt.c)()).subscribe(e)})}var it=n(2441),ot=n(8002),st=n(5345);function at(t,e){return"function"==typeof e?n=>n.pipe(at((n,r)=>(0,L.D)(t(n,r)).pipe((0,ot.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ut(t))}class ut{constructor(t){this.project=t}call(t,e){return e.subscribe(new ct(t,this.project))}}class ct extends st.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new st.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,st.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const lt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function ht(t){return e=>0===t?(0,nt.c)():e.lift(new ft(t))}class ft{constructor(t){if(this.total=t,this.total<0)throw new lt}call(t,e){return e.subscribe(new dt(t,this.total))}}class dt extends H.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function pt(...t){const e=t[t.length-1];return(0,q.K)(e)?(t.pop(),n=>et(t,n,e)):e=>et(t,e)}function gt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new vt(t,e,n))}}class vt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new mt(t,this.accumulator,this.seed,this.hasSeed))}}class mt extends H.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function yt(t,e){return function(n){return n.lift(new _t(t,e))}}class _t{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new bt(t,this.predicate,this.thisArg))}}class bt extends H.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function wt(t){return function(e){const n=new Tt(t),r=e.lift(n);return n.caught=r}}class Tt{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ct(t,this.selector,this.caught))}}class Ct extends st.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new st.IY(this);this.add(r);const i=(0,st.ft)(n,r);i!==r&&this.add(i)}}}var It=n(9773);function Et(t,e){return(0,It.zg)(t,e,1)}function St(t){return function(e){return 0===t?(0,nt.c)():e.lift(new kt(t))}}class kt{constructor(t){if(this.total=t,this.total<0)throw new lt}call(t,e){return e.subscribe(new xt(t,this.total))}}class xt extends H.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function At(t=Pt){return e=>e.lift(new Ot(t))}class Ot{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Nt(t,this.errorFactory))}}class Nt extends H.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Cy){t=Cy}this.destination.error(t)}}}function Pt(){return new J}function Rt(t=null){return e=>e.lift(new Dt(t))}class Dt{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Mt(t,this.defaultValue))}}class Mt extends H.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Lt=n(4487);function Ft(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yt((e,n)=>t(e,n,r)):Lt.y,ht(1),n?Rt(e):At(()=>new J))}var Ut=n(3342),jt=n(1307),Vt=n(5319);class qt{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Bt(t,this.callback))}}class Bt extends H.L{constructor(t,e){super(t),this.add(new Vt.w(e))}}class Ht{constructor(t,e){this.id=t,this.url=e}}class Gt extends Ht{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zt extends Ht{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kt extends Ht{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wt extends Ht{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yt extends Ht{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zt extends Ht{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qt extends Ht{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $t extends Ht{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xt extends Ht{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jt{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class te{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ee{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ne{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class re{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ie{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oe{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const se="primary";class ae{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ue(t){return new ae(t)}function ce(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function le(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function he(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!fe(t[i],e[i]))return!1;return!0}function fe(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function de(t){return Array.prototype.concat.apply([],t)}function pe(t){return t.length>0?t[t.length-1]:null}function ge(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ve(t){return(0,i.CqO)(t)?t:(0,i.QGY)(t)?(0,L.D)(Promise.resolve(t)):(0,F.of)(t)}const me={exact:function t(e,n,r){if(!Se(e.segments,n.segments))return!1;if(!Te(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:be},ye={exact:function(t,e){return he(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>fe(t[n],e[n]))},ignored:()=>!0};function _e(t,e,n){return me[n.paths](t.root,e.root,n.matrixParams)&&ye[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function be(t,e,n){return we(t,e,e.segments,n)}function we(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!Se(i,n)&&!e.hasChildren()&&!!Te(i,n,r)}if(t.segments.length===n.length){if(!Se(t.segments,n))return!1;if(!Te(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!be(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!Se(t.segments,i)&&!!Te(t.segments,i,r)&&!!t.children.primary&&we(t.children.primary,e,o,r)}}function Te(t,e,n){return e.every((e,r)=>ye[n](t[r].parameters,e.parameters))}class Ce{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ue(this.queryParams)),this._queryParamMap}toString(){return Ae.serialize(this)}}class Ie{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ge(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oe(this)}}class Ee{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ue(this.parameters)),this._parameterMap}toString(){return Fe(this)}}function Se(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class ke{}class xe{parse(t){const e=new Be(t);return new Ce(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Ne(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Re(e)}=${Re(t)}`).join("&"):`${Re(e)}=${Re(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Ae=new xe;function Oe(t){return t.segments.map(t=>Fe(t)).join("/")}function Ne(t,e){if(!t.hasChildren())return Oe(t);if(e){const e=t.children.primary?Ne(t.children.primary,!1):"",n=[];return ge(t.children,(t,e)=>{e!==se&&n.push(`${e}:${Ne(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ge(t.children,(t,r)=>{r===se&&(n=n.concat(e(t,r)))}),ge(t.children,(t,r)=>{r!==se&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===se?[Ne(t.children.primary,!1)]:[`${n}:${Ne(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Oe(t)}/${e[0]}`:`${Oe(t)}/(${e.join("//")})`}}function Pe(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Re(t){return Pe(t).replace(/%3B/gi,";")}function De(t){return Pe(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Me(t){return decodeURIComponent(t)}function Le(t){return Me(t.replace(/\+/g,"%20"))}function Fe(t){return`${De(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${De(t)}=${De(e[t])}`).join("")}`;var e}const Ue=/^[^\/()?;=#]+/;function je(t){const e=t.match(Ue);return e?e[0]:""}const Ve=/^[^=?&#]+/,qe=/^[^?&#]+/;class Be{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ie(t,e)),n}parseSegment(){const t=je(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ee(Me(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=je(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=je(this.remaining);t&&(n=t,this.capture(n))}t[Me(e)]=Me(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ve);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(qe);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Le(e),i=Le(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=je(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=se);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ie([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class He{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ge(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ge(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ze(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return ze(t,this._root).map(t=>t.value)}}function Ge(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ge(t,n);if(e)return e}return null}function ze(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ze(t,n);if(r.length)return r.unshift(e),r}return[]}class Ke{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function We(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Ye extends He{constructor(t,e){super(t),this.snapshot=e,tn(this,t)}toString(){return this.snapshot.toString()}}function Ze(t,e){const n=function(t,e){const n=new Xe([],{},{},"",{},se,e,null,t.root,-1,{});return new Je("",new Ke(n,[]))}(t,e),r=new V([new Ee("",{})]),i=new V({}),o=new V({}),s=new V({}),a=new V(""),u=new Qe(r,i,s,a,o,se,e,n.root);return u.snapshot=n.root,new Ye(new Ke(u,[]),n)}class Qe{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(t=>ue(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(t=>ue(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $e(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Xe{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ue(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ue(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Je extends He{constructor(t,e){super(e),this.url=t,tn(this,e)}toString(){return en(this._root)}}function tn(t,e){e.value._routerState=t,e.children.forEach(e=>tn(t,e))}function en(t){const e=t.children.length>0?` { ${t.children.map(en).join(", ")} } `:"";return`${t.value}${e}`}function nn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,he(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),he(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!he(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),he(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function rn(t,e){return he(t.params,e.params)&&function(t,e){return Se(t,e)&&t.every((t,n)=>he(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||rn(t.parent,e.parent))}function on(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return on(t,e,r);return on(t,e)})}(t,e,n);return new Ke(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return sn(e,t),t}}const n=new Qe(new V((r=e.value).url),new V(r.params),new V(r.queryParams),new V(r.fragment),new V(r.data),r.outlet,r.component,r),i=e.children.map(e=>on(t,e));return new Ke(n,i)}var r}function sn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)sn(t.children[n],e.children[n])}function an(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function un(t){return"object"==typeof t&&null!=t&&t.outlets}function cn(t,e,n,r,i){let o={};return r&&ge(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Ce(n.root===t?e:ln(n.root,t,e),o,i)}function ln(t,e,n){const r={};return ge(t.children,(t,i)=>{r[i]=t===e?n:ln(t,e,n)}),new Ie(t.segments,r)}class hn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&an(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(un);if(r&&r!==pe(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function dn(t,e,n){if(t||(t=new Ie([],{})),0===t.segments.length&&t.hasChildren())return pn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(un(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!yn(a,u,e))return o;r+=2}else{if(!yn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ie(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ie(t.segments.slice(r.pathIndex),t.children),pn(e,0,i)}return r.match&&0===i.length?new Ie(t.segments,{}):r.match&&!t.hasChildren()?gn(t,e,n):r.match?pn(t,0,i):gn(t,e,n)}function pn(t,e,n){if(0===n.length)return new Ie(t.segments,{});{const r=function(t){return un(t[0])?t[0].outlets:{[se]:t}}(n),i={};return ge(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=dn(t.children[r],e,n))}),ge(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ie(t.segments,i)}}function gn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(un(o)){const t=vn(o.outlets);return new Ie(r,t)}if(0===i&&an(n[0])){r.push(new Ee(t.segments[e].path,mn(n[0]))),i++;continue}const s=un(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&an(a)?(r.push(new Ee(s,mn(a))),i+=2):(r.push(new Ee(s,{})),i++)}return new Ie(r,{})}function vn(t){const e={};return ge(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=gn(new Ie([],{}),0,t))}),e}function mn(t){const e={};return ge(t,(t,n)=>e[n]=`${t}`),e}function yn(t,e,n){return t==n.path&&he(e,n.parameters)}class _n{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),nn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=We(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ge(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=We(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=We(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new ie(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ne(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(nn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),bn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function bn(t){nn(t.value),t.children.forEach(bn)}class wn{constructor(t,e){this.routes=t,this.module=e}}function Tn(t){return"function"==typeof t}function Cn(t){return t instanceof Ce}const In=Symbol("INITIAL_VALUE");function En(){return at(t=>function(...t){let e,n;return(0,q.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,B.k)(t[0])&&(t=t[0]),(0,Z.n)(t,n).lift(new $(e))}(t.map(t=>t.pipe(ht(1),pt(In)))).pipe(gt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==In)return t;if(r===In&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Cn(r))return r}return t},t)},In),yt(t=>t!==In),(0,ot.U)(t=>Cn(t)?t:!0===t),ht(1)))}let Sn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i._UZ(0,"router-outlet")},directives:function(){return[Tr]},encapsulation:2}),t})();function kn(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];xn(r,An(e,r))}}function xn(t,e){t.children&&kn(t.children,e)}function An(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function On(t){const e=t.children&&t.children.map(On),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=Sn),n}function Nn(t){return t.outlet||se}function Pn(t,e){const n=t.filter(t=>Nn(t)===e);return n.push(...t.filter(t=>Nn(t)!==e)),n}const Rn={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Dn(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Rn):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||le)(n,t,e);if(!i)return Object.assign({},Rn);const o={};ge(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Mn(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Ln(t,e,n)&&Nn(n)!==se)}(t,n,r)){const i=new Ie(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Nn(o)!==se){const n=new Ie([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Nn(o)]=n}return i}(t,e,r,new Ie(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Ln(t,e,n))}(t,n,r)){const o=new Ie(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Ln(t,n,a)&&!i[Nn(a)]){const n=new Ie([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Nn(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ie(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Ln(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Fn(t,e,n,r){return!!(Nn(t)===r||r!==se&&Ln(e,n,t))&&("**"===t.path||Dn(e,t,n).matched)}function Un(t,e,n){return 0===e.length&&!t.children[n]}class jn{constructor(t){this.segmentGroup=t||null}}class Vn{constructor(t){this.urlTree=t}}function qn(t){return new W.y(e=>e.error(new jn(t)))}function Bn(t){return new W.y(e=>e.error(new Vn(t)))}function Hn(t){return new W.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Gn{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.h0i)}apply(){const t=Mn(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ie(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,se).pipe((0,ot.U)(t=>this.createUrlTree(zn(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wt(t=>{if(t instanceof Vn)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof jn)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,se).pipe((0,ot.U)(e=>this.createUrlTree(zn(e),t.queryParams,t.fragment))).pipe(wt(t=>{if(t instanceof jn)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ie([],{[se]:t}):t;return new Ce(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,ot.U)(t=>new Ie([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,L.D)(r).pipe(Et(r=>{const i=n.children[r],o=Pn(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,ot.U)(t=>({segment:t,outlet:r})))}),gt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yt((e,n)=>t(e,n,r)):Lt.y,St(1),n?Rt(e):At(()=>new J))}())}expandSegment(t,e,n,r,i,o){return(0,L.D)(n).pipe(Et(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(wt(t=>{if(t instanceof jn)return(0,F.of)(null);throw t}))),Ft(t=>!!t),wt((t,n)=>{if(t instanceof J||"EmptyError"===t.name){if(Un(e,r,i))return(0,F.of)(new Ie([],{}));throw new jn(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Fn(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):qn(e):qn(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Bn(i):this.lineralizeSegments(n,i).pipe((0,It.zg)(n=>{const i=new Ie(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Dn(e,r,i);if(!s)return qn(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Bn(l):this.lineralizeSegments(r,l).pipe((0,It.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,F.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,ot.U)(t=>(n._loadedConfig=t,new Ie(r,{})))):(0,F.of)(new Ie(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Dn(e,n,r);if(!o)return qn(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,It.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Mn(e,s,u,o),l=new Ie(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,ot.U)(t=>new Ie(s,t)));if(0===o.length&&0===c.length)return(0,F.of)(new Ie(s,{}));const h=Nn(n)===i;return this.expandSegment(r,l,o,c,h?se:i,!0).pipe((0,ot.U)(t=>new Ie(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,F.of)(new wn(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,F.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,It.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,ot.U)(t=>(e._loadedConfig=t,t))):function(t){return new W.y(e=>e.error(ce(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,F.of)(new wn([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,F.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Tn(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Tn(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return ve(o)});return(0,F.of)(i).pipe(En(),(0,Ut.b)(t=>{if(!Cn(t))return;const e=ce(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,ot.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,F.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Hn(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Ce(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ge(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ge(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ie(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function zn(t){const e={};for(const n of Object.keys(t.children)){const r=zn(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ie(t.segments.concat(e.segments),e.children)}return t}(new Ie(t.segments,e))}class Kn{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Wn{constructor(t,e){this.component=t,this.route=e}}function Yn(t,e,n){const r=t._root;return Qn(r,e?e._root:null,n,[r.value])}function Zn(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Qn(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=We(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Se(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Se(t.url,e.url)||!he(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rn(t,e)||!he(t.queryParams,e.queryParams);case"paramsChange":default:return!rn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Kn(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Qn(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Wn(a.outlet.component,s))}else s&&$n(e,a,i),i.canActivateChecks.push(new Kn(r)),Qn(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ge(o,(t,e)=>$n(t,n.getContext(e),i)),i}function $n(t,e,n){const r=We(t),i=t.value;ge(r,(t,r)=>{$n(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Wn(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Xn{}function Jn(t){return new W.y(e=>e.error(t))}class tr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Mn(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,se);if(null===e)return null;const n=new Xe([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},se,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ke(n,e),i=new Je(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=$e(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Pn(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=nr(n);return r.sort((t,e)=>t.value.outlet===se?-1:e.value.outlet===se?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Un(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Fn(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?pe(n).parameters:{};i=new Xe(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,or(t),Nn(t),t.component,t,rr(e),ir(e)+n.length,sr(t))}else{const r=Dn(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Xe(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,or(t),Nn(t),t.component,t,rr(e),ir(e)+o.length,sr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Mn(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Ke(i,t)]}if(0===a.length&&0===c.length)return[new Ke(i,[])];const l=Nn(t)===r,h=this.processSegment(a,u,c,l?se:r);return null===h?null:[new Ke(i,h)]}}function er(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function nr(t){const e=[],n=new Set;for(const r of t){if(!er(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=nr(r.children);e.push(new Ke(r.value,t))}return e.filter(t=>!n.has(t))}function rr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ir(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function or(t){return t.data||{}}function sr(t){return t.resolve||{}}function ar(t){return at(e=>{const n=t(e);return n?(0,L.D)(n).pipe((0,ot.U)(()=>e)):(0,F.of)(e)})}class ur extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const cr=new i.OlP("ROUTES");class lr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,ot.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new wn(de(r.injector.get(cr,void 0,i.XFs.Self|i.XFs.Optional)).map(On),r)}),wt(t=>{throw e._loader$=void 0,t}));return e._loader$=new it.c(n,()=>new U.xQ).pipe((0,jt.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,L.D)(this.loader.load(t)):ve(t()).pipe((0,It.zg)(t=>t instanceof i.YKP?(0,F.of)(t):(0,L.D)(this.compiler.compileModuleAsync(t))))}}class hr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fr,this.attachRef=null}}class fr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new hr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class dr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function pr(t){throw t}function gr(t,e,n){return e.parse("/")}function vr(t,e){return(0,F.of)(null)}const mr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _r=(()=>{class t{constructor(t,e,n,r,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new U.xQ,this.errorHandler=pr,this.malformedUriErrorHandler=gr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:vr,afterPreactivation:vr},this.urlHandlingStrategy=new dr,this.routeReuseStrategy=new ur,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(i.h0i),this.console=o.get(i.c2e);const c=o.get(i.R0b);this.isNgZoneEnabled=c instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Ce(new Ie([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new lr(s,a,t=>this.triggerEvent(new Jt(t)),t=>this.triggerEvent(new te(t))),this.routerState=Ze(this.currentUrlTree,this.rootComponentType),this.transitions=new V({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(yt(t=>0!==t.id),(0,ot.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),at(t=>{let n=!1,r=!1;return(0,F.of)(t).pipe((0,Ut.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),at(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,F.of)(t).pipe(at(t=>{const n=this.transitions.getValue();return e.next(new Gt(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?nt.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,at(t=>function(t,e,n,r,i){return new Gn(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,ot.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,Ut.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,It.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new tr(t,e,n,r,i,o).recognize();return null===s?Jn(new Xn):(0,F.of)(s)}catch(Cy){return Jn(Cy)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,ot.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ut.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Yt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Gt(n,this.serializeUrl(r),i,o);e.next(a);const u=Ze(r,this.rootComponentType).snapshot;return(0,F.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),nt.E}),ar(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Ut.b)(t=>{const e=new Zt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,ot.U)(t=>Object.assign(Object.assign({},t),{guards:Yn(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,It.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,F.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,L.D)(t).pipe((0,It.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,F.of)(!0);const s=o.map(o=>{const s=Zn(o,e,i);let a;if(function(t){return t&&Tn(t.canDeactivate)}(s))a=ve(s.canDeactivate(t,e,n,r));else{if(!Tn(s))throw new Error("Invalid CanDeactivate guard");a=ve(s(t,e,n,r))}return a.pipe(Ft())});return(0,F.of)(s).pipe(En())}(t.component,t.route,n,e,r)),Ft(t=>!0!==t,!0))}(s,r,i,t).pipe((0,It.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,L.D)(e).pipe(Et(e=>et(function(t,e){return null!==t&&e&&e(new ee(t)),(0,F.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new re(t)),(0,F.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>rt(()=>{const i=e.guards.map(i=>{const o=Zn(i,e.node,n);let s;if(function(t){return t&&Tn(t.canActivateChild)}(o))s=ve(o.canActivateChild(r,t));else{if(!Tn(o))throw new Error("Invalid CanActivateChild guard");s=ve(o(r,t))}return s.pipe(Ft())});return(0,F.of)(i).pipe(En())}));return(0,F.of)(i).pipe(En())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,F.of)(!0);const i=r.map(r=>rt(()=>{const i=Zn(r,e,n);let o;if(function(t){return t&&Tn(t.canActivate)}(i))o=ve(i.canActivate(e,t));else{if(!Tn(i))throw new Error("Invalid CanActivate guard");o=ve(i(e,t))}return o.pipe(Ft())}));return(0,F.of)(i).pipe(En())}(t,e.route,n))),Ft(t=>!0!==t,!0))}(r,o,t,e):(0,F.of)(n)),(0,ot.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,Ut.b)(t=>{if(Cn(t.guardsResult)){const e=ce(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Qt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),yt(t=>!!t.guardsResult||(this.cancelNavigationTransitionRestoreHistory(t,""),!1)),ar(t=>{if(t.guards.canActivateChecks.length)return(0,F.of)(t).pipe((0,Ut.b)(t=>{const e=new $t(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),at(t=>{let e=!1;return(0,F.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,It.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,F.of)(t);let o=0;return(0,L.D)(i).pipe(Et(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,F.of)({});const o={};return(0,L.D)(i).pipe((0,It.zg)(i=>function(t,e,n,r){const i=Zn(t,e,r);return ve(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,Ut.b)(t=>{o[i]=t}))),St(1),(0,It.zg)(()=>Object.keys(o).length===i.length?(0,F.of)(o):nt.E))}(t._resolve,t,e,r).pipe((0,ot.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),$e(t,n).resolve),null)))}(t.route,e,n,r)),(0,Ut.b)(()=>o++),St(1),(0,It.zg)(e=>o===i.length?(0,F.of)(t):nt.E))})),(0,Ut.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransitionRestoreHistory(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,Ut.b)(t=>{const e=new Xt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),ar(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,ot.U)(t=>{const e=function(t,e,n){const r=on(t,e._root,n?n._root:void 0);return new Ye(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,Ut.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,ot.U)(t=>(new _n(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),(0,Ut.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?this.cancelNavigationTransitionRestoreHistory(t,e):this.cancelNavigationTransition(t,e)}this.currentNavigation=null},t=>t.lift(new qt(i))),wt(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Cn(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Kt(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Wt(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(qc){t.reject(qc)}}var i;return nt.E}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){kn(t),this.config=t.map(On),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return cn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new hn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ge(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new hn(n,e,r)}(n);if(o.toRoot())return cn(e.root,new Ie([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new fn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new fn(t,t===e.root,0)}const r=an(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new fn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?pn(s.segmentGroup,s.index,o.commands):dn(s.segmentGroup,s.index,o.commands);return cn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Cn(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Cy){e=this.malformedUriErrorHandler(Cy,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},mr):!1===e?Object.assign({},yr):e,Cn(t))return _e(this.currentUrlTree,t,n);const r=this.parseUrl(t);return _e(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new zt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){var o,s;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==e&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&c)return Promise.resolve(!0);let l,h,f;i?(l=i.resolve,h=i.reject,f=i.promise):f=new Promise((t,e)=>{l=t,h=e});const d=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(s=this.browserPageId)&&void 0!==s?s:0)+1):p=0,this.setTransition({id:d,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:h,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransitionRestoreHistory(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree(),this.cancelNavigationTransition(t,e)}cancelNavigationTransition(t,e){const n=new Kt(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.DyG),i.LFG(ke),i.LFG(fr),i.LFG(r.Ye),i.LFG(i.zs3),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(void 0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),br=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new U.xQ,this.subscription=t.events.subscribe(t=>{t instanceof zt&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:wr(this.skipLocationChange),replaceUrl:wr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:wr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(_r),i.Y36(Qe),i.Y36(r.S$))},t.\u0275dir=i.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&i.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(i.Ikx("href",e.href,i.LSH),i.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),t})();function wr(t){return""===t||!!t}let Tr=(()=>{class t{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.name=r||se,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Cr(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(fr),i.Y36(i.s_b),i.Y36(i._Vd),i.$8M("name"),i.Y36(i.sBO))},t.\u0275dir=i.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Cr{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Qe?this.route:t===fr?this.childContexts:this.parent.get(t,e)}}class Ir{}class Er{preload(t,e){return e().pipe(wt(()=>(0,F.of)(null)))}}class Sr{preload(t,e){return(0,F.of)(null)}}let kr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new lr(e,n,e=>t.triggerEvent(new Jt(e)),e=>t.triggerEvent(new te(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(yt(t=>t instanceof zt),Et(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,L.D)(n).pipe((0,tt.J)(),(0,ot.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,F.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,It.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(_r),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(i.zs3),i.LFG(Ir))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),xr=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zt&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof oe&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new oe(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(_r),i.LFG(r.EM),i.LFG(void 0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const Ar=new i.OlP("ROUTER_CONFIGURATION"),Or=new i.OlP("ROUTER_FORROOT_GUARD"),Nr=[r.Ye,{provide:ke,useClass:xe},{provide:_r,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new _r(null,t,e,n,r,i,o,de(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[ke,fr,r.Ye,i.zs3,i.v3s,i.Sil,cr,Ar,[class{},new i.FiY],[class{},new i.FiY]]},fr,{provide:Qe,useFactory:function(t){return t.routerState.root},deps:[_r]},{provide:i.v3s,useClass:i.EAV},kr,Sr,Er,{provide:Ar,useValue:{enableTracing:!1}}];function Pr(){return new i.PXZ("Router",_r)}let Rr=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Nr,Fr(e),{provide:Or,useFactory:Lr,deps:[[_r,new i.FiY,new i.tp0]]},{provide:Ar,useValue:n||{}},{provide:r.S$,useFactory:Mr,deps:[r.lw,[new i.tBr(r.mr),new i.FiY],Ar]},{provide:xr,useFactory:Dr,deps:[_r,r.EM,Ar]},{provide:Ir,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Sr},{provide:i.PXZ,multi:!0,useFactory:Pr},[Ur,{provide:i.ip1,multi:!0,useFactory:jr,deps:[Ur]},{provide:qr,useFactory:Vr,deps:[Ur]},{provide:i.tb,multi:!0,useExisting:qr}]]}}static forChild(e){return{ngModule:t,providers:[Fr(e)]}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(Or,8),i.LFG(_r,8))},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({}),t})();function Dr(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new xr(t,e,n)}function Mr(t,e,n={}){return n.useHash?new r.Do(t,e):new r.b0(t,e)}function Lr(t){return"guarded"}function Fr(t){return[{provide:i.deG,multi:!0,useValue:t},{provide:cr,multi:!0,useValue:t}]}let Ur=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new U.xQ}appInitializer(){return this.injector.get(r.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(_r),r=this.injector.get(Ar);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,F.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Ar),n=this.injector.get(kr),r=this.injector.get(xr),o=this.injector.get(_r),s=this.injector.get(i.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.zs3))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();function jr(t){return t.appInitializer.bind(t)}function Vr(t){return t.bootstrapListener.bind(t)}const qr=new i.OlP("Router Initializer");var Br=n(3637);function Hr(){return t=>t.lift(new Gr)}class Gr{call(t,e){return e.subscribe(new zr(t))}}class zr extends H.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Kr(t,e){return n=>n.lift(new Wr(t,e))}class Wr{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Yr(t,this.compare,this.keySelector))}}class Yr extends H.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Zr=n(309),Qr=n(57),$r=n(2329),Xr=n(9759),Jr=n(4762),ti=n(4685),ei=n(300),ni=function(t,e){return(ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ri(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ii,oi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},si=si||{},ai=oi||self;function ui(){}function ci(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function li(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var hi="closure_uid_"+(1e9*Math.random()>>>0),fi=0;function di(t,e,n){return t.call.apply(t.bind,arguments)}function pi(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function gi(t,e,n){return(gi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?di:pi).apply(null,arguments)}function vi(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function mi(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function yi(){this.s=this.s,this.o=this.o}var _i={};yi.prototype.s=!1,yi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,hi)&&t[hi]||(t[hi]=++fi)}(this);delete _i[t]}},yi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bi=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},wi=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ti(t){return Array.prototype.concat.apply([],arguments)}function Ci(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ii(t){return/^[\s\xa0]*$/.test(t)}var Ei,Si=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ki(t,e){return-1!=t.indexOf(e)}function xi(t,e){return t<e?-1:t>e?1:0}t:{var Ai=ai.navigator;if(Ai){var Oi=Ai.userAgent;if(Oi){Ei=Oi;break t}}Ei=""}function Ni(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Pi(t){var e={};for(var n in t)e[n]=t[n];return e}var Ri="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Di(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ri.length;o++)n=Ri[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Mi(t){return Mi[" "](t),t}Mi[" "]=ui;var Li,Fi,Ui=ki(Ei,"Opera"),ji=ki(Ei,"Trident")||ki(Ei,"MSIE"),Vi=ki(Ei,"Edge"),qi=Vi||ji,Bi=ki(Ei,"Gecko")&&!(ki(Ei.toLowerCase(),"webkit")&&!ki(Ei,"Edge"))&&!(ki(Ei,"Trident")||ki(Ei,"MSIE"))&&!ki(Ei,"Edge"),Hi=ki(Ei.toLowerCase(),"webkit")&&!ki(Ei,"Edge");function Gi(){var t=ai.document;return t?t.documentMode:void 0}t:{var zi="",Ki=(Fi=Ei,Bi?/rv:([^\);]+)(\)|;)/.exec(Fi):Vi?/Edge\/([\d\.]+)/.exec(Fi):ji?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Fi):Hi?/WebKit\/(\S+)/.exec(Fi):Ui?/(?:Version)[ \/]?(\S+)/.exec(Fi):void 0);if(Ki&&(zi=Ki?Ki[1]:""),ji){var Wi=Gi();if(null!=Wi&&Wi>parseFloat(zi)){Li=String(Wi);break t}}Li=zi}var Yi={};var Zi=ai.document&&ji&&(Gi()||parseInt(Li,10))||void 0,Qi=function(){if(!ai.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ai.addEventListener("test",ui,e),ai.removeEventListener("test",ui,e)}catch(n){}return t}();function $i(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Xi(t,e){if($i.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Bi){t:{try{Mi(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ji[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Xi.Z.h.call(this)}}$i.prototype.h=function(){this.defaultPrevented=!0},mi(Xi,$i);var Ji={2:"touch",3:"pen",4:"mouse"};Xi.prototype.h=function(){Xi.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var to="closure_listenable_"+(1e6*Math.random()|0),eo=0;function no(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++eo,this.ca=this.fa=!1}function ro(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function io(t){this.src=t,this.g={},this.h=0}function oo(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=bi(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ro(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function so(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}io.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=so(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new no(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var ao="closure_lm_"+(1e6*Math.random()|0),uo={};function co(t,e,n,r,i){if(r&&r.once)return ho(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)co(t,e[o],n,r,i);return null}return n=_o(n),t&&t[to]?t.N(e,n,li(r)?!!r.capture:!!r,i):lo(t,e,n,!1,r,i)}function lo(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=li(i)?!!i.capture:!!i,a=mo(t);if(a||(t[ao]=a=new io(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=vo;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qi||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(go(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ho(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ho(t,e[o],n,r,i);return null}return n=_o(n),t&&t[to]?t.O(e,n,li(r)?!!r.capture:!!r,i):lo(t,e,n,!0,r,i)}function fo(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fo(t,e[o],n,r,i);else r=li(r)?!!r.capture:!!r,n=_o(n),t&&t[to]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=so(o=t.g[e],n,r,i))&&(ro(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=mo(t))&&(e=t.g[e.toString()],t=-1,e&&(t=so(e,n,r,i)),(n=-1<t?e[t]:null)&&po(n))}function po(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[to])oo(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(go(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mo(e))?(oo(n,t),0==n.h&&(n.src=null,e[ao]=null)):ro(t)}}}function go(t){return t in uo?uo[t]:uo[t]="on"+t}function vo(t,e){if(t.ca)t=!0;else{e=new Xi(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&po(t),t=n.call(r,e)}return t}function mo(t){return(t=t[ao])instanceof io?t:null}var yo="__closure_events_fn_"+(1e9*Math.random()>>>0);function _o(t){return"function"==typeof t?t:(t[yo]||(t[yo]=function(e){return t.handleEvent(e)}),t[yo])}function bo(){yi.call(this),this.i=new io(this),this.P=this,this.I=null}function wo(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new $i(e,t);else if(e instanceof $i)e.target=e.target||t;else{var i=e;Di(e=new $i(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=To(s,r,!0,e)&&i}if(i=To(s=e.g=t,r,!0,e)&&i,i=To(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=To(s=e.g=n[o],r,!1,e)&&i}function To(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&oo(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}mi(bo,yi),bo.prototype[to]=!0,bo.prototype.removeEventListener=function(t,e,n,r){fo(this,t,e,n,r)},bo.prototype.M=function(){if(bo.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ro(n[r]);delete e.g[t],e.h--}}this.I=null},bo.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},bo.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Co=ai.JSON.stringify;function Io(){var t=Po,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Eo,So=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=ko.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),ko=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new xo},function(t){return t.reset()}),xo=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ao(t){ai.setTimeout(function(){throw t},0)}function Oo(t,e){Eo||function(){var t=ai.Promise.resolve(void 0);Eo=function(){t.then(Ro)}}(),No||(Eo(),No=!0),Po.add(t,e)}var No=!1,Po=new So;function Ro(){for(var t;t=Io();){try{t.h.call(t.g)}catch(n){Ao(n)}var e=ko;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}No=!1}function Do(t,e){bo.call(this),this.h=t||1,this.g=e||ai,this.j=gi(this.kb,this),this.l=Date.now()}function Mo(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Lo(t,e,n){if("function"==typeof t)n&&(t=gi(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=gi(t.handleEvent,t)}return 2147483647<Number(e)?-1:ai.setTimeout(t,e||0)}function Fo(t){t.g=Lo(function(){t.g=null,t.i&&(t.i=!1,Fo(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}mi(Do,bo),(ii=Do.prototype).da=!1,ii.S=null,ii.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wo(this,"tick"),this.da&&(Mo(this),this.start()))}},ii.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ii.M=function(){Do.Z.M.call(this),Mo(this),delete this.g};var Uo=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ni(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Fo(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(ai.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(yi);function jo(t){yi.call(this),this.h=t,this.g={}}mi(jo,yi);var Vo=[];function qo(t,e,n,r){Array.isArray(n)||(n&&(Vo[0]=n.toString()),n=Vo);for(var i=0;i<n.length;i++){var o=co(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Bo(t){Ni(t.g,function(t,e){this.g.hasOwnProperty(e)&&po(t)},t),t.g={}}function Ho(){this.g=!0}function Go(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Co(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}jo.prototype.M=function(){jo.Z.M.call(this),Bo(this)},jo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ho.prototype.Aa=function(){this.g=!1},Ho.prototype.info=function(){};var zo={},Ko=null;function Wo(){return Ko=Ko||new bo}function Yo(t){$i.call(this,zo.Ma,t)}function Zo(t){var e=Wo();wo(e,new Yo(e,t))}function Qo(t,e){$i.call(this,zo.STAT_EVENT,t),this.stat=e}function $o(t){var e=Wo();wo(e,new Qo(e,t))}function Xo(t,e){$i.call(this,zo.Na,t),this.size=e}function Jo(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ai.setTimeout(function(){t()},e)}zo.Ma="serverreachability",mi(Yo,$i),zo.STAT_EVENT="statevent",mi(Qo,$i),zo.Na="timingevent",mi(Xo,$i);var ts={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},es={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ns(){}function rs(){}ns.prototype.h=null;var is,os={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ss(){$i.call(this,"d")}function as(){$i.call(this,"c")}function us(){}function cs(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new jo(this),this.P=hs,this.W=new Do(t=qi?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ls}function ls(){this.i=null,this.g="",this.h=!1}mi(ss,$i),mi(as,$i),mi(us,ns),us.prototype.g=function(){return new XMLHttpRequest},us.prototype.i=function(){return{}},is=new us;var hs=45e3,fs={},ds={};function ps(t,e,n){t.K=1,t.v=Fs(Ns(e)),t.s=n,t.U=!0,gs(t,null)}function gs(t,e){t.F=Date.now(),_s(t),t.A=Ns(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Qs(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ls,t.g=$a(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Uo(gi(t.Ia,t,t.g),t.O)),qo(t.V,t.g,"readystatechange",t.gb),e=t.H?Pi(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Zo(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function vs(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function ms(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=ys(t,n))==ds){4==e&&(t.o=4,$o(14),i=!1),Go(t.j,t.m,null,"[Incomplete Response]");break}if(r==fs){t.o=4,$o(15),Go(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Go(t.j,t.m,r,null),Is(t,r)}vs(t)&&r!=ds&&r!=fs&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,$o(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ha(e),e.L=!0,$o(11))):(Go(t.j,t.m,n,"[Invalid Chunked Response]"),Cs(t),Ts(t))}function ys(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ds:(n=Number(e.substring(n,r)),isNaN(n)?fs:(r+=1)+n>e.length?ds:(e=e.substr(r,n),t.C=r+n,e))}function _s(t){t.Y=Date.now()+t.P,bs(t,t.P)}function bs(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Jo(gi(t.eb,t),e)}function ws(t){t.B&&(ai.clearTimeout(t.B),t.B=null)}function Ts(t){0==t.l.G||t.I||Ka(t.l,t)}function Cs(t){ws(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Mo(t.W),Bo(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Is(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ra(n.i,t)))if(n.I=t.N,!t.J&&ra(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;za(n),Da(n)}Ba(n),$o(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Jo(gi(n.ab,n),6e3));if(1>=na(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Ya(n,11)}else if((t.J||n.g==t)&&za(n),!Ii(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ki(l,"spdy")||ki(l,"quic")||ki(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(ia(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ls(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=Qa(r,r.H?r.la:null,r.W),d.J){oa(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(ws(p),_s(p)),r.g=d}else qa(r);0<n.l.length&&Fa(n)}else"stop"!=o[0]&&"close"!=o[0]||Ya(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Ya(n,7):Ra(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Zo(4)}catch(o){}}function Es(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ci(t)||"string"==typeof t)wi(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ci(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(ci(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ss(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ss)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ks(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];xs(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)xs(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function xs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ii=cs.prototype).setTimeout=function(t){this.P=t},ii.gb=function(t){t=t.target;var e=this.L;e&&3==xa(t)?e.l():this.Ia(t)},ii.Ia=function(t){try{if(t==this.g)t:{var e=xa(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||qi||this.g&&(this.h.h||this.g.ga()||Aa(this.g)))){this.I||4!=e||7==n||Zo(8==n||0>=r?3:2),ws(this);var i=this.g.ba();this.N=i;e:if(vs(this)){var o=Aa(this.g);t="";var s=o.length,a=4==xa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Cs(this),Ts(this);var u="";break e}this.h.i=new ai.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ii(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,$o(12),Cs(this),Ts(this);break t}Go(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Is(this,i)}this.U?(ms(this,e,u),qi&&this.i&&3==e&&(qo(this.V,this.W,"tick",this.fb),this.W.start())):(Go(this.j,this.m,u,null),Is(this,u)),4==e&&Cs(this),this.i&&!this.I&&(4==e?Ka(this.l,this):(this.i=!1,_s(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,$o(12)):(this.o=0,$o(13)),Cs(this),Ts(this)}}}catch(e){}},ii.fb=function(){if(this.g){var t=xa(this.g),e=this.g.ga();this.C<e.length&&(ws(this),ms(this,t,e),this.i&&4!=t&&_s(this))}},ii.cancel=function(){this.I=!0,Cs(this)},ii.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zo(3),$o(17)),Cs(this),this.o=2,Ts(this)):bs(this,this.Y-t)},(ii=Ss.prototype).R=function(){ks(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},ii.T=function(){return ks(this),this.g.concat()},ii.get=function(t,e){return xs(this.h,t)?this.h[t]:e},ii.set=function(t,e){xs(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},ii.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var As=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Os(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Os){this.g=void 0!==e?e:t.g,Ps(this,t.j),this.s=t.s,Rs(this,t.i),Ds(this,t.m),this.l=t.l,e=t.h;var n=new Ks;n.i=e.i,e.g&&(n.g=new Ss(e.g),n.h=e.h),Ms(this,n),this.o=t.o}else t&&(n=String(t).match(As))?(this.g=!!e,Ps(this,n[1]||"",!0),this.s=Us(n[2]||""),Rs(this,n[3]||"",!0),Ds(this,n[4]),this.l=Us(n[5]||"",!0),Ms(this,n[6]||"",!0),this.o=Us(n[7]||"")):(this.g=!!e,this.h=new Ks(null,this.g))}function Ns(t){return new Os(t)}function Ps(t,e,n){t.j=n?Us(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Rs(t,e,n){t.i=n?Us(e,!0):e}function Ds(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ms(t,e,n){e instanceof Ks?(t.h=e,function(t,e){e&&!t.j&&(Ws(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ys(this,e),Qs(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=js(e,Gs)),t.h=new Ks(e,t.g))}function Ls(t,e,n){t.h.set(e,n)}function Fs(t){return Ls(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Us(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function js(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Vs),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vs(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Os.prototype.toString=function(){var t=[],e=this.j;e&&t.push(js(e,qs,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(js(e,qs,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(js(n,"/"==n.charAt(0)?Hs:Bs,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",js(n,zs)),t.join("")};var qs=/[#\/\?@]/g,Bs=/[#\?:]/g,Hs=/[#\?]/g,Gs=/[#\?@]/g,zs=/#/g;function Ks(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ws(t){t.g||(t.g=new Ss,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ys(t,e){Ws(t),e=$s(t,e),xs(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,xs((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&ks(t)))}function Zs(t,e){return Ws(t),e=$s(t,e),xs(t.g.h,e)}function Qs(t,e,n){Ys(t,e),0<n.length&&(t.i=null,t.g.set($s(t,e),Ci(n)),t.h+=n.length)}function $s(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(ii=Ks.prototype).add=function(t,e){Ws(this),this.i=null,t=$s(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ii.forEach=function(t,e){Ws(this),this.g.forEach(function(n,r){wi(n,function(n){t.call(e,n,r,this)},this)},this)},ii.T=function(){Ws(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ii.R=function(t){Ws(this);var e=[];if("string"==typeof t)Zs(this,t)&&(e=Ti(e,this.g.get($s(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Ti(e,t[n])}return e},ii.set=function(t,e){return Ws(this),this.i=null,Zs(this,t=$s(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ii.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},ii.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Xs=function(t,e){this.h=t,this.g=e};function Js(t){this.l=t||ta,t=ai.PerformanceNavigationTiming?0<(t=ai.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ai.g&&ai.g.Ea&&ai.g.Ea()&&ai.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ta=10;function ea(t){return!!t.h||!!t.g&&t.g.size>=t.j}function na(t){return t.h?1:t.g?t.g.size:0}function ra(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ia(t,e){t.g?t.g.add(e):t.h=e}function oa(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function sa(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=ri(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ci(t.i)}function aa(){}function ua(){this.g=new aa}function ca(t,e,n){var r=n||"";try{Es(t,function(t,n){var i=t;li(t)&&(i=Co(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Cy){throw e.push(r+"type="+encodeURIComponent("_badmap")),Cy}}function la(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function ha(t){this.l=t.$b||null,this.j=t.ib||!1}function fa(t,e){bo.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Js.prototype.cancel=function(){var t,e;if(this.i=sa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=ri(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},aa.prototype.stringify=function(t){return ai.JSON.stringify(t,void 0)},aa.prototype.parse=function(t){return ai.JSON.parse(t,void 0)},mi(ha,ns),ha.prototype.g=function(){return new fa(this.l,this.j)},ha.prototype.i=function(t){return function(){return t}}({}),mi(fa,bo);var da=0;function pa(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function ga(t){t.readyState=4,t.l=null,t.j=null,t.A=null,va(t)}function va(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ii=fa.prototype).open=function(t,e){if(this.readyState!=da)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,va(this)},ii.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ai).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ii.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ga(this)),this.readyState=da},ii.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,va(this)),this.g&&(this.readyState=3,va(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ai.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pa(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},ii.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ga(this):va(this),3==this.readyState&&pa(this)}},ii.Ua=function(t){this.g&&(this.response=this.responseText=t,ga(this))},ii.Ta=function(t){this.g&&(this.response=t,ga(this))},ii.ha=function(){this.g&&ga(this)},ii.setRequestHeader=function(t,e){this.v.append(t,e)},ii.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ii.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ma=ai.JSON.parse;function ya(t){bo.call(this),this.headers=new Ss,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_a,this.K=this.L=!1}mi(ya,bo);var _a="",ba=/^https?$/i,wa=["POST","PUT"];function Ta(t){return"content-type"==t.toLowerCase()}function Ca(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ia(t),Sa(t)}function Ia(t){t.D||(t.D=!0,wo(t,"complete"),wo(t,"error"))}function Ea(t){if(t.h&&void 0!==si&&(!t.C[1]||4!=xa(t)||2!=t.ba()))if(t.v&&4==xa(t))Lo(t.Fa,0,t);else if(wo(t,"readystatechange"),4==xa(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(As)[1]||null;if(!o&&ai.self&&ai.self.location){var s=ai.self.location.protocol;o=s.substr(0,s.length-1)}i=!ba.test(o?o.toLowerCase():"")}e=i}if(e)wo(t,"complete"),wo(t,"success");else{t.m=6;try{var a=2<xa(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Ia(t)}}finally{Sa(t)}}}function Sa(t,e){if(t.g){ka(t);var n=t.g,r=t.C[0]?ui:null;t.g=null,t.C=null,e||wo(t,"ready");try{n.onreadystatechange=r}catch(Cy){}}}function ka(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ai.clearTimeout(t.A),t.A=null)}function xa(t){return t.g?t.g.readyState:0}function Aa(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case _a:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Oa(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ni(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ls(t,e,n))}function Na(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Pa(t){this.za=0,this.l=[],this.h=new Ho,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Na("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Na("baseRetryDelayMs",5e3,t),this.$a=Na("retryDelaySeedMs",1e4,t),this.Ya=Na("forwardChannelMaxRetries",2,t),this.ra=Na("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Js(t&&t.concurrentRequestLimit),this.Ca=new ua,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Ra(t){if(Ma(t),3==t.G){var e=t.V++,n=Ns(t.F);Ls(n,"SID",t.J),Ls(n,"RID",e),Ls(n,"TYPE","terminate"),ja(t,n),(e=new cs(t,t.h,e,void 0)).K=2,e.v=Fs(Ns(n)),n=!1,ai.navigator&&ai.navigator.sendBeacon&&(n=ai.navigator.sendBeacon(e.v.toString(),"")),!n&&ai.Image&&((new Image).src=e.v,n=!0),n||(e.g=$a(e.l,null),e.g.ea(e.v)),e.F=Date.now(),_s(e)}Za(t)}function Da(t){t.g&&(Ha(t),t.g.cancel(),t.g=null)}function Ma(t){Da(t),t.u&&(ai.clearTimeout(t.u),t.u=null),za(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ai.clearTimeout(t.m),t.m=null)}function La(t,e){t.l.push(new Xs(t.Za++,e)),3==t.G&&Fa(t)}function Fa(t){ea(t.i)||t.m||(t.m=!0,Oo(t.Ha,t),t.C=0)}function Ua(t,e){var n;n=e?e.m:t.V++;var r=Ns(t.F);Ls(r,"SID",t.J),Ls(r,"RID",n),Ls(r,"AID",t.U),ja(t,r),t.o&&t.s&&Oa(r,t.o,t.s),n=new cs(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Va(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),ia(t.i,n),ps(n,r,e)}function ja(t,e){t.j&&Es({},function(t,n){Ls(e,n,t)})}function Va(t,e,n){n=Math.min(t.l.length,n);var r=t.j?gi(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{ca(l,s,"req"+c+"_")}catch(Nu){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function qa(t){t.g||t.u||(t.Y=1,Oo(t.Ga,t),t.A=0)}function Ba(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Jo(gi(t.Ga,t),Wa(t,t.A)),t.A++,0))}function Ha(t){null!=t.B&&(ai.clearTimeout(t.B),t.B=null)}function Ga(t){t.g=new cs(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ns(t.oa);Ls(e,"RID","rpc"),Ls(e,"SID",t.J),Ls(e,"CI",t.N?"0":"1"),Ls(e,"AID",t.U),ja(t,e),Ls(e,"TYPE","xmlhttp"),t.o&&t.s&&Oa(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Fs(Ns(e)),n.s=null,n.U=!0,gs(n,t)}function za(t){null!=t.v&&(ai.clearTimeout(t.v),t.v=null)}function Ka(t,e){var n=null;if(t.g==e){za(t),Ha(t),t.g=null;var r=2}else{if(!ra(t.i,e))return;n=e.D,oa(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;wo(r=Wo(),new Xo(r,n,e,i)),Fa(t)}else qa(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(na(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Jo(gi(t.Ha,t,e),Wa(t,t.C)),t.C++,0)))}(t,e)||2==r&&Ba(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ya(t,5);break;case 4:Ya(t,10);break;case 3:Ya(t,6);break;default:Ya(t,2)}}function Wa(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ya(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=gi(t.jb,t);n||(n=new Os("//www.google.com/images/cleardot.gif"),ai.location&&"http"==ai.location.protocol||Ps(n,"https"),Fs(n)),function(t,e){var n=new Ho;if(ai.Image){var r=new Image;r.onload=vi(la,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vi(la,n,r,"TestLoadImage: error",!1,e),r.onabort=vi(la,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vi(la,n,r,"TestLoadImage: timeout",!1,e),ai.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else $o(2);t.G=0,t.j&&t.j.va(e),Za(t),Ma(t)}function Za(t){t.G=0,t.I=-1,t.j&&(0==sa(t.i).length&&0==t.l.length||(t.i.i.length=0,Ci(t.l),t.l.length=0),t.j.ua())}function Qa(t,e,n){var r=function(t){return t instanceof Os?Ns(t):new Os(t,void 0)}(n);if(""!=r.i)e&&Rs(r,e+"."+r.i),Ds(r,r.m);else{var i=ai.location;r=function(t,e,n,r){var i=new Os(null,void 0);return t&&Ps(i,t),e&&Rs(i,e),n&&Ds(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ni(t.aa,function(t,e){Ls(r,e,t)}),n=t.sa,(e=t.D)&&n&&Ls(r,e,n),Ls(r,"VER",t.ma),ja(t,r),r}function $a(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ya(n&&t.Ba&&!t.qa?new ha({ib:!0}):t.qa)).L=t.H,e}function Xa(){}function Ja(){if(ji&&!(10<=Number(Zi)))throw Error("Environmental error: no available transport.")}function tu(t,e){bo.call(this),this.g=new Pa(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ii(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ii(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ru(this)}function eu(t){ss.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function nu(){as.call(this),this.status=1}function ru(t){this.g=t}(ii=ya.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():is.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:is),this.g.onreadystatechange=gi(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Ca(this,o)}t=n||"";var i=new Ss(this.headers);r&&Es(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Ta,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=ai.FormData&&t instanceof ai.FormData,!(0<=bi(wa,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ka(this),0<this.B&&((this.K=function(t){return ji&&function(){return t=Yi,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=Si(String(Li)).split("."),n=Si("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=xi(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||xi(0==o[2].length,0==s[2].length)||xi(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gi(this.pa,this)):this.A=Lo(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Ca(this,o)}},ii.pa=function(){void 0!==si&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wo(this,"timeout"),this.abort(8))},ii.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,wo(this,"complete"),wo(this,"abort"),Sa(this))},ii.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sa(this,!0)),ya.Z.M.call(this)},ii.Fa=function(){this.s||(this.F||this.v||this.l?Ea(this):this.cb())},ii.cb=function(){Ea(this)},ii.ba=function(){try{return 2<xa(this)?this.g.status:-1}catch(Fi){return-1}},ii.ga=function(){try{return this.g?this.g.responseText:""}catch(Fi){return""}},ii.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ma(e)}},ii.Da=function(){return this.m},ii.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ii=Pa.prototype).ma=8,ii.G=1,ii.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},ii.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new cs(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Di(n=Pi(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Va(this,e,r),Ls(i=Ns(this.F),"RID",t),Ls(i,"CVER",22),this.D&&Ls(i,"X-HTTP-Session-Id",this.D),ja(this,i),this.o&&n&&Oa(i,this.o,n),ia(this.i,e),this.Ra&&Ls(i,"TYPE","init"),this.ja?(Ls(i,"$req",r),Ls(i,"SID","null"),e.$=!0,ps(e,i,null)):ps(e,i,r),this.G=2}}else 3==this.G&&(t?Ua(this,t):0==this.l.length||ea(this.i)||Ua(this))},ii.Ga=function(){if(this.u=null,Ga(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Jo(gi(this.bb,this),t)}},ii.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,$o(10),Da(this),Ga(this))},ii.ab=function(){null!=this.v&&(this.v=null,Da(this),Ba(this),$o(19))},ii.jb=function(t){t?(this.h.info("Successfully pinged google.com"),$o(2)):(this.h.info("Failed to ping google.com"),$o(1))},(ii=Xa.prototype).xa=function(){},ii.wa=function(){},ii.va=function(){},ii.ua=function(){},ii.Oa=function(){},Ja.prototype.g=function(t,e){return new tu(t,e)},mi(tu,bo),tu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Oo(gi(t.hb,t,e))),$o(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Qa(t,null,t.W),Fa(t)},tu.prototype.close=function(){Ra(this.g)},tu.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,La(this.g,e)}else this.v?((e={}).__data__=Co(t),La(this.g,e)):La(this.g,t)},tu.prototype.M=function(){this.g.j=null,delete this.j,Ra(this.g),delete this.g,tu.Z.M.call(this)},mi(eu,ss),mi(nu,as),mi(ru,Xa),ru.prototype.xa=function(){wo(this.g,"a")},ru.prototype.wa=function(t){wo(this.g,new eu(t))},ru.prototype.va=function(t){wo(this.g,new nu(t))},ru.prototype.ua=function(){wo(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,tu.prototype.send=tu.prototype.u,tu.prototype.open=tu.prototype.m,tu.prototype.close=tu.prototype.close,ts.NO_ERROR=0,ts.TIMEOUT=8,ts.HTTP_ERROR=6,es.COMPLETE="complete",rs.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",bo.prototype.listen=bo.prototype.N,ya.prototype.listenOnce=ya.prototype.O,ya.prototype.getLastError=ya.prototype.La,ya.prototype.getLastErrorCode=ya.prototype.Da,ya.prototype.getStatus=ya.prototype.ba,ya.prototype.getResponseJson=ya.prototype.Qa,ya.prototype.getResponseText=ya.prototype.ga,ya.prototype.send=ya.prototype.ea;var iu=ts,ou=es,su=zo,au=ha,uu=rs,cu=ya,lu=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();lu.o=-1;var hu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fu=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Jr.__extends)(e,t),e}(Error),du=new ei.Logger("@firebase/firestore");function pu(){return du.logLevel}function gu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(du.logLevel<=ei.LogLevel.DEBUG){var r=e.map(yu);du.debug.apply(du,(0,Jr.__spreadArray)(["Firestore (8.7.0): "+t],r))}}function vu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(du.logLevel<=ei.LogLevel.ERROR){var r=e.map(yu);du.error.apply(du,(0,Jr.__spreadArray)(["Firestore (8.7.0): "+t],r))}}function mu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(du.logLevel<=ei.LogLevel.WARN){var r=e.map(yu);du.warn.apply(du,(0,Jr.__spreadArray)(["Firestore (8.7.0): "+t],r))}}function yu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Cy){return t}}function _u(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw vu(e),new Error(e)}function bu(t,e){t||_u()}function wu(t,e){return t}function Tu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Cu=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Tu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Iu(t,e){return t<e?-1:t>e?1:0}function Eu(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Su(t){return t+"\0"}var ku=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new fu(hu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new fu(hu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new fu(hu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fu(hu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Iu(this.nanoseconds,t.nanoseconds):Iu(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),xu=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ku(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Au(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ou(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Nu(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Pu=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&_u(),void 0===n?n=t.length-e:n>t.length-e&&_u(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ru=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Jr.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new fu(hu.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Pu),Du=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Jr.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Du.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new fu(hu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new fu(hu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new fu(hu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new fu(hu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Pu),Lu=function(){function t(t){this.fields=t,t.sort(Mu.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Eu(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Fu=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Iu(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Fu.EMPTY_BYTE_STRING=new Fu("");var Uu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ju(t){if(bu(!!t),"string"==typeof t){var e=0,n=Uu.exec(t);if(bu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vu(t.seconds),nanos:Vu(t.nanos)}}function Vu(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function qu(t){return"string"==typeof t?Fu.fromBase64String(t):Fu.fromUint8Array(t)}function Bu(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hu(t){var e=t.mapValue.fields.__previous_value__;return Bu(e)?Hu(e):e}function Gu(t){var e=ju(t.mapValue.fields.__local_write_time__.timestampValue);return new ku(e.seconds,e.nanos)}function zu(t){return null==t}function Ku(t){return 0===t&&1/t==-1/0}function Wu(t){return"number"==typeof t&&Number.isInteger(t)&&!Ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Yu=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ru.fromString(e))},t.fromName=function(e){return new t(Ru.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ru.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ru.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ru(e.slice()))},t}();function Zu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bu(t)?4:10:_u()}function Qu(t,e){var n=Zu(t);if(n!==Zu(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gu(t).isEqual(Gu(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ju(t.timestampValue),r=ju(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return qu(t.bytesValue).isEqual(qu(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Vu(t.geoPointValue.latitude)===Vu(e.geoPointValue.latitude)&&Vu(t.geoPointValue.longitude)===Vu(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Vu(t.integerValue)===Vu(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Vu(t.doubleValue),r=Vu(e.doubleValue);return n===r?Ku(n)===Ku(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Eu(t.arrayValue.values||[],e.arrayValue.values||[],Qu);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Au(n)!==Au(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qu(n[i],r[i])))return!1;return!0}(t,e);default:return _u()}}function $u(t,e){return void 0!==(t.values||[]).find(function(t){return Qu(t,e)})}function Xu(t,e){var n=Zu(t),r=Zu(e);if(n!==r)return Iu(n,r);switch(n){case 0:return 0;case 1:return Iu(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Vu(t.integerValue||t.doubleValue),r=Vu(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ju(t.timestampValue,e.timestampValue);case 4:return Ju(Gu(t),Gu(e));case 5:return Iu(t.stringValue,e.stringValue);case 6:return function(t,e){var n=qu(t),r=qu(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Iu(n[i],r[i]);if(0!==o)return o}return Iu(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Iu(Vu(t.latitude),Vu(e.latitude));return 0!==n?n:Iu(Vu(t.longitude),Vu(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Xu(n[i],r[i]);if(o)return o}return Iu(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Iu(r[s],o[s]);if(0!==a)return a;var u=Xu(n[r[s]],i[o[s]]);if(0!==u)return u}return Iu(r.length,o.length)}(t.mapValue,e.mapValue);default:throw _u()}}function Ju(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Iu(t,e);var n=ju(t),r=ju(e),i=Iu(n.seconds,r.seconds);return 0!==i?i:Iu(n.nanos,r.nanos)}function tc(t){return ec(t)}function ec(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ju(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?qu(t.bytesValue).toBase64():"referenceValue"in t?Yu.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ec(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ec(t.fields[o])}return e+"}"}(t.mapValue):_u();var e}function nc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function rc(t){return!!t&&"integerValue"in t}function ic(t){return!!t&&"arrayValue"in t}function oc(t){return!!t&&"nullValue"in t}function sc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ac(t){return!!t&&"mapValue"in t}function uc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},ju(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Ou(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=uc(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=uc(t.arrayValue.values[r]);return n}return Object.assign({},t)}var cc=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ac(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=uc(e)},t.prototype.setAll=function(t){var e=this,n=Mu.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=uc(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());ac(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Qu(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];ac(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Ou(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(uc(this.value))},t}();function lc(t){var e=[];return Ou(t.fields,function(t,n){var r=new Mu([t]);if(ac(n)){var i=lc(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Lu(e)}var hc=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,xu.min(),cc.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,cc.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,cc.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=cc.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=cc.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),fc=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function dc(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new fc(t,e,n,r,i,o,s)}function pc(t){var e=wu(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+tc(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),zu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=kc(e.startAt)),e.endAt&&(n+="|ub:",n+=kc(e.endAt)),e.h=n}return e.h}function gc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ac(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Qu(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nc(t.startAt,e.startAt)&&Nc(t.endAt,e.endAt)}function vc(t){return Yu.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var mc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Jr.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new yc(t,n,r):"array-contains"===n?new Tc(t,r):"in"===n?new Cc(t,r):"not-in"===n?new Ic(t,r):"array-contains-any"===n?new Ec(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new _c(t,n):new bc(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Xu(e,this.value)):null!==e&&Zu(this.value)===Zu(e)&&this.m(Xu(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _u()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),yc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Yu.fromName(r.referenceValue),i}return(0,Jr.__extends)(e,t),e.prototype.matches=function(t){var e=Yu.comparator(t.key,this.key);return this.m(e)},e}(mc),_c=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=wc(0,n),r}return(0,Jr.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(mc),bc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=wc(0,n),r}return(0,Jr.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(mc);function wc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Yu.fromName(t.referenceValue)})}var Tc=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Jr.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ic(e)&&$u(e.arrayValue,this.value)},e}(mc),Cc=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Jr.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&$u(this.value.arrayValue,e)},e}(mc),Ic=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Jr.__extends)(e,t),e.prototype.matches=function(t){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!$u(this.value.arrayValue,e)},e}(mc),Ec=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Jr.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ic(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return $u(e.value.arrayValue,t)})},e}(mc),Sc=function(t,e){this.position=t,this.before=e};function kc(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return tc(t)}).join(",")}var xc=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ac(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Oc(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Yu.comparator(Yu.fromName(s.referenceValue),n.key):Xu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Nc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Qu(t.position[n],e.position[n]))return!1;return!0}var Pc=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Rc(t,e,n,r,i,o,s,a){return new Pc(t,e,n,r,i,o,s,a)}function Dc(t){return new Pc(t)}function Mc(t){return!zu(t.limit)&&"F"===t.limitType}function Lc(t){return!zu(t.limit)&&"L"===t.limitType}function Fc(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Uc(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function jc(t){return null!==t.collectionGroup}function Vc(t){var e=wu(t);if(null===e.p){e.p=[];var n=Uc(e),r=Fc(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new xc(n)),e.p.push(new xc(Mu.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new xc(Mu.keyField(),u))}}}return e.p}function qc(t){var e=wu(t);if(!e.T)if("F"===e.limitType)e.T=dc(e.path,e.collectionGroup,Vc(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Vc(e);r<i.length;r++){var o=i[r];n.push(new xc(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Sc(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Sc(e.startAt.position,!e.startAt.before):null;e.T=dc(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Bc(t,e,n){return new Pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hc(t,e){return gc(qc(t),qc(e))&&t.limitType===e.limitType}function Gc(t){return pc(qc(t))+"|lt:"+t.limitType}function zc(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+tc(e.value);var e}).join(", ")+"]"),zu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+kc(t.startAt)),t.endAt&&(e+=", endAt: "+kc(t.endAt)),"Target("+e+")"}(qc(t))+"; limitType="+t.limitType+")"}function Kc(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Yu.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Oc(t.startAt,Vc(t),e)||t.endAt&&Oc(t.endAt,Vc(t),e))}(t,e)}function Wc(t){return function(e,n){for(var r=!1,i=0,o=Vc(t);i<o.length;i++){var s=o[i],a=Yc(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Yc(t,e,n){var r=t.field.isKeyField()?Yu.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Xu(r,i):_u()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _u()}}function Zc(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(e)?"-0":e}}function Qc(t){return{integerValue:""+t}}function $c(t,e){return Wu(e)?Qc(e):Zc(t,e)}var Xc=function(){this._=void 0};function Jc(t,e,n){return t instanceof nl?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof rl?il(t,e):t instanceof ol?sl(t,e):function(t,e){var n=el(t,e),r=ul(n)+ul(t.A);return rc(n)&&rc(t.A)?Qc(r):Zc(t.R,r)}(t,e)}function tl(t,e,n){return t instanceof rl?il(t,e):t instanceof ol?sl(t,e):n}function el(t,e){return t instanceof al?rc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var nl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Jr.__extends)(e,t),e}(Xc),rl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Jr.__extends)(e,t),e}(Xc);function il(t,e){for(var n=cl(e),r=function(t){n.some(function(e){return Qu(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ol=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Jr.__extends)(e,t),e}(Xc);function sl(t,e){for(var n=cl(e),r=function(t){n=n.filter(function(e){return!Qu(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var al=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Jr.__extends)(e,t),e}(Xc);function ul(t){return Vu(t.integerValue||t.doubleValue)}function cl(t){return ic(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ll=function(t,e){this.field=t,this.transform=e},hl=function(t,e){this.version=t,this.transformResults=e},fl=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function dl(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var pl=function(){};function gl(t,e,n){t instanceof bl?function(t,e,n){var r=t.value.clone(),i=Cl(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof wl?function(t,e,n){if(dl(t.precondition,e)){var r=Cl(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Tl(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function vl(t,e,n){t instanceof bl?function(t,e,n){if(dl(t.precondition,e)){var r=t.value.clone(),i=Il(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(_l(e),r).setHasLocalMutations()}}(t,e,n):t instanceof wl?function(t,e,n){if(dl(t.precondition,e)){var r=Il(t.fieldTransforms,n,e),i=e.data;i.setAll(Tl(t)),i.setAll(r),e.convertToFoundDocument(_l(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){dl(t.precondition,e)&&e.convertToNoDocument(xu.min())}(t,e)}function ml(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=el(o.transform,s||null);null!=a&&(null==n&&(n=cc.empty()),n.set(o.field,a))}return n||null}function yl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Eu(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof rl&&e instanceof rl||t instanceof ol&&e instanceof ol?Eu(t.elements,e.elements,Qu):t instanceof al&&e instanceof al?Qu(t.A,e.A):t instanceof nl&&e instanceof nl}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function _l(t){return t.isFoundDocument()?t.version:xu.min()}var bl=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Jr.__extends)(e,t),e}(pl),wl=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Jr.__extends)(e,t),e}(pl);function Tl(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Cl(t,e,n){var r=new Map;bu(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,tl(s,a,n[i]))}return r}function Il(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Jc(a,u,e))}return r}var El,Sl,kl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Jr.__extends)(e,t),e}(pl),xl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Jr.__extends)(e,t),e}(pl),Al=function(t){this.count=t};function Ol(t){switch(t){case hu.OK:return _u();case hu.CANCELLED:case hu.UNKNOWN:case hu.DEADLINE_EXCEEDED:case hu.RESOURCE_EXHAUSTED:case hu.INTERNAL:case hu.UNAVAILABLE:case hu.UNAUTHENTICATED:return!1;case hu.INVALID_ARGUMENT:case hu.NOT_FOUND:case hu.ALREADY_EXISTS:case hu.PERMISSION_DENIED:case hu.FAILED_PRECONDITION:case hu.ABORTED:case hu.OUT_OF_RANGE:case hu.UNIMPLEMENTED:case hu.DATA_LOSS:return!0;default:return _u()}}function Nl(t){if(void 0===t)return vu("GRPC error has no .code"),hu.UNKNOWN;switch(t){case El.OK:return hu.OK;case El.CANCELLED:return hu.CANCELLED;case El.UNKNOWN:return hu.UNKNOWN;case El.DEADLINE_EXCEEDED:return hu.DEADLINE_EXCEEDED;case El.RESOURCE_EXHAUSTED:return hu.RESOURCE_EXHAUSTED;case El.INTERNAL:return hu.INTERNAL;case El.UNAVAILABLE:return hu.UNAVAILABLE;case El.UNAUTHENTICATED:return hu.UNAUTHENTICATED;case El.INVALID_ARGUMENT:return hu.INVALID_ARGUMENT;case El.NOT_FOUND:return hu.NOT_FOUND;case El.ALREADY_EXISTS:return hu.ALREADY_EXISTS;case El.PERMISSION_DENIED:return hu.PERMISSION_DENIED;case El.FAILED_PRECONDITION:return hu.FAILED_PRECONDITION;case El.ABORTED:return hu.ABORTED;case El.OUT_OF_RANGE:return hu.OUT_OF_RANGE;case El.UNIMPLEMENTED:return hu.UNIMPLEMENTED;case El.DATA_LOSS:return hu.DATA_LOSS;default:return _u()}}(Sl=El||(El={}))[Sl.OK=0]="OK",Sl[Sl.CANCELLED=1]="CANCELLED",Sl[Sl.UNKNOWN=2]="UNKNOWN",Sl[Sl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sl[Sl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sl[Sl.NOT_FOUND=5]="NOT_FOUND",Sl[Sl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sl[Sl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sl[Sl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sl[Sl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sl[Sl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sl[Sl.ABORTED=10]="ABORTED",Sl[Sl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sl[Sl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sl[Sl.INTERNAL=13]="INTERNAL",Sl[Sl.UNAVAILABLE=14]="UNAVAILABLE",Sl[Sl.DATA_LOSS=15]="DATA_LOSS";var Pl=function(){function t(t,e){this.comparator=t,this.root=e||Dl.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dl.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dl.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Rl(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Rl(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Rl(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Rl(this.root,t,this.comparator,!0)},t}(),Rl=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Dl=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw _u();if(this.right.isRed())throw _u();var t=this.left.check();if(t!==this.right.check())throw _u();return t+(this.isRed()?0:1)},t}();Dl.EMPTY=null,Dl.RED=!0,Dl.BLACK=!1,Dl.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw _u()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw _u()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw _u()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw _u()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw _u()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Dl(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ml=function(){function t(t){this.comparator=t,this.data=new Pl(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ll(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ll(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ll=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Fl=new Pl(Yu.comparator);function Ul(){return Fl}var jl=new Pl(Yu.comparator);function Vl(){return jl}var ql=new Pl(Yu.comparator);function Bl(){return ql}var Hl=new Ml(Yu.comparator);function Gl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Hl,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var zl=new Ml(Iu);function Kl(){return zl}var Wl=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(xu.min(),r,Kl(),Ul(),Gl())},t}(),Yl=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Fu.EMPTY_BYTE_STRING,n,Gl(),Gl(),Gl())},t}(),Zl=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ql=function(t,e){this.targetId=t,this.V=e},$l=function(t,e,n,r){void 0===n&&(n=Fu.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Xl=function(){function t(){this.S=0,this.D=eh(),this.C=Fu.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Gl(),e=Gl(),n=Gl();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:_u()}}),new Yl(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=eh()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Jl=function(){function t(t){this.W=t,this.G=new Map,this.H=Ul(),this.J=th(),this.Y=new Ml(Iu)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:_u()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(vc(i))if(0===n){var o=new Yu(i.path);this.tt(e,o,hc.newNoDocument(o,xu.min()))}else bu(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&vc(o.target)){var s=new Yu(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,hc.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Gl();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Wl(t,n,this.Y,this.H,r);return this.H=Ul(),this.J=th(),this.Y=new Ml(Iu),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Xl,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ml(Iu),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||gu("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Xl),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function th(){return new Pl(Yu.comparator)}function eh(){return new Pl(Yu.comparator)}var nh={asc:"ASCENDING",desc:"DESCENDING"},rh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ih=function(t,e){this.databaseId=t,this.I=e};function oh(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function sh(t,e){return t.I?e.toBase64():e.toUint8Array()}function ah(t,e){return oh(t,e.toTimestamp())}function uh(t){return bu(!!t),xu.fromTimestamp(function(t){var e=ju(t);return new ku(e.seconds,e.nanos)}(t))}function ch(t,e){return function(t){return new Ru(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function lh(t){var e=Ru.fromString(t);return bu(Dh(e)),e}function hh(t,e){return ch(t.databaseId,e.path)}function fh(t,e){var n=lh(e);if(n.get(1)!==t.databaseId.projectId)throw new fu(hu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fu(hu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Yu(vh(n))}function dh(t,e){return ch(t.databaseId,e)}function ph(t){var e=lh(t);return 4===e.length?Ru.emptyPath():vh(e)}function gh(t){return new Ru(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vh(t){return bu(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function mh(t,e,n){return{name:hh(t,e),fields:n.value.mapValue.fields}}function yh(t,e,n){var r=fh(t,e.name),i=uh(e.updateTime),o=new cc({mapValue:{fields:e.fields}}),s=hc.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function _h(t,e){var n;if(e instanceof bl)n={update:mh(t,e.key,e.value)};else if(e instanceof kl)n={delete:hh(t,e.key)};else if(e instanceof wl)n={update:mh(t,e.key,e.data),updateMask:Rh(e.fieldMask)};else{if(!(e instanceof xl))return _u();n={verify:hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof nl)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rl)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ol)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof al)return{fieldPath:e.field.canonicalString(),increment:n.A};throw _u()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ah(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:_u()}(t,e.precondition)),n}function bh(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?fl.updateTime(uh(t.updateTime)):void 0!==t.exists?fl.exists(t.exists):fl.none()}(e.currentDocument):fl.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(bu("REQUEST_TIME"===e.setToServerValue),n=new nl):"appendMissingElements"in e?n=new rl(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new ol(e.removeAllFromArray.values||[]):"increment"in e?n=new al(t,e.increment):_u();var r=Mu.fromServerFormat(e.fieldPath);return new ll(r,n)}(t,e)}):[];if(e.update){var i=fh(t,e.update.name),o=new cc({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Lu((t.fieldPaths||[]).map(function(t){return Mu.fromServerFormat(t)}))}(e.updateMask);return new wl(i,o,s,n,r)}return new bl(i,o,n,r)}if(e.delete){var a=fh(t,e.delete);return new kl(a,n)}if(e.verify){var u=fh(t,e.verify);return new xl(u,n)}return _u()}function wh(t,e){return{documents:[dh(t,e.path)]}}function Th(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=dh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=dh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(sc(t.value))return{unaryFilter:{field:Ah(t.field),op:"IS_NAN"}};if(oc(t.value))return{unaryFilter:{field:Ah(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sc(t.value))return{unaryFilter:{field:Ah(t.field),op:"IS_NOT_NAN"}};if(oc(t.value))return{unaryFilter:{field:Ah(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ah(t.field),op:xh(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Ah(t.field),direction:kh(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||zu(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Eh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Eh(e.endAt)),n}function Ch(t){var e=ph(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bu(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ih(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new xc(Oh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return zu(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Sh(n.startAt));var l=null;return n.endAt&&(l=Sh(n.endAt)),Rc(e,i,a,s,u,"F",c,l)}function Ih(t){return t?void 0!==t.unaryFilter?[Ph(t)]:void 0!==t.fieldFilter?[Nh(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Ih(t)}).reduce(function(t,e){return t.concat(e)}):_u():[]}function Eh(t){return{before:t.before,values:t.position}}function Sh(t){return new Sc(t.values||[],!!t.before)}function kh(t){return nh[t]}function xh(t){return rh[t]}function Ah(t){return{fieldPath:t.canonicalString()}}function Oh(t){return Mu.fromServerFormat(t.fieldPath)}function Nh(t){return mc.create(Oh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return _u()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ph(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Oh(t.unaryFilter.field);return mc.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Oh(t.unaryFilter.field);return mc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Oh(t.unaryFilter.field);return mc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Oh(t.unaryFilter.field);return mc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return _u()}}function Rh(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Dh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Mh(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Fh(e)),e=Lh(t.get(n),e);return Fh(e)}function Lh(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Fh(t){return t+"\x01\x01"}function Uh(t){var e=t.length;if(bu(e>=2),2===e)return bu("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ru.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&_u(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:_u()}o=s+2}return new Ru(r)}var jh=function(t,e){this.seconds=t,this.nanoseconds=e},Vh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Vh.store="owner",Vh.key="owner";var qh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};qh.store="mutationQueues",qh.keyPath="userId";var Bh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bh.store="mutations",Bh.keyPath="batchId",Bh.userMutationsIndex="userMutationsIndex",Bh.userMutationsKeyPath=["userId","batchId"];var Hh=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Mh(e)]},t.key=function(t,e,n){return[t,Mh(e),n]},t}();Hh.store="documentMutations",Hh.PLACEHOLDER=new Hh;var Gh=function(t,e){this.path=t,this.readTime=e},zh=function(t,e){this.path=t,this.version=e},Kh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Kh.store="remoteDocuments",Kh.readTimeIndex="readTimeIndex",Kh.readTimeIndexPath="readTime",Kh.collectionReadTimeIndex="collectionReadTimeIndex",Kh.collectionReadTimeIndexPath=["parentPath","readTime"];var Wh=function(t){this.byteSize=t};Wh.store="remoteDocumentGlobal",Wh.key="remoteDocumentGlobalKey";var Yh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Yh.store="targets",Yh.keyPath="targetId",Yh.queryTargetsIndexName="queryTargetsIndex",Yh.queryTargetsKeyPath=["canonicalId","targetId"];var Zh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Zh.store="targetDocuments",Zh.keyPath=["targetId","path"],Zh.documentTargetsIndex="documentTargetsIndex",Zh.documentTargetsKeyPath=["path","targetId"];var Qh=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Qh.key="targetGlobalKey",Qh.store="targetGlobal";var $h=function(t,e){this.collectionId=t,this.parent=e};$h.store="collectionParents",$h.keyPath=["collectionId","parent"];var Xh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Xh.store="clientMetadata",Xh.keyPath="clientId";var Jh=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Jh.store="bundles",Jh.keyPath="bundleId";var tf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};tf.store="namedQueries",tf.keyPath="name";var ef=(0,Jr.__spreadArray)((0,Jr.__spreadArray)([],(0,Jr.__spreadArray)((0,Jr.__spreadArray)([],(0,Jr.__spreadArray)((0,Jr.__spreadArray)([],(0,Jr.__spreadArray)((0,Jr.__spreadArray)([],[qh.store,Bh.store,Hh.store,Kh.store,Yh.store,Vh.store,Qh.store,Zh.store]),[Xh.store])),[Wh.store])),[$h.store])),[Jh.store,tf.store]),nf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rf=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),of=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},sf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&_u(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),af=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new of,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new lf(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=gf(e.target.error);n.ft.reject(new lf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new lf(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(gu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ff(e)},t}(),uf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,ti.getUA)())&&vu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return gu("SimpleDb","Removing database:",t),df(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,ti.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(gu("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new lf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new fu(hu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new lf(t,n))},i.onupgradeneeded=function(t){gu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){gu("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Jr.__generator)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Jr.__generator)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=af.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),sf.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return gu("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),cf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return df(this.Pt.delete())},t}(),lf=function(t){function e(e,n){var r=this;return(r=t.call(this,hu.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Jr.__extends)(e,t),e}(fu);function hf(t){return"IndexedDbTransactionError"===t.name}var ff=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(gu("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(gu("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),df(n)},t.prototype.add=function(t){return gu("SimpleDb","ADD",this.store.name,t,t),df(this.store.add(t))},t.prototype.get=function(t){var e=this;return df(this.store.get(t)).next(function(n){return void 0===n&&(n=null),gu("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return gu("SimpleDb","DELETE",this.store.name,t),df(this.store.delete(t))},t.prototype.count=function(){return gu("SimpleDb","COUNT",this.store.name),df(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){gu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new sf(function(n,r){e.onerror=function(t){var e=gf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new sf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new cf(i),s=e(i.primaryKey,i.value,o);if(s instanceof sf){var a=s.catch(function(t){return o.done(),sf.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return sf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function df(t){return new sf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=gf(t.target.error);n(e)}})}var pf=!1;function gf(t){var e=uf._t((0,ti.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new fu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pf||(pf=!0,setTimeout(function(){throw r},0)),r}}return t}var vf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Jr.__extends)(e,t),e}(rf);function mf(t,e){var n=wu(t);return uf.It(n.Mt,e)}var yf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&gl(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&vl(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&vl(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(xu.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Gl())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Eu(this.mutations,t.mutations,function(t,e){return yl(t,e)})&&Eu(this.baseMutations,t.baseMutations,function(t,e){return yl(t,e)})},t}(),_f=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){bu(e.mutations.length===r.length);for(var i=Bl(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),bf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=xu.min()),void 0===o&&(o=xu.min()),void 0===s&&(s=Fu.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),wf=function(t){this.Lt=t};function Tf(t,e){if(e.document)return yh(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Yu.fromSegments(e.noDocument.path),r=kf(e.noDocument.readTime),i=hc.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Yu.fromSegments(e.unknownDocument.path);return r=kf(e.unknownDocument.version),hc.newUnknownDocument(o,r)}return _u()}function Cf(t,e,n){var r=If(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:hh(t,e.key),fields:e.data.value.mapValue.fields,updateTime:oh(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Kh(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Sf(e.version);return s=e.hasCommittedMutations,new Kh(null,new Gh(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Sf(e.version);return new Kh(new zh(c,l),null,null,!0,r,i)}return _u()}function If(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ef(t){var e=new ku(t[0],t[1]);return xu.fromTimestamp(e)}function Sf(t){var e=t.toTimestamp();return new jh(e.seconds,e.nanoseconds)}function kf(t){var e=new ku(t.seconds,t.nanoseconds);return xu.fromTimestamp(e)}function xf(t,e){for(var n=(e.baseMutations||[]).map(function(e){return bh(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return bh(t.Lt,e)}),o=ku.fromMillis(e.localWriteTimeMs);return new yf(e.batchId,o,n,i)}function Af(t){var e,n,r=kf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?kf(t.lastLimboFreeSnapshotVersion):xu.min();return void 0!==t.query.documents?(bu(1===(n=t.query).documents.length),e=qc(Dc(ph(n.documents[0])))):e=function(t){return qc(Ch(t))}(t.query),new bf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Fu.fromBase64String(t.resumeToken))}function Of(t,e){var n,r=Sf(e.snapshotVersion),i=Sf(e.lastLimboFreeSnapshotVersion);n=vc(e.target)?wh(t.Lt,e.target):Th(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Yh(e.targetId,pc(e.target),r,o,e.sequenceNumber,i,n)}function Nf(t){var e=Ch({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Bc(e,e.limit,"L"):e}var Pf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Rf(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:kf(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Rf(t).put({bundleId:(n=e).id,createTime:Sf(uh(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Df(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Nf(e.bundledQuery),readTime:kf(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Df(t).put(function(t){return{name:t.name,readTime:Sf(uh(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Rf(t){return mf(t,Jh.store)}function Df(t){return mf(t,tf.store)}var Mf=function(){function t(){this.Bt=new Lf}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),sf.resolve()},t.prototype.getCollectionParents=function(t,e){return sf.resolve(this.Bt.getEntries(e))},t}(),Lf=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ml(Ru.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ml(Ru.comparator)).toArray()},t}(),Ff=function(){function t(){this.qt=new Lf}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Mh(i)};return Uf(t).put(o)}return sf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Su(e),""],!1,!0);return Uf(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Uh(o.parent))}return n})},t}();function Uf(t){return mf(t,$h.store)}var jf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vf=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function qf(t,e,n){var r=t.store(Bh.store),i=t.store(Hh.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){bu(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Hh.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return sf.waitFor(o).next(function(){return c})}function Bf(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _u();e=t.noDocument}return JSON.stringify(e).length}Vf.DEFAULT_COLLECTION_PERCENTILE=10,Vf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vf.DEFAULT=new Vf(41943040,Vf.DEFAULT_COLLECTION_PERCENTILE,Vf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vf.DISABLED=new Vf(-1,0,0);var Hf=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return bu(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zf(t).$t({index:Bh.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Kf(t),s=zf(t);return s.add({}).next(function(a){bu("number"==typeof a);for(var u=new yf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return _h(t.Lt,e)}),i=n.mutations.map(function(e){return _h(t.Lt,e)});return new Bh(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Ml(function(t,e){return Iu(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Hh.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Hh.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),sf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return zf(t).get(e).next(function(t){return t?(bu(t.userId===n.userId),xf(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?sf.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return zf(t).$t({index:Bh.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(bu(e.batchId>=r),o=xf(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zf(t).$t({index:Bh.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zf(t).Nt(Bh.userMutationsIndex,n).next(function(t){return t.map(function(t){return xf(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Hh.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Kf(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=Uh(r[1]);if(a===n.userId&&e.path.isEqual(c))return zf(t).get(u).next(function(t){if(!t)throw _u();bu(t.userId===n.userId),o.push(xf(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ml(Iu),i=[];return e.forEach(function(e){var o=Hh.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Kf(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=Uh(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),sf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Hh.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ml(Iu);return Kf(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=Uh(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(zf(t).get(e).next(function(t){if(null===t)throw _u();bu(t.userId===n.userId),r.push(xf(n.R,t))}))}),sf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return qf(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),sf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return sf.resolve();var r=IDBKeyRange.lowerBound(Hh.prefixForUser(e.userId)),i=[];return Kf(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=Uh(t[1]);i.push(o)}else r.done()}).next(function(){bu(0===i.length)})})},t.prototype.containsKey=function(t,e){return Gf(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Wf(t).get(this.userId).next(function(t){return t||new qh(e.userId,-1,"")})},t}();function Gf(t,e,n){var r=Hh.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Kf(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function zf(t){return mf(t,Bh.store)}function Kf(t){return mf(t,Hh.store)}function Wf(t){return mf(t,qh.store)}var Yf=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Zf=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Yf(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return xu.fromTimestamp(new ku(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Qf(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return bu(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Qf(t).$t(function(s,a){var u=Af(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return sf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Qf(t).$t(function(t,n){var r=Af(n);e(r)})},t.prototype.Xt=function(t){return $f(t).get(Qh.key).next(function(t){return bu(null!==t),t})},t.prototype.Zt=function(t,e){return $f(t).put(Qh.key,e)},t.prototype.te=function(t,e){return Qf(t).put(Of(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=pc(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Qf(t).$t({range:r,index:Yh.queryTargetsIndexName},function(t,n,r){var o=Af(n);gc(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Xf(t);return e.forEach(function(e){var s=Mh(e.path);i.push(o.put(new Zh(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),sf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Xf(t);return sf.forEach(e,function(e){var o=Mh(e.path);return sf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Xf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Xf(t),i=Gl();return r.$t({range:n,kt:!0},function(t,e,n){var r=Uh(t[1]),o=new Yu(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Mh(e.path),r=IDBKeyRange.bound([n],[Su(n)],!1,!0),i=0;return Xf(t).$t({index:Zh.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Qf(t).get(e).next(function(t){return t?Af(t):null})},t}();function Qf(t){return mf(t,Yh.store)}function $f(t){return mf(t,Qh.store)}function Xf(t){return mf(t,Zh.store)}function Jf(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){if(t.code!==hu.FAILED_PRECONDITION||t.message!==nf)throw t;return gu("LocalStore","Unexpectedly lost primary lease"),[2]})})}function td(t,e){var n=t[1],r=e[1],i=Iu(t[0],e[0]);return 0===i?Iu(n,r):i}var ed=function(){function t(t){this.ne=t,this.buffer=new Ml(td),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();td(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),nd=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;gu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Jr.__awaiter)(e,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return hf(e=n.sent())?(gu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Jf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),rd=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return sf.resolve(lu.o);var r=new ed(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(gu("LruGarbageCollector","Garbage collection skipped; disabled"),sf.resolve(jf)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(gu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),jf):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(gu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),pu()<=ei.LogLevel.DEBUG&&gu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),sf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),id=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new rd(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return od(t,n)},t.prototype.removeReference=function(t,e,n){return od(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return od(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Wf(t).Ot(function(r){return Gf(t,r,e).next(function(t){return t&&(n=!0),sf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Xf(t).delete([0,Mh(s.path)])})});i.push(u)}}).next(function(){return sf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return od(t,e)},t.prototype.we=function(t,e){var n,r=Xf(t),i=lu.o;return r.$t({index:Zh.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==lu.o&&e(new Yu(Uh(n)),i),i=s,n=o):i=lu.o}).next(function(){i!==lu.o&&e(new Yu(Uh(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function od(t,e){return Xf(t).put(function(t,e){return new Zh(0,Mh(t.path),e)}(e,t.currentSequenceNumber))}var sd=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ou(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Nu(this.inner)},t}(),ad=function(){function t(){this.changes=new sd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:xu.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:hc.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?sf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),ud=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return hd(t).put(fd(e),n)},t.prototype.removeEntry=function(t,e){var n=hd(t),r=fd(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return hd(t).get(fd(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return hd(t).get(fd(e)).next(function(t){return{document:n.ye(e,t),size:Bf(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Ul();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Ul(),i=new Pl(Yu.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Bf(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return sf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return hd(t).$t({range:r},function(t,e,r){for(var s=Yu.fromSegments(t);o&&Yu.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ul(),o=e.path.length+1,s={};if(n.isEqual(xu.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=If(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Kh.collectionReadTimeIndex}return hd(t).$t(s,function(t,n,s){if(t.length===o){var a=Tf(r.R,n);e.path.isPrefixOf(a.key.path)?Kc(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new cd(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ld(t).get(Wh.key).next(function(t){return bu(!!t),t})},t.prototype.me=function(t,e){return ld(t).put(Wh.key,e)},t.prototype.ye=function(t,e){if(e){var n=Tf(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(xu.min()))return n}return hc.newInvalidDocument(t)},t}(),cd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new sd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Jr.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ml(function(t,e){return Iu(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Cf(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Bf(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Cf(e.Ie.R,hc.newNoDocument(o,xu.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),sf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(ad);function ld(t){return mf(t,Wh.store)}function hd(t){return mf(t,Kh.store)}function fd(t){return t.path.toArray()}var dd=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;bu(n<r&&n>=0&&r<=11);var o=new af("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Vh.store)}(t),function(t){t.createObjectStore(qh.store,{keyPath:qh.keyPath}),t.createObjectStore(Bh.store,{keyPath:Bh.keyPath,autoIncrement:!0}).createIndex(Bh.userMutationsIndex,Bh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Hh.store)}(t),pd(t),function(t){t.createObjectStore(Kh.store)}(t));var s=sf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Zh.store),t.deleteObjectStore(Yh.store),t.deleteObjectStore(Qh.store)}(t),pd(t)),s=s.next(function(){return function(t){var e=t.store(Qh.store),n=new Qh(0,0,xu.min().toTimestamp(),0);return e.put(Qh.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Bh.store).Nt().next(function(n){t.deleteObjectStore(Bh.store),t.createObjectStore(Bh.store,{keyPath:Bh.keyPath,autoIncrement:!0}).createIndex(Bh.userMutationsIndex,Bh.userMutationsKeyPath,{unique:!0});var r=e.store(Bh.store),i=n.map(function(t){return r.put(t)});return sf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Xh.store,{keyPath:Xh.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Wh.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Kh.store);e.createIndex(Kh.readTimeIndex,Kh.readTimeIndexPath,{unique:!1}),e.createIndex(Kh.collectionReadTimeIndex,Kh.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Jh.store,{keyPath:Jh.keyPath})}(t),function(t){t.createObjectStore(tf.store,{keyPath:tf.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Kh.store).$t(function(t,n){e+=Bf(n)}).next(function(){var n=new Wh(e);return t.store(Wh.store).put(Wh.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(qh.store),r=t.store(Bh.store);return n.Nt().next(function(n){return sf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Bh.userMutationsIndex,i).next(function(r){return sf.forEach(r,function(r){bu(r.userId===n.userId);var i=xf(e.R,r);return qf(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Zh.store),n=t.store(Kh.store);return t.store(Qh.store).get(Qh.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new Ru(n),s=function(t){return[0,Mh(t)]}(o);r.push(e.get(s).next(function(n){return n?sf.resolve():function(n){return e.put(new Zh(0,Mh(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return sf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore($h.store,{keyPath:$h.keyPath});var n=e.store($h.store),r=new Lf,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Mh(i)})}};return e.store(Kh.store).$t({kt:!0},function(t,e){var n=new Ru(t);return i(n.popLast())}).next(function(){return e.store(Hh.store).$t({kt:!0},function(t,e){var n=Uh(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Yh.store);return n.$t(function(t,r){var i=Af(r),o=Of(e.R,i);return n.put(o)})},t}();function pd(t){t.createObjectStore(Zh.store,{keyPath:Zh.keyPath}).createIndex(Zh.documentTargetsIndex,Zh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Yh.store,{keyPath:Yh.keyPath}).createIndex(Yh.queryTargetsIndexName,Yh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Qh.store)}var gd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vd=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new fu(hu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new id(this,i),this.Le=n+"main",this.R=new wf(u),this.Be=new uf(this.Le,11,new dd(this.R)),this.qe=new Zf(this.referenceDelegate,this.R),this.Ut=new Ff,this.Ue=function(t,e){return new ud(t,e)}(this.R,this.Ut),this.Ke=new Pf,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&vu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new fu(hu.FAILED_PRECONDITION,gd);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new lu(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Jr.__awaiter)(e,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Jr.__awaiter)(e,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Jr.__awaiter)(e,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return yd(e).put(new Xh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(hf(e))return gu("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return gu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return md(t).get(Vh.key).next(function(t){return sf.resolve(e.tn(t))})},t.prototype.en=function(t){return yd(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=mf(t,Xh.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return sf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?sf.resolve(!0):md(t).get(Vh.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new fu(hu.FAILED_PRECONDITION,gd);return!1}}return!(!e.networkEnabled||!e.inForeground)||yd(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&gu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Vh.store,Xh.store],function(e){var n=new vf(e,lu.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return yd(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Hf.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return gu("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",ef,function(o){return r=new vf(o,i.Ne?i.Ne.next():lu.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw vu("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new fu(hu.FAILED_PRECONDITION,nf);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return md(t).get(Vh.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new fu(hu.FAILED_PRECONDITION,gd)})},t.prototype.Ze=function(t){var e=new Vh(this.clientId,this.allowTabSynchronization,Date.now());return md(t).put(Vh.key,e)},t.yt=function(){return uf.yt()},t.prototype.Xe=function(t){var e=this,n=md(t);return n.get(Vh.key).next(function(t){return e.tn(t)?(gu("IndexedDbPersistence","Releasing primary lease."),n.delete(Vh.key)):sf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(vu("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return gu("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return vu("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){vu("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function md(t){return mf(t,Vh.store)}function yd(t){return mf(t,Xh.store)}function _d(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var bd=function(t,e){this.progress=t,this.wn=e},wd=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Yu.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):jc(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Yu(e)).next(function(t){var e=Vl();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Vl();return this.Ut.getCollectionParents(t,i).next(function(s){return sf.forEach(s,function(s){var a=function(t,e){return new Pc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=hc.newInvalidDocument(c),r=r.insert(c,l)),vl(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Kc(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Gl(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof wl&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Td=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Gl(),i=Gl(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Cd=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(xu.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Mc(e)||Lc(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(pu()<=ei.LogLevel.DEBUG&&gu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),zc(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Ml(Wc(t));return e.forEach(function(e,r){Kc(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return pu()<=ei.LogLevel.DEBUG&&gu("QueryEngine","Using full collection scan to execute query:",zc(e)),this.Sn.getDocumentsMatchingQuery(t,e,xu.min())},t}(),Id=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Pl(Iu),this.kn=new sd(function(t){return pc(t)},gc),this.$n=xu.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new wd(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Ed(t,e,n,r){return new Id(t,e,n,r)}function Sd(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return n=wu(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new wd(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Gl(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,v=p.mutations;g<v.length;g++)s=s.add(v[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function kd(t,e){var n=wu(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=sf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);bu(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function xd(t){var e=wu(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Ad(t,e){var n=wu(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return bu(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Ul();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Od(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(xu.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return sf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Od(t,e,n,r,i){var o=Gl();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Ul();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(xu.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):gu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Nd(t,e){var n=wu(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Pd(t,e){var n=wu(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?sf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new bf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Rd(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:r=wu(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!hf(s=a.sent()))throw s;return gu("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Dd(t,e,n){var r=wu(t),i=xu.min(),o=Gl();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=wu(t),i=r.kn.get(n);return void 0!==i?sf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,qc(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:xu.min(),n?o:Gl())}).next(function(t){return{documents:t,Bn:o}})})}function Md(t,e){var n=wu(t),r=wu(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Ld(t){var e=wu(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=wu(t),i=Ul(),o=If(n),s=hd(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Kh.readTimeIndex,range:a},function(t,e){var n=Tf(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Ef(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Fd(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){return[2,(e=wu(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=hd(t),n=xu.min();return e.$t({index:Kh.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Ef(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Ud(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,Jr.__generator)(this,function(p){switch(p.label){case 0:for(i=wu(t),o=Gl(),s=Ul(),a=Bl(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Pd(i,function(t){return qc(Dc(Ru.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Od(t,f,s,xu.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function jd(t,e,n){return void 0===n&&(n=Gl()),(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return[4,Pd(t,qc(Nf(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=wu(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=uh(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Fu.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Vd=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return sf.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:uh(n.createTime)}),sf.resolve()},t.prototype.getNamedQuery=function(t,e){return sf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Nf(t.bundledQuery),readTime:uh(t.readTime)}}(e)),sf.resolve()},t}(),qd=function(){function t(){this.Wn=new Ml(Bd.Gn),this.zn=new Ml(Bd.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Bd(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Bd(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Yu(new Ru([])),r=new Bd(n,t),i=new Bd(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Yu(new Ru([])),n=new Bd(e,t),r=new Bd(e,t+1),i=Gl();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Bd(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Bd=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Yu.comparator(t.key,e.key)||Iu(t.ns,e.ns)},t.Hn=function(t,e){return Iu(t.ns,e.ns)||Yu.comparator(t.key,e.key)},t}(),Hd=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ml(Bd.Gn)}return t.prototype.checkEmpty=function(t){return sf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new yf(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Bd(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return sf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return sf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return sf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return sf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return sf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Bd(e,0),i=new Bd(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),sf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ml(Iu);return e.forEach(function(t){var e=new Bd(t,0),i=new Bd(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),sf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Yu.isDocumentKey(i)||(i=i.child(""));var o=new Bd(new Yu(i),0),s=new Ml(Iu);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),sf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;bu(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return sf.forEach(e.mutations,function(i){var o=new Bd(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Bd(e,0),r=this.rs.firstAfterOrEqual(n);return sf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return sf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Gd=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Pl(Yu.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return sf.resolve(n?n.document.clone():hc.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ul();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():hc.newInvalidDocument(t))}),sf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ul(),i=new Yu(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Kc(e,u)&&(r=r.insert(u.key,u.clone()))}return sf.resolve(r)},t.prototype.fs=function(t,e){return sf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new zd(this)},t.prototype.getSize=function(t){return sf.resolve(this.size)},t}(),zd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Jr.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),sf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ad),Kd=function(){function t(t){this.persistence=t,this.ds=new sd(function(t){return pc(t)},gc),this.lastRemoteSnapshotVersion=xu.min(),this.highestTargetId=0,this.ws=0,this._s=new qd,this.targetCount=0,this.ys=Yf.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),sf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return sf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return sf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),sf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),sf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Yf(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,sf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),sf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,sf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),sf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return sf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return sf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),sf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),sf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),sf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return sf.resolve(n)},t.prototype.containsKey=function(t,e){return sf.resolve(this._s.containsKey(e))},t}(),Wd=function(){function t(t,e){var n=this;this.gs={},this.Ne=new lu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Kd(this),this.Ut=new Mf,this.Ue=function(t,e){return new Gd(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new wf(e),this.Ke=new Vd(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Hd(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;gu("MemoryPersistence","Starting transaction:",t);var i=new Yd(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return sf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Yd=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Jr.__extends)(e,t),e}(rf),Zd=function(){function t(t){this.persistence=t,this.As=new qd,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw _u()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),sf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),sf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),sf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sf.forEach(this.vs,function(r){var i=Yu.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return sf.or([function(){return sf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Qd=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function $d(t,e){return"firestore_clients_"+t+"_"+e}function Xd(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Jd(t,e){return"firestore_targets_"+t+"_"+e}Qd.UNAUTHENTICATED=new Qd(null),Qd.GOOGLE_CREDENTIALS=new Qd("google-credentials-uid"),Qd.FIRST_PARTY=new Qd("first-party-uid");var tp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new fu(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(vu("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ep=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fu(i.error.code,i.error.message)),o?new t(e,i.state,r):(vu("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),np=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Kl(),s=0;i&&s<r.activeTargetIds.length;++s)i=Wu(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(vu("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),rp=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(vu("SharedClientState","Failed to parse online state: "+e),null)},t}(),ip=function(){function t(){this.activeTargetIds=Kl()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),op=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Pl(Iu),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=$d(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new ip),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Jr.__generator)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem($d(this.persistenceKey,r)))&&(o=np.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Jd(this.persistenceKey,t));if(n){var r=ep.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Jd(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return gu("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){gu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){gu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(gu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void vu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Jr.__awaiter)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Jr.__generator)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=lu.o;if(null!=t)try{var n=JSON.parse(t);bu("number"==typeof n),e=n}catch(t){vu("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==lu.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new tp(this.currentUser,t,e,n),i=Xd(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Xd(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Jd(this.persistenceKey,t),i=new ep(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return np.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return tp.Vs(new Qd(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return ep.Vs(r,e)},t.prototype.js=function(t){return rp.Vs(t)},t.prototype.ii=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(gu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Kl();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),sp=function(){function t(){this.li=new ip,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new ip,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ap=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),up=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){gu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){gu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},lp=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),hp=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Jr.__extends)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new cu;s.listenOnce(ou.COMPLETE,function(){try{switch(s.getLastErrorCode()){case iu.NO_ERROR:var e=s.getResponseJson();gu("Connection","XHR received:",JSON.stringify(e)),i(e);break;case iu.TIMEOUT:gu("Connection",'RPC "'+t+'" timed out'),o(new fu(hu.DEADLINE_EXCEEDED,"Request time out"));break;case iu.HTTP_ERROR:var n=s.getStatus();if(gu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(hu).indexOf(e)>=0?e:hu.UNKNOWN}(r.status);o(new fu(a,r.message))}else o(new fu(hu.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fu(hu.UNAVAILABLE,"Connection failed."));break;default:_u()}}finally{gu("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ja,i=Wo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new au({})),this.Fi(o.initMessageHeaders,e),(0,ti.isMobileCordova)()||(0,ti.isReactNative)()||(0,ti.isElectron)()||(0,ti.isIE)()||(0,ti.isUWP)()||(0,ti.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");gu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new lp({Ei:function(t){c?gu("Connection","Not sending because WebChannel is closed:",t):(u||(gu("Connection","Opening WebChannel transport."),a.open(),u=!0),gu("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,uu.EventType.OPEN,function(){c||gu("Connection","WebChannel transport opened.")}),h(a,uu.EventType.CLOSE,function(){c||(c=!0,gu("Connection","WebChannel transport closed"),l.Vi())}),h(a,uu.EventType.ERROR,function(t){c||(c=!0,mu("Connection","WebChannel transport errored:",t),l.Vi(new fu(hu.UNAVAILABLE,"The operation could not be completed")))}),h(a,uu.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];bu(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){gu("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=El[t];if(void 0!==e)return Nl(e)}(i),s=r.message;void 0===o&&(o=hu.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new fu(o,s)),a.close()}else gu("Connection","WebChannel received:",n),l.Si(n)}}),h(i,su.STAT_EVENT,function(t){10===t.stat?gu("Connection","Detected buffering proxy"):11===t.stat&&gu("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);gu("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return gu("RestConnection","Received: ",t),t},function(e){throw mu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+cp[t]},t}());function fp(){return"undefined"!=typeof window?window:null}function dp(){return"undefined"!=typeof document?document:null}function pp(t){return new ih(t,!0)}var gp=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&gu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),vp=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new gp(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===hu.RESOURCE_EXHAUSTED?(vu(e.toString()),vu("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===hu.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new fu(hu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Jr.__awaiter)(t,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return gu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(gu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),mp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Jr.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:_u()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(bu(void 0===e||"string"==typeof e),Fu.fromBase64String(e||"")):(bu(void 0===e||e instanceof Uint8Array),Fu.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?hu.UNKNOWN:Nl(t.code);return new fu(e,t.message||"")}(a);n=new $l(r,i,o,s||null)}else if("documentChange"in e){i=fh(t,(r=e.documentChange).document.name),o=uh(r.document.updateTime);var a=new cc({mapValue:{fields:r.document.fields}}),u=(s=hc.newFoundDocument(i,o,a),r.targetIds||[]);n=new Zl(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=fh(t,(r=e.documentDelete).document),o=r.readTime?uh(r.readTime):xu.min(),a=hc.newNoDocument(i,o),n=new Zl([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=fh(t,(r=e.documentRemove).document),n=new Zl([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return _u();var c=e.filter;i=new Al(r=c.count||0),n=new Ql(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return xu.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?xu.min():e.readTime?uh(e.readTime):xu.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=gh(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=vc(r)?{documents:wh(t,r)}:{query:Th(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=sh(t,e.resumeToken):e.snapshotVersion.compareTo(xu.min())>0&&(n.readTime=oh(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _u()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=gh(this.R),e.removeTarget=t,this.cr(e)},e}(vp),yp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Jr.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(bu(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(bu(void 0!==e),t.map(function(t){return function(t,e){var n=uh(t.updateTime?t.updateTime:e);return n.isEqual(xu.min())&&(n=uh(e)),new hl(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=uh(t.commitTime);return this.listener.Tr(n,e)}return bu(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=gh(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return _h(e.R,t)})};this.cr(n)},e}(vp),_p=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Jr.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new fu(hu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===hu.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new fu(hu.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===hu.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new fu(hu.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),bp=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(vu(e),this.Vr=!1):gu("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),wp=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Jr.__awaiter)(o,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:return Op(this)?(gu("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return(e=wu(t)).Or.add(4),[4,Cp(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Tp(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new bp(n,r)};function Tp(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:if(!Op(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Cp(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ip(t,e){var n=wu(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Ap(n)?xp(n):zp(n).er()&&Sp(n,e))}function Ep(t,e){var n=wu(t),r=zp(n);n.$r.delete(e),r.er()&&kp(n,e),0===n.$r.size&&(r.er()?r.ir():Op(n)&&n.Br.set("Unknown"))}function Sp(t,e){t.qr.U(e.targetId),zp(t).mr(e)}function kp(t,e){t.qr.U(e),zp(t).yr(e)}function xp(t){t.qr=new Jl({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),zp(t).start(),t.Br.Sr()}function Ap(t){return Op(t)&&!zp(t).tr()&&t.$r.size>0}function Op(t){return 0===wu(t).Or.size}function Np(t){t.qr=void 0}function Pp(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){return t.$r.forEach(function(e,n){Sp(t,e)}),[2]})})}function Rp(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(n){return Np(t),Ap(t)?(t.Br.Nr(e),xp(t)):t.Br.set("Unknown"),[2]})})}function Dp(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof $l&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),gu("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Mp(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Zl?t.qr.X(e):e instanceof Ql?t.qr.rt(e):t.qr.et(e),n.isEqual(xu.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,xd(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Fu.EMPTY_BYTE_STRING,n.snapshotVersion)),kp(t,e);var r=new bf(n.target,e,1,n.sequenceNumber);Sp(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return gu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Mp(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Mp(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:if(!hf(e))throw e;return t.Or.add(1),[4,Cp(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return xd(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Jr.__awaiter)(r,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return gu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Tp(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Lp(t,e){return e().catch(function(n){return Mp(t,n,e)})}function Fp(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:e=wu(t),n=Kp(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Op(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Nd(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Kp(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Mp(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Up(e)&&jp(e),[2]}})})}function Up(t){return Op(t)&&!Kp(t).tr()&&t.kr.length>0}function jp(t){Kp(t).start()}function Vp(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){return Kp(t).Ar(),[2]})})}function qp(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Jr.__generator)(this,function(i){for(e=Kp(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Bp(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=_f.from(r,e,n),[4,Lp(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Fp(t)];case 2:return o.sent(),[2]}})})}function Hp(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return e&&Kp(t).pr?[4,function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return Ol(r=e.code)&&r!==hu.ABORTED?(n=t.kr.shift(),Kp(t).sr(),[4,Lp(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Fp(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Up(t)&&jp(t),[2]}})})}function Gp(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return n=wu(t),e?(n.Or.delete(2),[4,Tp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Cp(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function zp(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=wu(t);return r.br(),new mp(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Pp.bind(null,t),Ri:Rp.bind(null,t),_r:Dp.bind(null,t)}),t.Mr.push(function(n){return(0,Jr.__awaiter)(e,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Ap(t)?xp(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Np(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Kp(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=wu(t);return r.br(),new yp(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Vp.bind(null,t),Ri:Hp.bind(null,t),Ir:qp.bind(null,t),Tr:Bp.bind(null,t)}),t.Mr.push(function(n){return(0,Jr.__awaiter)(e,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Fp(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(gu("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Wp=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new of,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fu(hu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Yp(t,e){if(vu("AsyncQueue",e+": "+t),hf(t))return new fu(hu.UNAVAILABLE,e+": "+t);throw t}var Zp=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Yu.comparator(e.key,n.key)}:function(t,e){return Yu.comparator(t.key,e.key)},this.keyedMap=Vl(),this.sortedSet=new Pl(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Qp=function(){function t(){this.Qr=new Pl(Yu.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):_u():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),$p=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Zp.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Xp=function(){this.Wr=void 0,this.listeners=[]},Jp=function(){this.queries=new sd(function(t){return Gc(t)},Hc),this.onlineState="Unknown",this.Gr=new Set};function tg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Jr.__generator)(this,function(c){switch(c.label){case 0:if(n=wu(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Xp),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Yp(a,"Initialization of query '"+zc(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&ig(n),[2]}})})}function eg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Jr.__generator)(this,function(a){return n=wu(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function ng(t,e){for(var n=wu(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&ig(n)}function rg(t,e,n){var r=wu(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ig(t){t.Gr.forEach(function(t){t.next()})}var og=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new $p(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=$p.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),sg=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),ag=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return fh(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?yh(this.R,t.document,!1):hc.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return uh(t)},t}(),ug=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=cg(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new ag(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Gl()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return[4,Ud(this.localStore,new ag(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,jd(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new bd(Object.assign({},this.progress),t))]}})})},t}();function cg(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var lg=function(t){this.key=t},hg=function(t){this.key=t},fg=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Gl(),this.mutatedKeys=Gl(),this.lo=Wc(t),this.fo=new Zp(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Qp,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Mc(this.query)&&i.size===this.query.limit?i.last():null,c=Lc(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Kc(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Mc(this.query)||Lc(this.query))for(;s.size>this.query.limit;){var l=Mc(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _u()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new $p(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Qp,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Gl(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new hg(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new lg(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Gl();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return $p.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),dg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},pg=function(t){this.key=t,this.bo=!1},gg=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new sd(function(t){return Gc(t)},Hc),this.Vo=new Map,this.So=new Set,this.Do=new Pl(Yu.comparator),this.Co=new Map,this.No=new qd,this.xo={},this.Fo=new Map,this.ko=Yf.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function vg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return n=zg(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Pd(n.localStore,qc(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,mg(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Ip(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function mg(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Jr.__generator)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Dd(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Og(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Dd(t.localStore,e,!0)];case 1:return i=l.sent(),o=new fg(e,i.Bn),s=o._o(i.documents),a=Yl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Og(t,n,u.To),c=new dg(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function yg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return n=wu(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Hc(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Rd(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Ep(n.remoteStore,r.targetId),xg(n,r.targetId)}).catch(Jf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return xg(n,r.targetId),[4,Rd(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function _g(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:r=Kg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=wu(t),i=ku.now(),o=e.reduce(function(t,e){return t.add(e.key)},Gl());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ml(c,n.get(c.key));null!=l&&s.push(new wl(c.key,l,lc(l.value.mapValue),fl.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Pl(Iu)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Rg(r,i.changes)];case 3:return a.sent(),[4,Fp(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Yp(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function bg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:n=wu(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ad(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(bu(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?bu(r.bo):t.removedDocuments.size>0&&(bu(r.bo),r.bo=!1))}),[4,Rg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Jf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function wg(t,e,n){var r=wu(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=wu(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&ig(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Tg(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Jr.__generator)(this,function(c){switch(c.label){case 0:return(r=wu(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Pl(Yu.comparator)).insert(o,hc.newNoDocument(o,xu.min())),a=Gl().add(o),u=new Wl(xu.min(),new Map,new Ml(Iu),s,a),[4,bg(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Pg(r),[3,4];case 2:return[4,Rd(r.localStore,e,!1).then(function(){return xg(r,e,n)}).catch(Jf)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Cg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:n=wu(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,kd(n.localStore,e)];case 2:return i=o.sent(),kg(n,r,null),Sg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Rg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ig(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:r=wu(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=wu(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return bu(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),kg(r,e,n),Sg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Rg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Eg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:Op((n=wu(t)).remoteStore)||gu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=wu(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Yp(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Sg(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function kg(t,e,n){var r=wu(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function xg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Ag(t,e)})}function Ag(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ep(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Pg(t))}function Og(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof lg?(t.No.addReference(o.key,e),Ng(t,o)):o instanceof hg?(gu("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ag(t,o.key)):_u()}}function Ng(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(gu("SyncEngine","New document in limbo: "+n),t.So.add(r),Pg(t))}function Pg(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Yu(Ru.fromString(e)),r=t.ko.next();t.Co.set(r,new pg(n)),t.Do=t.Do.insert(n,r),Ip(t.remoteStore,new bf(qc(Dc(n.path)),r,2,lu.o))}}function Rg(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return r=wu(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Td.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Jr.__generator)(this,function(l){switch(l.label){case 0:n=wu(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return sf.forEach(e,function(e){return sf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return sf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!hf(r=l.sent()))throw r;return gu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Dg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return(n=wu(t)).currentUser.isEqual(e)?[3,3]:(gu("SyncEngine","User change. New user:",e.toKey()),[4,Sd(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new fu(hu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Rg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Mg(t,e){var n=wu(t),r=n.Co.get(e);if(r&&r.bo)return Gl().add(r.key);var i=Gl(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Lg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return[4,Dd((n=wu(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Og(n,e.targetId,i.To),i)]}})})}function Fg(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){return[2,Ld((e=wu(t)).localStore).then(function(t){return Rg(e,t)})]})})}function Ug(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=wu(t),r=wu(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):sf.resolve(null)})})}((i=wu(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Fp(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(kg(i,e,r||null),Sg(i,e),function(t,e){wu(wu(t)._n).Gt(e)}(i.localStore,e)):_u(),s.label=4;case 4:return[4,Rg(i,o)];case 5:return s.sent(),[3,7];case 6:gu("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function jg(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Jr.__generator)(this,function(c){switch(c.label){case 0:return zg(n=wu(t)),Kg(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Vg(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Gp(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Ip(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return xg(n,e),Rd(n.localStore,e,!0)}),Ep(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Vg(n,a)];case 5:return c.sent(),function(t){var e=wu(t);e.Co.forEach(function(t,n){Ep(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Pl(Yu.comparator)}(n),n.$o=!1,[4,Gp(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Vg(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,Jr.__generator)(this,function(g){switch(g.label){case 0:n=wu(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Pd(n.localStore,qc(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Lg(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Md(n.localStore,a)];case 8:return p=g.sent(),[4,Pd(n.localStore,p)];case 9:return u=g.sent(),[4,mg(n,qg(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function qg(t){return Rc(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Bg(t){var e=wu(t);return wu(wu(e.localStore).persistence).fn()}function Hg(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return(i=wu(t)).$o?(gu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ld(i.localStore)];case 3:return o=a.sent(),s=Wl.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Rg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Rd(i.localStore,e,!0)];case 6:return a.sent(),xg(i,e,r),[3,8];case 7:_u(),a.label=8;case 8:return[2]}})})}function Gg(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Jr.__generator)(this,function(f){switch(f.label){case 0:if(!(r=zg(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(gu("SyncEngine","Adding an already active target "+s),[3,5]):[4,Md(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Pd(r.localStore,a)];case 3:return u=f.sent(),[4,mg(r,qg(a),u.targetId,!1)];case 4:f.sent(),Ip(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Rd(r.localStore,t,!1).then(function(){Ep(r.remoteStore,t),xg(r,t)}).catch(Jf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function zg(t){var e=wu(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Tg.bind(null,e),e.vo._r=ng.bind(null,e.eventManager),e.vo.Mo=rg.bind(null,e.eventManager),e}function Kg(t){var e=wu(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ig.bind(null,e),e}function Wg(t,e,n){var r=wu(t);(function(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Jr.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=wu(t),r=uh(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.Ke.getBundleMetadata(t,e.id)}).then(function(t){return!!t&&t.createTime.compareTo(r)>=0})}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(cg(r)),i=new ug(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,Rg(t,a.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=wu(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.Ke.saveBundleMetadata(t,e)})}(t.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return mu("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var Yg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return this.R=pp(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Ed(this.persistence,new Cd,t.initialUser,this.R)},t.prototype.qo=function(t){return new Wd(Zd.bs,this.R)},t.prototype.Bo=function(t){return new sp},t.prototype.terminate=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Zg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Jr.__extends)(e,t),e.prototype.initialize=function(e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Fd(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Kg(this.Qo.syncEngine)];case 4:return n.sent(),[4,Fp(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return Ed(this.persistence,new Cd,t.initialUser,this.R)},e.prototype.Uo=function(t){return new nd(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=_d(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vf.withCacheSize(this.cacheSizeBytes):Vf.DEFAULT;return new vd(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,fp(),dp(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new sp},e}(Yg),Qg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Jr.__extends)(e,t),e.prototype.initialize=function(e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof op?(this.sharedClientState.syncEngine={ui:Ug.bind(null,n),ai:Hg.bind(null,n),hi:Gg.bind(null,n),fn:Bg.bind(null,n),ci:Fg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Jr.__awaiter)(r,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return[4,jg(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=fp();if(!op.yt(e))throw new fu(hu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=_d(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new op(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Zg),$g=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return wg(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Dg.bind(null,this.syncEngine),[4,Gp(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Jp},t.prototype.createDatastore=function(t){var e=pp(t.databaseInfo.databaseId),n=new hp(t.databaseInfo);return function(t,e,n){return new _p(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return wg(s.syncEngine,t,0)},o=up.yt()?new up:new ap,new wp(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new gg(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return e=wu(t),gu("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Cp(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();function Xg(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r;return(0,Jr.__generator)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Jg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),tv=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new of,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new sg(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),ev=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new fu(hu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Jr.__generator)(this,function(u){switch(u.label){case 0:return n=wu(t),r=gh(n.R)+"/documents",i={documents:e.map(function(t){return hh(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){bu(!!e.found);var n=fh(t,e.found.name),r=uh(e.found.updateTime),i=new cc({mapValue:{fields:e.found.fields}});return hc.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){bu(!!e.missing),bu(!!e.readTime);var n=fh(t,e.missing),r=uh(e.readTime);return hc.newNoDocument(n,r)}(t,e):_u()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());bu(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new kl(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e=this;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Yu.fromPath(n);e.mutations.push(new xl(r,e.precondition(r)))}),[4,function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return n=wu(t),r=gh(n.R)+"/documents",i={writes:e.map(function(t){return _h(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw _u();e=xu.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new fu(hu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?fl.updateTime(e):fl.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(xu.min()))throw new fu(hu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fl.updateTime(e)}return fl.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),nv=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new gp(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Jr.__awaiter)(t,void 0,void 0,function(){var t,e,n=this;return(0,Jr.__generator)(this,function(r){return t=new ev(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!zu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ol(e)}return!1},t}(),rv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Qd.UNAUTHENTICATED,this.clientId=Cu.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Jr.__awaiter)(r,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return gu("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new fu(hu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new of;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Jr.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Yp(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function iv(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),gu("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Jr.__awaiter)(i,void 0,void 0,function(){return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Sd(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function ov(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,sv(t)];case 1:return n=i.sent(),gu("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return(n=wu(t)).asyncQueue.verifyOperationInProgress(),gu("RemoteStore","RemoteStore received new credentials"),r=Op(n),n.Or.add(3),[4,Cp(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Tp(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function sv(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(gu("FirestoreClient","Using default OfflineComponentProvider"),[4,iv(t,new Yg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function av(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(gu("FirestoreClient","Using default OnlineComponentProvider"),[4,ov(t,new $g)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function uv(t){return sv(t).then(function(t){return t.persistence})}function cv(t){return sv(t).then(function(t){return t.localStore})}function lv(t){return av(t).then(function(t){return t.remoteStore})}function hv(t){return av(t).then(function(t){return t.syncEngine})}function fv(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,av(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=vg.bind(null,e.syncEngine),n.onUnlisten=yg.bind(null,e.syncEngine),n)]}})})}function dv(t,e,n){var r=this;void 0===n&&(n={});var i=new of;return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(r,void 0,void 0,function(){var r;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Jg({next:function(o){e.enqueueAndForget(function(){return eg(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new fu(hu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new fu(hu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new og(Dc(n.path),o,{includeMetadataChanges:!0,so:!0});return tg(t,s)},[4,fv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function pv(t,e,n){var r=this;void 0===n&&(n={});var i=new of;return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(r,void 0,void 0,function(){var r;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Jg({next:function(n){e.enqueueAndForget(function(){return eg(t,s)}),n.fromCache&&"server"===r.source?i.reject(new fu(hu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new og(n,o,{includeMetadataChanges:!0,so:!0});return tg(t,s)},[4,fv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var gv=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},vv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),mv=new Map,yv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},_v=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Qd.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),bv=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),wv=function(){function t(t){var e=this;this.currentUser=Qd.UNAUTHENTICATED,this.oc=new of,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){gu("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(gu("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(gu("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(bu("string"==typeof n.accessToken),new yv(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Jr.__awaiter)(n,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return bu(null===t||"string"==typeof t),new Qd(t)},t}(),Tv=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Qd.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Cv=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Tv(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Qd.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Iv(t,e,n){if(!n)throw new fu(hu.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ev(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new fu(hu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Sv(t,e,n,r){if(!0===e&&!0===r)throw new fu(hu.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function kv(t){if(!Yu.isDocumentKey(t))throw new fu(hu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function xv(t){if(Yu.isDocumentKey(t))throw new fu(hu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Av(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":_u()}function Ov(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fu(hu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Av(t);throw new fu(hu.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Nv(t,e){if(e<=0)throw new fu(hu.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Pv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new fu(hu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fu(hu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Sv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Rv=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pv({}),this._settingsFrozen=!1,t instanceof vv?(this._databaseId=t,this._credentials=new _v):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new fu(hu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vv(t.options.projectId)}(t),this._credentials=new wv(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new fu(hu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new fu(hu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new _v;switch(t.type){case"gapi":var e=t.client;return bu(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Cv(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new fu(hu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=mv.get(this))&&(gu("ComponentProvider","Removing Datastore"),mv.delete(this),t.terminate()),Promise.resolve();var t},t}(),Dv=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Lv(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Mv=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Lv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Dc(r))||this)._path=r,i.type="collection",i}return(0,Jr.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Dv(this.firestore,null,new Yu(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Mv);function Fv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,ti.getModularInstance)(t),Iv("collection","path",e),t instanceof Rv)return xv(n=Ru.fromString.apply(Ru,(0,Jr.__spreadArray)([e],r))),new Lv(t,null,n);if(!(t instanceof Dv||t instanceof Lv))throw new fu(hu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return xv(n=Ru.fromString.apply(Ru,(0,Jr.__spreadArray)([t.path],r)).child(Ru.fromString(e))),new Lv(t.firestore,null,n)}function Uv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,ti.getModularInstance)(t),1===arguments.length&&(e=Cu.u()),Iv("doc","path",e),t instanceof Rv)return kv(n=Ru.fromString.apply(Ru,(0,Jr.__spreadArray)([e],r))),new Dv(t,null,new Yu(n));if(!(t instanceof Dv||t instanceof Lv))throw new fu(hu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kv(n=t._path.child(Ru.fromString.apply(Ru,(0,Jr.__spreadArray)([e],r)))),new Dv(t.firestore,t instanceof Lv?t.converter:null,new Yu(n))}function jv(t,e){return t=(0,ti.getModularInstance)(t),e=(0,ti.getModularInstance)(e),(t instanceof Dv||t instanceof Lv)&&(e instanceof Dv||e instanceof Lv)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Vv(t,e){return t=(0,ti.getModularInstance)(t),e=(0,ti.getModularInstance)(e),t instanceof Mv&&e instanceof Mv&&t.firestore===e.firestore&&Hc(t._query,e._query)&&t.converter===e.converter}var qv=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new gp(this,"async_queue_retry"),this.Tc=function(){var e=dp();e&&gu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e=this;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!hf(t=n.sent()))throw t;return gu("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,vu("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=Wp.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&_u()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t;return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Bv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Hv=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new of,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Gv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new qv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Jr.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Kv(this),this._firestoreClient.terminate()},e}(Rv);function zv(t){return t._firestoreClient||Kv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Kv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new gv(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new rv(t._credentials,t._queue,r)}function Wv(t,e,n){var r=this,i=new of;return t.asyncQueue.enqueue(function(){return(0,Jr.__awaiter)(r,void 0,void 0,function(){var r;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,iv(t,n)];case 1:return o.sent(),[4,ov(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===hu.FAILED_PRECONDITION||t.code===hu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Yv(t){if(t._initialized||t._terminated)throw new fu(hu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Zv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new fu(hu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mu(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Qv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Fu.fromBase64String(e))}catch(e){throw new fu(hu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Fu.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),$v=function(t){this._methodName=t},Xv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new fu(hu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new fu(hu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Iu(this._lat,t._lat)||Iu(this._long,t._long)},t}(),Jv=/^__.*__$/,tm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new wl(t,this.data,this.fieldMask,e,this.fieldTransforms):new bl(t,this.data,e,this.fieldTransforms)},t}(),em=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new wl(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function nm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _u()}}var rm=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Cm(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(nm(this.Cc)&&Jv.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),im=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||pp(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new rm({Cc:t,methodName:e,Bc:n,path:Mu.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function om(t){var e=t._freezeSettings(),n=pp(t._databaseId);return new im(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sm(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);_m("Data must be an object, but it was:",s,r);var a,u,c=mm(r,s);if(o.merge)a=new Lu(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=bm(e,f[h],n);if(!s.contains(d))throw new fu(hu.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Im(l,d)||l.push(d)}a=new Lu(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new tm(new cc(c),a,u)}var am=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Jr.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}($v);function um(t,e,n){return new rm({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var cm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Jr.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new ll(t.path,new nl)},e.prototype.isEqual=function(t){return t instanceof e},e}($v),lm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Jr.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=um(this,t,!0),n=this.Uc.map(function(t){return vm(t,e)}),r=new rl(n);return new ll(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}($v),hm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Jr.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=um(this,t,!0),n=this.Uc.map(function(t){return vm(t,e)}),r=new ol(n);return new ll(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}($v),fm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Jr.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new al(t.R,$c(t.R,this.Kc));return new ll(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}($v);function dm(t,e,n,r){var i=t.qc(1,e,n);_m("Data must be an object, but it was:",i,r);var o=[],s=cc.empty();Ou(r,function(t,r){var a=Tm(e,t,n);r=(0,ti.getModularInstance)(r);var u=i.$c(a);if(r instanceof am)o.push(a);else{var c=vm(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Lu(o);return new em(s,a,i.fieldTransforms)}function pm(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[bm(e,r,n)],u=[i];if(o.length%2!=0)throw new fu(hu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(bm(e,o[c])),u.push(o[c+1]);for(var l=[],h=cc.empty(),f=a.length-1;f>=0;--f)if(!Im(l,a[f])){var d=a[f],p=u[f];p=(0,ti.getModularInstance)(p);var g=s.$c(d);if(p instanceof am)l.push(d);else{var v=vm(p,g);null!=v&&(l.push(d),h.set(d,v))}}var m=new Lu(l);return new em(h,m,s.fieldTransforms)}function gm(t,e,n,r){return void 0===r&&(r=!1),vm(n,t.qc(r?4:3,e))}function vm(t,e){if(ym(t=(0,ti.getModularInstance)(t)))return _m("Unsupported field value:",e,t),mm(t,e);if(t instanceof $v)return function(t,e){if(!nm(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=vm(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,ti.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $c(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ku.fromDate(t);return{timestampValue:oh(e.R,n)}}if(t instanceof ku)return n=new ku(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:oh(e.R,n)};if(t instanceof Xv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qv)return{bytesValue:sh(e.R,t._byteString)};if(t instanceof Dv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ch(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Av(t))}(t,e)}function mm(t,e){var n={};return Nu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(t,function(t,r){var i=vm(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function ym(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ku||t instanceof Xv||t instanceof Qv||t instanceof Dv||t instanceof $v)}function _m(t,e,n){if(!ym(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Av(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function bm(t,e,n){if((e=(0,ti.getModularInstance)(e))instanceof Zv)return e._internalPath;if("string"==typeof e)return Tm(t,e);throw Cm("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var wm=new RegExp("[~\\*/\\[\\]]");function Tm(t,e,n){if(e.search(wm)>=0)throw Cm("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Zv.bind.apply(Zv,(0,Jr.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(Cy){throw Cm("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cm(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new fu(hu.INVALID_ARGUMENT,(a+=". ")+t+u)}function Im(t,e){return t.some(function(t){return t.isEqual(e)})}var Em=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Dv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Sm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(km("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Sm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Jr.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Em);function km(t,e){return"string"==typeof e?Tm(t,e):e instanceof Zv?e._internalPath:e._delegate._internalPath}var xm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Am=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Jr.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Om(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(km("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Em),Om=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Jr.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Am),Nm=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new xm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Om(n._firestore,n._userDataWriter,r.key,r,new xm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fu(hu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Om(t._firestore,t._userDataWriter,e.doc.key,e.doc,new xm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Om(t._firestore,t._userDataWriter,e.doc.key,e.doc,new xm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Pm(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Pm(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _u()}}function Rm(t,e){return t instanceof Am&&e instanceof Am?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Nm&&e instanceof Nm&&t._firestore===e._firestore&&Vv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Dm(t){if(Lc(t)&&0===t.explicitOrderBy.length)throw new fu(hu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Mm=function(){};function Lm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Fm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,Jr.__extends)(e,t),e.prototype._apply=function(t){var e=om(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new fu(hu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Gm(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Hm(r,t,l[c]));a={arrayValue:{values:u}}}else a=Hm(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Gm(s,o),a=gm(n,"where",s,"in"===o||"not-in"===o);var h=mc.create(i,o,a);return function(t,e){if(e.g()){var n=Uc(t);if(null!==n&&!n.isEqual(e.field))throw new fu(hu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Fc(t);null!==r&&zm(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new fu(hu.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new Mv(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Mm),Um=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return(0,Jr.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new fu(hu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new fu(hu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new xc(e,n);return function(t,e){if(null===Fc(t)){var n=Uc(t);null!==n&&zm(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new Mv(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Pc(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Mm),jm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,Jr.__extends)(e,t),e.prototype._apply=function(t){return new Mv(t.firestore,t.converter,Bc(t._query,this.zc,this.Hc))},e}(Mm),Vm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Jr.__extends)(e,t),e.prototype._apply=function(t){var e=Bm(t,this.type,this.Jc,this.Yc);return new Mv(t.firestore,t.converter,function(t,e){return new Pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Mm),qm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Jr.__extends)(e,t),e.prototype._apply=function(t){var e=Bm(t,this.type,this.Jc,this.Yc);return new Mv(t.firestore,t.converter,function(t,e){return new Pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Mm);function Bm(t,e,n,r){if(n[0]=(0,ti.getModularInstance)(n[0]),n[0]instanceof Em)return function(t,e,n,r,i){if(!r)throw new fu(hu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Vc(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(nc(e,r.key));else{var c=r.data.field(u.field);if(Bu(c))throw new fu(hu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new fu(hu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Sc(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=om(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new fu(hu.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new fu(hu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!jc(t)&&-1!==c.indexOf("/"))throw new fu(hu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ru.fromString(c));if(!Yu.isDocumentKey(l))throw new fu(hu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Yu(l);a.push(nc(e,h))}else{var f=gm(n,r,c);a.push(f)}}return new Sc(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Hm(t,e,n){if("string"==typeof(n=(0,ti.getModularInstance)(n))){if(""===n)throw new fu(hu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!jc(e)&&-1!==n.indexOf("/"))throw new fu(hu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ru.fromString(n));if(!Yu.isDocumentKey(r))throw new fu(hu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return nc(t,new Yu(r))}if(n instanceof Dv)return nc(t,n._key);throw new fu(hu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Av(n)+".")}function Gm(t,e){if(!Array.isArray(t)||0===t.length)throw new fu(hu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new fu(hu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function zm(t,e,n){if(!n.isEqual(e))throw new fu(hu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Km=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Zu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vu(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(qu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw _u()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ou(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Xv(Vu(t.latitude),Vu(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Hu(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Gu(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ju(t);return new ku(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ru.fromString(t);bu(Dh(n));var r=new vv(n.get(1),n.get(3)),i=new Yu(n.popFirst(5));return r.isEqual(e)||vu("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Wm(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Ym=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Jr.__extends)(e,t),e.prototype.convertBytes=function(t){return new Qv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Dv(this.firestore,null,e)},e}(Km),Zm=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=om(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Qm(t,this._firestore),i=Wm(r.converter,e,n),o=sm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,fl.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Qm(t,this._firestore);return o="string"==typeof(e=(0,ti.getModularInstance)(e))||e instanceof Zv?pm(this._dataReader,"WriteBatch.update",s._key,e,n,r):dm(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,fl.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Qm(t,this._firestore);return this._mutations=this._mutations.concat(new kl(e._key,fl.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new fu(hu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Qm(t,e){if((t=(0,ti.getModularInstance)(t)).firestore!==e)throw new fu(hu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var $m=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Jr.__extends)(e,t),e.prototype.convertBytes=function(t){return new Qv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Dv(this.firestore,null,e)},e}(Km);function Xm(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ov(t,Dv);var o=Ov(t.firestore,Gv),s=om(o);return ty(o,[("string"==typeof(e=(0,ti.getModularInstance)(e))||e instanceof Zv?pm(s,"updateDoc",t._key,e,n,r):dm(s,"updateDoc",t._key,e)).toMutation(t._key,fl.exists(!0))])}function Jm(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,ti.getModularInstance)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Bv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Bv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Dv)c=Ov(t.firestore,Gv),l=Dc(t._key.path),u={next:function(e){i[a]&&i[a](ey(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Ov(t,Mv);c=Ov(d.firestore,Gv),l=d._query;var p=new $m(c);u={next:function(t){i[a]&&i[a](new Nm(c,p,d,t))},error:i[a+1],complete:i[a+2]},Dm(t._query)}return function(t,e,n,r){var i=this,o=new Jg(r),s=new og(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(i,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return e=tg,[4,fv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(i,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return e=eg,[4,fv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(zv(c),l,h,u)}function ty(t,e){return function(t,e){var n=this,r=new of;return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(n,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return n=_g,[4,hv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(zv(t),e)}function ey(t,e,n){var r=n.docs.get(e._key),i=new $m(t);return new Am(t,i,e._key,r,new xm(n.hasPendingWrites,n.fromCache),e.converter)}var ny=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Jr.__extends)(e,t),e.prototype.get=function(e){var n=this,r=Qm(e,this._firestore),i=new $m(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Am(n._firestore,i,r._key,t._document,new xm(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=om(t)}return t.prototype.get=function(t){var e=this,n=Qm(t,this._firestore),r=new Ym(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return _u();var i=t[0];if(i.isFoundDocument())return new Em(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Em(e._firestore,r,n._key,null,n.converter);throw _u()})},t.prototype.set=function(t,e,n){var r=Qm(t,this._firestore),i=Wm(r.converter,e,n),o=sm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Qm(t,this._firestore);return o="string"==typeof(e=(0,ti.getModularInstance)(e))||e instanceof Zv?pm(this._dataReader,"Transaction.update",s._key,e,n,r):dm(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Qm(t,this._firestore);return this._transaction.delete(e._key),this},t}());function ry(){if("undefined"==typeof Uint8Array)throw new fu(hu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function iy(){if("undefined"==typeof atob)throw new fu(hu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var oy=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return iy(),new t(Qv.fromBase64String(e))},t.fromUint8Array=function(e){return ry(),new t(Qv.fromUint8Array(e))},t.prototype.toBase64=function(){return iy(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ry(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),sy=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Yv(t=Ov(t,Gv));var n=zv(t),r=t._freezeSettings(),i=new $g;return Wv(n,i,new Zg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Yv(t=Ov(t,Gv));var e=zv(t),n=t._freezeSettings(),r=new $g;return Wv(e,r,new Qg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new fu(hu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new of;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Jr.__awaiter)(e,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return uf.yt()?[4,uf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(_d(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),ay=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof vv||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||mu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Ov(t,Rv))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&mu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,ti.createMockUserToken)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new fu(hu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new bv(new yv(o,new Qd(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Jr.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,uv(t)];case 1:return e=r.sent(),[4,lv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=wu(t);return e.Or.delete(0),Tp(e)}(n))]}})})})}(zv(Ov(this._delegate,Gv)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Jr.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,uv(t)];case 1:return e=r.sent(),[4,lv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return(e=wu(t)).Or.add(0),[4,Cp(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(zv(Ov(this._delegate,Gv)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Sv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new of;return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(e,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return e=Eg,[4,hv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(zv(Ov(this._delegate,Gv)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Jg(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(n,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){wu(t).Gr.add(e),e.next()},[4,fv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(n,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){wu(t).Gr.delete(e)},[4,fv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(zv(t=Ov(t,Gv)),Bv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new fu(hu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wy(this,Fv(this._delegate,t))}catch(t){throw dy(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new fy(this,Uv(this._delegate,t))}catch(t){throw dy(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new yy(this,function(t,e){if(t=Ov(t,Rv),Iv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fu(hu.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Mv(t,null,function(t){return new Pc(Ru.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw dy(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new of;return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(n,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,function(t){return av(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new nv(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(zv(t),function(n){return e(new ny(t,n))})}(this._delegate,function(n){return t(new cy(e,n))})},t.prototype.batch=function(){var t=this;return zv(this._delegate),new ly(new Zm(this._delegate,function(e){return ty(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new fu(hu.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new fu(hu.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),uy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Jr.__extends)(e,t),e.prototype.convertBytes=function(t){return new oy(new Qv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return fy.tu(e,this.firestore,null)},e}(Km),cy=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new uy(t)}return t.prototype.get=function(t){var e=this,n=Ty(t);return this._delegate.get(n).then(function(t){return new vy(e._firestore,new Am(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Ty(t);return n?(Ev("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ty(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Jr.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Ty(t);return this._delegate.delete(e),this},t}(),ly=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Ty(t);return n?(Ev("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ty(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Jr.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Ty(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),hy=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Om(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new my(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new uy(e),n),i.set(n,o)),o},t}();hy.nu=new WeakMap;var fy=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new uy(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new fu(hu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Dv(n._delegate,r,new Yu(e)))},t.tu=function(e,n,r){return new t(n,new Dv(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wy(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wy(this.firestore,Fv(this._delegate,t))}catch(t){throw dy(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,ti.getModularInstance)(t))instanceof Dv&&jv(this._delegate,t)},t.prototype.set=function(t,e){e=Ev("DocumentReference.set",e);try{return function(t,e,n){t=Ov(t,Dv);var r=Ov(t.firestore,Gv),i=Wm(t.converter,e,n);return ty(r,[sm(om(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,fl.none())])}(this._delegate,t,e)}catch(t){throw dy(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Xm(this._delegate,t):Xm.apply(void 0,(0,Jr.__spreadArray)([this._delegate,t,e],n))}catch(t){throw dy(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return ty(Ov((t=this._delegate).firestore,Gv),[new kl(t._key,fl.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=py(e),i=gy(e,function(e){return new vy(t.firestore,new Am(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Jm(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ov(t,Dv);var e=Ov(t.firestore,Gv),n=zv(e),r=new $m(e);return function(t,e){var n=this,r=new of;return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(n,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=wu(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new fu(hu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Yp(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,cv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Am(e,r,t._key,n,new xm(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ov(t,Dv);var e=Ov(t.firestore,Gv);return dv(zv(e),t._key,{source:"server"}).then(function(n){return ey(e,t,n)})}(this._delegate):function(t){t=Ov(t,Dv);var e=Ov(t.firestore,Gv);return dv(zv(e),t._key).then(function(n){return ey(e,t,n)})}(this._delegate)).then(function(t){return new vy(e.firestore,new Am(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?hy.eu(this.firestore,e):null))},t}();function dy(t,e,n){return t.message=t.message.replace(e,n),t}function py(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Bv(r))return r}return{}}function gy(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Bv(t[0])?t[0]:Bv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var vy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new fy(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Rm(this._delegate,t._delegate)},t}(),my=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Jr.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(vy),yy=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new uy(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Lm(this._delegate,function(t,e,n){var r=e,i=km("where",t);return new Fm(i,r,n)}(e,n,r)))}catch(e){throw dy(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Lm(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=km("orderBy",t);return new Um(r,n)}(e,n)))}catch(e){throw dy(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Lm(this._delegate,function(t){return Nv("limit",t),new jm("limit",t,"F")}(e)))}catch(e){throw dy(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Lm(this._delegate,function(t){return Nv("limitToLast",t),new jm("limitToLast",t,"L")}(e)))}catch(e){throw dy(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Lm(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vm("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw dy(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Lm(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vm("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw dy(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Lm(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qm("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw dy(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Lm(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qm("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw dy(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Vv(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ov(t,Mv);var e=Ov(t.firestore,Gv),n=zv(e),r=new $m(e);return function(t,e){var n=this,r=new of;return t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(n,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Jr.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Dd(t,e,!0)];case 1:return a=u.sent(),r=new fg(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Yp(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,cv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Nm(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ov(t,Mv);var e=Ov(t.firestore,Gv),n=zv(e),r=new $m(e);return pv(n,t._query,{source:"server"}).then(function(n){return new Nm(e,r,t,n)})}(this._delegate):function(t){t=Ov(t,Mv);var e=Ov(t.firestore,Gv),n=zv(e),r=new $m(e);return Dm(t._query),pv(n,t._query).then(function(n){return new Nm(e,r,t,n)})}(this._delegate)).then(function(t){return new by(e.firestore,new Nm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=py(e),i=gy(e,function(e){return new by(t.firestore,new Nm(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Jm(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?hy.eu(this.firestore,e):null))},t}(),_y=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new my(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),by=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new yy(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new my(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new _y(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new my(n._firestore,r))})},t.prototype.isEqual=function(t){return Rm(this._delegate,t._delegate)},t}(),wy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Jr.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new fy(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new fy(this.firestore,void 0===t?Uv(this._delegate):Uv(this._delegate,t))}catch(t){throw dy(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ov(t.firestore,Gv),r=Uv(t),i=Wm(t.converter,e);return ty(n,[sm(om(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,fl.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new fy(e.firestore,t)})},e.prototype.isEqual=function(t){return jv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?hy.eu(this.firestore,t):null))},e}(yy);function Ty(t){return Ov(t,Dv)}var Cy,Iy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Zv.bind.apply(Zv,(0,Jr.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(Mu.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,ti.getModularInstance)(t))instanceof Zv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ey=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new cm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new am("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lm("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hm("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new fm("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Sy=n(6034),ky={Firestore:ay,GeoPoint:Xv,Timestamp:ku,Blob:oy,Transaction:cy,WriteBatch:ly,DocumentReference:fy,DocumentSnapshot:vy,Query:yy,QueryDocumentSnapshot:my,QuerySnapshot:by,CollectionReference:wy,FieldPath:Iy,FieldValue:Ey,setLogLevel:function(t){du.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Sy.Component("firestore",function(t){return function(t,e){return new ay(t,new Gv(t,e),new sy)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},ky)))})(Cy=Xr.default),Cy.registerVersion("@firebase/firestore","2.3.8");var xy=n(6682),Ay=n(7771),Oy=n(8858);class Ny extends U.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Py(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new j.N;if(this.isStopped||this.hasError?o=Vt.w.EMPTY:(this.observers.push(t),o=new Oy.W(this,t)),r&&t.add(t=new Zr.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ay.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Py{constructor(t,e){this.time=t,this.value=e}}function Ry(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Ny(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Dy(t,e){return e?at(()=>t,e):at(()=>t)}var My=n(3101);const Ly=new i.OlP("angularfire2.auth.use-emulator"),Fy=new i.OlP("angularfire2.auth.settings"),Uy=new i.OlP("angularfire2.auth.tenant-id"),jy=new i.OlP("angularfire2.auth.langugage-code"),Vy=new i.OlP("angularfire2.auth.use-device-language"),qy=new i.OlP("angularfire.auth.persistence");let By=(()=>{class t{constructor(t,e,i,o,s,a,u,c,l,h){const f=new Qr.HU(o),d=(0,Qr.ss)(f),p=new U.xQ,g=(0,F.of)(void 0).pipe((0,Zr.QV)(f.outsideAngular),at(()=>o.runOutsideAngular(()=>n.e(952).then(n.bind(n,1952)))),(0,ot.U)(()=>(0,Qr.on)(t,o,e)),(0,ot.U)(t=>o.runOutsideAngular(()=>{const e=s,n=a;return(0,Qr.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=o.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),u&&(r.tenantId=u),r.languageCode=c,l&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return h&&r.setPersistence(h),r},[e,u,c,l,n,h])})),Ry({bufferSize:1,refCount:!1}));if((0,r.PM)(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,F.of)(null);else{g.pipe(Ft()).subscribe();const t=g.pipe(at(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Ry({bufferSize:1,refCount:!1})),e=t=>new W.y(e=>({unsubscribe:o.runOutsideAngular(()=>t(e))})),n=g.pipe(at(t=>e(t.onAuthStateChanged.bind(t)))),r=g.pipe(at(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Dy(n),(0,My.R)(f.outsideAngular),(0,Zr.QV)(f.insideAngular)),this.user=t.pipe(Dy(r),(0,My.R)(f.outsideAngular),(0,Zr.QV)(f.insideAngular)),this.idToken=this.user.pipe(at(t=>t?(0,L.D)(t.getIdToken()):(0,F.of)(null))),this.idTokenResult=this.user.pipe(at(t=>t?(0,L.D)(t.getIdTokenResult()):(0,F.of)(null))),this.credential=(0,xy.T)(t,p,this.authState.pipe(yt(t=>!t))).pipe((0,ot.U)(t=>(null==t?void 0:t.user)?t:null),(0,My.R)(f.outsideAngular),(0,Zr.QV)(f.insideAngular))}return(0,Qr.pX)(this,g,o,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>p.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(Qr.Dh),i.LFG(Qr.xv,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(Ly,8),i.LFG(Fy,8),i.LFG(Uy,8),i.LFG(jy,8),i.LFG(Vy,8),i.LFG(qy,8))},t.\u0275prov=i.Yz7({factory:function(){return new t(i.LFG(Qr.Dh),i.LFG(Qr.xv,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(Ly,8),i.LFG(Fy,8),i.LFG(Uy,8),i.LFG(jy,8),i.LFG(Vy,8),i.LFG(qy,8))},token:t,providedIn:"any"}),t})(),Hy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[By]}),t})();function Gy(t,e){return function(t,e=Br.z){return new W.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function zy(t,e){return Gy(t,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function Ky(t,e){return zy(t,e).pipe(pt(void 0),Hr(),(0,ot.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Wy(t,e,n){return Ky(t,n).pipe(gt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Yy(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Yy(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Yy(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Kr(),(0,ot.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Yy(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Zy(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Qy{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Ky(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ot.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(pt(void 0),Hr(),yt(([t,e])=>e.length>0||!t),(0,ot.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(gt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Zy(t);return Wy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return zy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,L.D)(this.query.get(t)).pipe((0,Zr.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new $y(this.ref.doc(t),this.afs)}}class $y{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=r_(n,e);return new Qy(r,i,this.afs)}snapshotChanges(){return function(t,e){return Gy(t,e).pipe(pt(void 0),Hr(),(0,ot.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,L.D)(this.ref.get(t)).pipe((0,Zr.QV)(this.afs.schedulers.insideAngular))}}class Xy{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Ky(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),yt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Ky(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(gt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Zy(t);return Wy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return zy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,L.D)(this.query.get(t)).pipe((0,Zr.QV)(this.afs.schedulers.insideAngular))}}const Jy=new i.OlP("angularfire2.enableFirestorePersistence"),t_=new i.OlP("angularfire2.firestore.persistenceSettings"),e_=new i.OlP("angularfire2.firestore.settings"),n_=new i.OlP("angularfire2.firestore.use-emulator");function r_(t,e=(t=>t)){return{query:e(t),ref:t}}let i_=(()=>{class t{constructor(t,e,n,i,o,s,a,u,c){this.schedulers=new Qr.HU(s),this.keepUnstableUntilFirst=(0,Qr.ss)(this.schedulers);const l=(0,Qr.on)(t,s,e);!$r.Z.auth&&c&&(0,Qr.yq)();const h=u;[this.firestore,this.persistenceEnabled$]=(0,Qr.sI)(`${l.name}.firestore`,"AngularFirestore",l,()=>{const t=s.runOutsideAngular(()=>l.firestore());if(i&&t.settings(i),h&&t.useEmulator(...h),n&&!(0,r.PM)(o)){const e=()=>{try{return(0,L.D)(t.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(Cy){return"undefined"!=typeof console&&console.warn(Cy),(0,F.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,F.of)(!1)]},[i,h,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=r_(n,e),o=this.schedulers.ngZone.run(()=>r);return new Qy(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Xy(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new $y(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(Qr.Dh),i.LFG(Qr.xv,8),i.LFG(Jy,8),i.LFG(e_,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(t_,8),i.LFG(n_,8),i.LFG(Ly,8))},t.\u0275prov=i.Yz7({factory:function(){return new t(i.LFG(Qr.Dh),i.LFG(Qr.xv,8),i.LFG(Jy,8),i.LFG(e_,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(t_,8),i.LFG(n_,8),i.LFG(Ly,8))},token:t,providedIn:"any"}),t})(),o_=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Jy,useValue:!0},{provide:t_,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[i_]}),t})(),s_=(()=>{class t{constructor(t){this.fireservices=t,this.input$=new U.xQ,this.checkedTags$=new U.xQ,this.base$=new U.xQ,this.filterParametres="",this.newBase=[],this.baseOfTags=[],this.input$.subscribe(t=>this.filterParametres=t),this.checkedTags$.subscribe(t=>this.chosenTags=t),this.firstDB()}firstDB(){console.log("fires"),this.checkDB().toPromise().then(t=>{t.forEach(t=>{const e={img:t.data().img,title:t.data().title,preview:t.data().preview,id:t.id,contents:t.data().contents,tags:t.data().tags,author:t.data().author,subTitles:t.data().subTitles};this.newBase.push(e)})}).then(()=>this.base$.next(this.newBase))}createDB(){this.newBase=[],this.baseOfTags=[],this.checkDB().toPromise().then(t=>{t.forEach(t=>{const e={img:t.data().img,title:t.data().title,preview:t.data().preview,id:t.id,contents:t.data().contents,tags:t.data().tags,author:t.data().author,subTitles:t.data().subTitles};let n;this.chosenTags&&(n=t.data().tags.some(t=>this.chosenTags.some(e=>t==e)));const r=t.data().title.toLowerCase().includes(this.filterParametres.toLowerCase());0!==t.data().tags.length&&t.data().tags.forEach(t=>this.baseOfTags.push(t)),r&&0===this.chosenTags.length?(console.log(this.chosenTags),this.newBase.push(e)):r&&0!==this.chosenTags.length&&n&&this.newBase.push(e)})}).then(()=>this.base$.next(this.newBase))}changeCount(t){this.input$.next(t)}checkDB(){return this.fireservices.collection("articles").get()}getTags(){return this.baseOfTags}SearchWithInput(t,e){this.input$.next(t),this.checkedTags$.next(e),this.createDB()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i_))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),a_=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-footer"]],decls:19,vars:0,consts:[[1,"footer_about"],[1,"footer_nav"],[1,"footer_menu"],["href","##"],["src","./assets/images/facebook.png","alt",""],["src","./assets/images/instagram.png","alt",""],["src","./assets/images/telegram.png","alt",""],[2,"font-size","16px","color","#F2C94C"]],template:function(t,e){1&t&&(i.TgZ(0,"footer"),i.TgZ(1,"div",0),i.TgZ(2,"p"),i._uU(3,"2021 \xa9 LeverX, Int. All Rights Reserved."),i.qZA(),i.qZA(),i.TgZ(4,"nav",1),i.TgZ(5,"ul",2),i.TgZ(6,"li"),i.TgZ(7,"a",3),i._UZ(8,"img",4),i.qZA(),i.qZA(),i.TgZ(9,"li"),i.TgZ(10,"a",3),i._UZ(11,"img",5),i.qZA(),i.qZA(),i.TgZ(12,"li"),i.TgZ(13,"a",3),i._UZ(14,"img",6),i.qZA(),i.qZA(),i.TgZ(15,"li"),i.TgZ(16,"a",3),i.TgZ(17,"span",7),i._uU(18,"Support"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA())},styles:["[_nghost-%COMP%]{display:block;width:100%;background:#333}.footer_article[_ngcontent-%COMP%]{max-width:1152px;margin:0 auto;justify-content:flex-end}footer[_ngcontent-%COMP%]{height:80px;max-width:1280px;margin:0 auto}.footer_menu[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.footer_menu[_ngcontent-%COMP%]{width:235px}.footer_about[_ngcontent-%COMP%], .footer_nav[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})();function u_(t,e){if(1&t&&(i.TgZ(0,"div"),i.TgZ(1,"h5"),i._uU(2),i.qZA(),i.TgZ(3,"p",11),i._uU(4),i.qZA(),i.qZA()),2&t){const t=e.$implicit,n=e.index,r=i.oxw(2).$implicit;i.xp6(2),i.hij(" ",t,""),i.xp6(2),i.hij(" ",r.contents[n],"")}}function c_(t,e){if(1&t&&(i.TgZ(0,"div",12),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.xp6(1),i.hij(" ",t," ")}}function l_(t,e){if(1&t&&(i.TgZ(0,"div",7),i._UZ(1,"img",8),i.YNc(2,u_,5,2,"div",5),i._UZ(3,"hr"),i.TgZ(4,"address"),i._uU(5),i.qZA(),i.TgZ(6,"div",9),i.YNc(7,c_,2,1,"div",10),i.qZA(),i.qZA()),2&t){const t=i.oxw().$implicit;i.xp6(1),i.s9C("src",t.img,i.LSH),i.xp6(1),i.Q6J("ngForOf",t.subTitles),i.xp6(3),i.Oqu(t.author),i.xp6(2),i.Q6J("ngForOf",t.tags)}}function h_(t,e){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,l_,8,4,"div",6),i.qZA()),2&t){const t=e.$implicit,n=i.oxw();i.xp6(1),i.Q6J("ngIf",n.pageId===t.id)}}let f_=(()=>{class t{constructor(t,e,n){this.route=t,this.service=e,this.router=n,this.base=this.service.newBase,this.pageId=this.route.snapshot.params.id}ngOnInit(){this.service.filterParametres="",this.service.chosenTags=[],this.service.createDB()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(Qe),i.Y36(s_),i.Y36(_r))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-article-page"]],decls:13,vars:1,consts:[[1,"article_wrapper"],[1,"navigation_list"],[1,"navigation_list__item"],["routerLink",""],["href","##",1,"article_active"],[4,"ngFor","ngForOf"],["class","centered_content",4,"ngIf"],[1,"centered_content"],["alt","",1,"article_picture",3,"src"],[1,"article_tags_list"],["class","article_tags",4,"ngFor","ngForOf"],[1,"article_text"],[1,"article_tags"]],template:function(t,e){1&t&&(i.TgZ(0,"main"),i.TgZ(1,"div",0),i.TgZ(2,"div",1),i.TgZ(3,"div",2),i.TgZ(4,"h6"),i.TgZ(5,"a",3),i._uU(6,"Home page"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(7,"div",2),i.TgZ(8,"h6"),i.TgZ(9,"a",4),i._uU(10,"Article"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.YNc(11,h_,2,1,"div",5),i.qZA(),i.qZA(),i._UZ(12,"app-footer")),2&t&&(i.xp6(11),i.Q6J("ngForOf",e.base))},directives:[br,r.sg,a_,r.O5],styles:['.article_wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:1152px;margin:0 auto}.navigation_list[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:50px 0}h6[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:600;font-size:18px;line-height:24px;color:#828282}.navigation_list__item[_ngcontent-%COMP%] + .navigation_list__item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]:before{content:"";background-image:url(arrow_nav.9a1f45d65060391a3e08.svg);padding:10px 20px;background-repeat:no-repeat;background-position:50%}.article_active[_ngcontent-%COMP%]{color:#333}.article_picture[_ngcontent-%COMP%]{object-fit:contain;max-width:1152px;height:468px;margin-bottom:50px}h3[_ngcontent-%COMP%]{font-size:42px;line-height:56px;letter-spacing:-.005em;color:#333;margin-bottom:50px}h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-weight:700;display:flex}h5[_ngcontent-%COMP%]{font-size:24px;line-height:132%;align-items:center}.article_text[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{color:#4f4f4f;margin-bottom:30px}.article_text[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:150%;letter-spacing:.0168em;font-feature-settings:"tnum" on,"lnum" on}.centered_content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.article_tags_list[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:flex-start;margin-bottom:60px;flex-wrap:wrap}.article_tags[_ngcontent-%COMP%]{width:auto;padding:8px 24px;background-color:#fff;color:#000;border-radius:40px;box-shadow:0 6px 8px #eaedf280;white-space:nowrap;margin:0 3px 3px;-webkit-user-select:none;user-select:none;cursor:pointer}address[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:150%;letter-spacing:.005em;font-feature-settings:"tnum" on,"lnum" on;font-style:normal;color:#333;margin-bottom:40px}.tags_list[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:flex-start;margin-bottom:60px;flex-wrap:wrap}']}),t})();var d_;n(6423),n(9192),(d_=ay).prototype.loadBundle=function(t){return function(t,e){var n=zv(t=Ov(t,Gv)),r=new Hv;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new tv(t,e)}(function(t,e){if(t instanceof Uint8Array)return Xg(t,e);if(t instanceof ArrayBuffer)return Xg(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,pp(e));t.asyncQueue.enqueueAndForget(function(){return(0,Jr.__awaiter)(i,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return e=Wg,[4,hv(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t._databaseId,e,r),r}(this._delegate,t)},d_.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue(function(){return(0,Jr.__awaiter)(n,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=wu(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Ke.getNamedQuery(t,e)})},[4,cv(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(zv(e=Ov(e,Gv)),n).then(function(t){return t?new Mv(e,null,t.query):null})).then(function(t){return t?new yy(r,t):null})};var p_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},g_=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,Jr.__extends)(e,t),e}(Error),v_=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t;return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getContext=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function m_(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var y_,__,b_,w_=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return m_(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?m_(t,function(t){return e.decode(t)}):t},t}(),T_=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new w_,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new v_(e,n),this.cancelAllRequests=new Promise(function(t){s.deleteService=function(){return t()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(Cy){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},t.prototype.getAppCheckToken=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t;return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype.call=function(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,f;return(0,Jr.__generator)(this,function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new g_("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([C_(u,this.postJSON(r,i,o)),c,C_(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new g_("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!p_[a])return new g_("internal","internal");r=p_[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(Cy){}return"ok"===r?null:new g_(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new g_("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new g_("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},t}();function C_(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}y_=Xr.default,__=fetch.bind(self),b_={Functions:T_},y_.INTERNAL.registerComponent(new Sy.Component("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new T_(r,i,s,o,n,__)},"PUBLIC").setServiceProps(b_).setMultipleInstances(!0)),Xr.default.registerVersion("@firebase/functions","0.6.13");var I_,E_=n(6676),S_="w:0.4.30",k_=((I_={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',I_["not-registered"]="Firebase Installation is not registered.",I_["installation-not-found"]="Firebase Installation not found.",I_["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',I_["app-offline"]="Could not process request. Application offline.",I_["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",I_),x_=new ti.ErrorFactory("installations","Installations",k_);function A_(t){return t instanceof ti.FirebaseError&&t.code.includes("request-failed")}function O_(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function N_(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function P_(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,x_.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function R_(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function D_(t,e){var n=e.refreshToken,r=R_(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function M_(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function L_(t,e){var n=e.fid;return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return e=O_(t),r=R_(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:S_})},[4,M_(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:N_(s.authToken)}];case 3:return[4,P_("Create Installation",o)];case 4:throw a.sent()}})})}function F_(t){return new Promise(function(e){setTimeout(e,t)})}var U_=/^[cdef][\w-]{21}$/;function j_(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,Jr.__spreadArray)([],(0,Jr.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return U_.test(e)?e:""}catch(um){return""}}function V_(t){return t.appName+"!"+t.appId}var q_=new Map;function B_(t,e){var n=V_(t);H_(n,e),function(t,e){var n=z_();n&&n.postMessage({key:t,fid:e}),K_()}(n,e)}function H_(t,e){var n,r,i=q_.get(t);if(i)try{for(var o=(0,Jr.__values)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var G_=null;function z_(){return!G_&&"BroadcastChannel"in self&&((G_=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){H_(t.data.key,t.data.fid)}),G_}function K_(){0===q_.size&&G_&&(G_.close(),G_=null)}var W_,Y_="firebase-installations-store",Z_=null;function Q_(){return Z_||(Z_=(0,E_.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Y_)}})),Z_}function $_(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return n=V_(t),[4,Q_()];case 1:return r=a.sent(),i=r.transaction(Y_,"readwrite"),[4,(o=i.objectStore(Y_)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||B_(t,e.fid),[2,e]}})})}function X_(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return e=V_(t),[4,Q_()];case 1:return n=i.sent(),[4,(r=n.transaction(Y_,"readwrite")).objectStore(Y_).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function J_(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Jr.__generator)(this,function(u){switch(u.label){case 0:return n=V_(t),[4,Q_()];case 1:return r=u.sent(),i=r.transaction(Y_,"readwrite"),[4,(o=i.objectStore(Y_)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||B_(t,a.fid),[2,a]}})})}function tb(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,J_(t,function(n){var r=function(t){return rb(t||{fid:j_(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(x_.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,L_(t,e)];case 1:return n=i.sent(),[2,$_(t,n)];case 2:return A_(r=i.sent())&&409===r.customData.serverCode?[4,X_(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,$_(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:eb(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function eb(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return[4,nb(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,F_(100)];case 3:return o.sent(),[4,nb(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,tb(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function nb(t){return J_(t,function(t){if(!t)throw x_.create("installation-not-found");return rb(t)})}function rb(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function ib(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,i,o,s,a;return(0,Jr.__generator)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return O_(t)+"/"+n+"/authTokens:generate"}(n,e),i=D_(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:S_}})},[4,M_(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,N_(u.sent())];case 3:return[4,P_("Generate Auth Token",a)];case 4:throw u.sent()}})})}function ob(t,e){return void 0===e&&(e=!1),(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return[4,J_(t.appConfig,function(r){if(!ab(r))throw x_.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,sb(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,F_(100)];case 3:return i.sent(),[4,sb(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ob(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw x_.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,Jr.__assign)((0,Jr.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,ib(t,e)];case 1:return n=o.sent(),i=(0,Jr.__assign)((0,Jr.__assign)({},e),{authToken:n}),[4,$_(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!A_(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,X_(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,Jr.__assign)((0,Jr.__assign)({},e),{authToken:{requestStatus:0}}),[4,$_(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function sb(t){return J_(t,function(t){if(!ab(t))throw x_.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?(0,Jr.__assign)((0,Jr.__assign)({},t),{authToken:{requestStatus:0}}):t})}function ab(t){return void 0!==t&&2===t.registrationStatus}function ub(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return[4,tb(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function cb(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return O_(t)+"/"+n}(t,e),r=D_(t,e),i={method:"DELETE",headers:r},[4,M_(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,P_("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function lb(t){return x_.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Sy.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw lb("App Configuration");if(!t.name)throw lb("App Name");try{for(var r=(0,Jr.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw lb(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,tb(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):ob(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return[4,ub(t.appConfig)];case 1:return n.sent(),[4,ob(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,J_(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw x_.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw x_.create("app-offline");case 3:return[4,cb(e,n)];case 4:return r.sent(),[4,X_(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){z_();var n=V_(t),r=q_.get(n);r||(r=new Set,q_.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=V_(t),r=q_.get(n);r&&(r.delete(e),0===r.size&&q_.delete(n),K_())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.30")}(Xr.default);var hb=((W_={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W_["only-available-in-window"]="This method is available in a Window context.",W_["only-available-in-sw"]="This method is available in a service worker context.",W_["permission-default"]="The notification permission was not granted and dismissed instead.",W_["permission-blocked"]="The notification permission was not granted and blocked instead.",W_["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",W_["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",W_["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",W_["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",W_["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",W_["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",W_["token-update-no-token"]="FCM returned no token when updating the user to push.",W_["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",W_["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",W_["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",W_["invalid-vapid-key"]="The public VAPID key must be a string.",W_["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",W_),fb=new ti.ErrorFactory("messaging","Messaging",hb),db="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pb=(()=>(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(pb||(pb={})),pb))();function gb(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,(0,Jr.__spreadArray)([],(0,Jr.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vb(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var mb="fcm_token_details_db",yb="fcm_token_object_Store";function _b(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(mb))return[2,null];r.label=2;case 2:return e=null,[4,(0,E_.openDb)(mb,5,function(r){return(0,Jr.__awaiter)(n,void 0,void 0,function(){var n,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(yb)?[4,(n=r.transaction.objectStore(yb)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:gb(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:gb(o.auth),p256dh:gb(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:gb(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,(0,E_.deleteDb)(mb)];case 4:return r.sent(),[4,(0,E_.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,E_.deleteDb)("undefined")];case 6:return r.sent(),[2,bb(e)?e:null]}})})}function bb(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var wb="firebase-messaging-store",Tb=null;function Cb(){return Tb||(Tb=(0,E_.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(wb)}})),Tb}function Ib(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return e=kb(t),[4,Cb()];case 1:return[4,i.sent().transaction(wb).objectStore(wb).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,_b(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Eb(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function Eb(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return n=kb(t),[4,Cb()];case 1:return r=o.sent(),[4,(i=r.transaction(wb,"readwrite")).objectStore(wb).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function Sb(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return e=kb(t),[4,Cb()];case 1:return n=i.sent(),[4,(r=n.transaction(wb,"readwrite")).objectStore(wb).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function kb(t){return t.appConfig.appId}function xb(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return[4,Pb(t)];case 1:n=a.sent(),r=Rb(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Nb(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),fb.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw fb.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw fb.create("token-subscribe-no-token");return[2,o.token]}})})}function Ab(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return[4,Pb(t)];case 1:n=a.sent(),r=Rb(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Nb(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),fb.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw fb.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw fb.create("token-update-no-token");return[2,o.token]}})})}function Ob(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return[4,Pb(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Nb(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw fb.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),fb.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function Nb(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Pb(t){var e=t.appConfig,n=t.installations;return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function Rb(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==db&&(n.web.applicationPubKey=e),n}function Db(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw fb.create("permission-blocked");return[4,Ub(e,n)];case 1:return r=a.sent(),[4,Ib(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:gb(r.getKey("auth")),p256dh:gb(r.getKey("p256dh"))},i?[3,3]:[2,Fb(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,Ob(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,Fb(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,Lb({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function Mb(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,Ib(t)];case 1:return(n=i.sent())?[4,Ob(t,n.token)]:[3,4];case 2:return i.sent(),[4,Sb(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function Lb(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,Ab(e,t)];case 1:return r=s.sent(),i=(0,Jr.__assign)((0,Jr.__assign)({},t),{token:r,createTime:Date.now()}),[4,Eb(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,Mb(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function Fb(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,xb(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Eb(t,r)];case 2:return i.sent(),[2,r.token]}})})}function Ub(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vb(e)})]}})})}function jb(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function Vb(t){return new Promise(function(e){setTimeout(e,t)})}var qb=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw fb.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Ib(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:db,r.label=2;case 2:return[2,Db(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return Mb(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw fb.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw fb.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw fb.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw fb.create("only-available-in-window")},t.prototype.onMessage=function(){throw fb.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw fb.create("only-available-in-window")},t.prototype.onPush=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,zb()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,Gb(n,e)]:(r=!1,e.notification?[4,Kb(Bb(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Vb(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Mb(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Ib(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Mb(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Db(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:db)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Jr.__generator)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(jb(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,Hb(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,Vb(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=pb.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function Bb(t){var e,n=(0,Jr.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function Hb(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return(0,Jr.__generator)(this,function(u){switch(u.label){case 0:return[4,zb()];case 1:e=u.sent();try{for(n=(0,Jr.__values)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function Gb(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=pb.PUSH_RECEIVED;try{for(var i=(0,Jr.__values)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function zb(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Kb(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Wb=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===pb.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),jb(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw fb.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Db(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=db),[2]})})},t.prototype.updateSwReg=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw fb.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),fb.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Mb(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t;return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw fb.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw fb.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw fb.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw fb.create("invalid-sw-registration");if(this.swRegistration)throw fb.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw fb.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw fb.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case pb.NOTIFICATION_CLICKED:return"notification_open";case pb.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function Yb(t){return fb.create("missing-app-config-values",{valueName:t})}var Zb={isSupported:Qb};function Qb(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Xr.default.INTERNAL.registerComponent(new Sy.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Yb("App Configuration Object");if(!t.name)throw Yb("App Name");var r=t.options;try{for(var i=(0,Jr.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw Yb(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Qb())throw fb.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new qb(n):new Wb(n)},"PUBLIC").setServiceProps(Zb));var $b="firebasestorage.googleapis.com",Xb=function(t){function e(n,r){var i=t.call(this,Jb(n),"Firebase Storage: "+r+" ("+Jb(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Jr.__extends)(e,t),e.prototype._codeEquals=function(t){return Jb(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(ti.FirebaseError);function Jb(t){return"storage/"+t}function tw(){return new Xb("unknown","An unknown error occurred, please check the error payload for server response.")}function ew(){return new Xb("canceled","User canceled the upload/download.")}function nw(){return new Xb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rw(t){return new Xb("invalid-argument",t)}function iw(){return new Xb("app-deleted","The Firebase app was deleted.")}function ow(t){return new Xb("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sw(t,e){return new Xb("invalid-format","String does not match format '"+t+"': "+e)}function aw(t){throw new Xb("internal-error","Internal error: "+t)}var uw={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},cw=function(t,e){this.data=t,this.contentType=e||null};function lw(t,e){switch(t){case uw.RAW:return new cw(hw(e));case uw.BASE64:case uw.BASE64URL:return new cw(fw(t,e));case uw.DATA_URL:return new cw((n=new dw(e)).base64?fw(uw.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Cy){throw sw(uw.DATA_URL,"Malformed data URL.")}return hw(e)}(n.rest),new dw(e).contentType)}var n;throw tw()}function hw(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function fw(t,e){switch(t){case uw.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw sw(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case uw.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw sw(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Cy){throw sw(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var dw=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw sw(uw.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},pw={STATE_CHANGED:"state_changed"},gw={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vw(t){switch(t){case"running":case"pausing":case"canceling":return gw.RUNNING;case"paused":return gw.PAUSED;case"success":return gw.SUCCESS;case"canceled":return gw.CANCELED;case"error":default:return gw.ERROR}}var mw=(()=>(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(mw||(mw={})),mw))(),yw=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=mw.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=mw.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=mw.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw aw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw aw("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw aw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Cy){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw aw("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),_w=function(){function t(){}return t.prototype.createConnection=function(){return new yw},t}(),bw=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Cy){return new t(e,"")}if(""===r.path)return r;throw new Xb("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===$b?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new Xb("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),ww=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Tw(t){return"string"==typeof t||t instanceof String}function Cw(t){return Iw()&&t instanceof Blob}function Iw(){return"undefined"!=typeof Blob}function Ew(t,e,n,r){if(r<e)throw rw("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw rw("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Sw(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function kw(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var xw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(Cy){o(Cy)}else null!==s?((r=tw()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?iw():ew():new Xb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Aw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Aw(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===mw.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Aw(s,r))}else{var a=r.getErrorCode()===mw.ABORT;e(!1,new Aw(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Jr.__spreadArray)([null,t],e));else{var r;u()||s?l.call.apply(l,(0,Jr.__spreadArray)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Aw=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function Ow(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Nw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ow();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Iw())return new Blob(t);throw new Xb("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Pw=function(){function t(t,e){var n=0,r="";Cw(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Cw(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Iw()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Nw.apply(null,r))}var i=e.map(function(t){return Tw(t)?lw(uw.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Rw(t){var e;try{e=JSON.parse(t)}catch(Cy){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Dw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Mw(t,e){return e}var Lw=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Mw},Fw=null;function Uw(){if(Fw)return Fw;var t=[];t.push(new Lw("bucket")),t.push(new Lw("generation")),t.push(new Lw("metageneration")),t.push(new Lw("name","fullPath",!0));var e=new Lw("name");e.xform=function(t,e){return function(t){return!Tw(t)||t.length<2?t:Dw(t)}(e)},t.push(e);var n=new Lw("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Lw("timeCreated")),t.push(new Lw("updated")),t.push(new Lw("md5Hash",null,!0)),t.push(new Lw("cacheControl",null,!0)),t.push(new Lw("contentDisposition",null,!0)),t.push(new Lw("contentEncoding",null,!0)),t.push(new Lw("contentLanguage",null,!0)),t.push(new Lw("contentType",null,!0)),t.push(new Lw("metadata","customMetadata",!0)),Fw=t}function jw(t,e,n){var r=Rw(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new bw(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Vw(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var qw=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Bw(t){if(!t)throw tw()}function Hw(t,e){return function(n,r){var i=jw(t,r,e);return Bw(null!==i),i}}function Gw(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new Xb("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Xb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Xb("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Xb("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function zw(t){var e=Gw(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Xb("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Kw(t,e,n){var r=Sw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new qw(r,"GET",Hw(t,n),i);return o.errorHandler=zw(e),o}function Ww(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Yw=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Zw(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Cy){Bw(!1)}return Bw(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Qw=262144,$w=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function Xw(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var Jw=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Uw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Ww(e,r,i),a={name:s.fullPath},u=Sw(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Vw(s,n),h=new qw(u,"POST",function(t){var e;Zw(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Cy){Bw(!1)}return Bw(Tw(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Gw(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new qw(n,"POST",function(t){var e=Zw(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Cy){Bw(!1)}n||Bw(!1);var i=Number(n);return Bw(!isNaN(i)),new Yw(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Gw(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=Qw*this._chunkMultiplier,n=new Yw(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new Yw(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Xb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,h+l);if(null===d)throw nw();var p=new qw(n,"POST",function(t,n){var i,s=Zw(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Hw(e,o)(t,n):null,new Yw(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=Gw(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Cy){return t._error=Cy,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){Qw*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=Kw(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Ww(e,r,i),c=Vw(u,n),l=Pw.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw nw();var h={name:u.fullPath},f=Sw(o,t.host),d=t.maxUploadRetryTime,p=new qw(f,"POST",Hw(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Gw(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=ew(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=vw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new $w(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(vw(this._state)){case gw.SUCCESS:Xw(this._resolve.bind(null,this.snapshot))();break;case gw.CANCELED:case gw.ERROR:Xw(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(vw(this._state)){case gw.RUNNING:case gw.PAUSED:t.next&&Xw(t.next.bind(t,this.snapshot))();break;case gw.SUCCESS:t.complete&&Xw(t.complete.bind(t))();break;case gw.CANCELED:case gw.ERROR:t.error&&Xw(t.error.bind(t,this._error))();break;default:t.error&&Xw(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),tT=function(){function t(t,e){this._service=t,this._location=e instanceof bw?e:bw.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new bw(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Dw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new bw(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw ow(t)},t}();function eT(t){var e={prefixes:[],items:[]};return nT(t,e).then(function(){return e})}function nT(t,e,n){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return[4,rT(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,nT(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function rT(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Ew("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Sw(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new qw(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Rw(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new bw(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new bw(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return Bw(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Gw(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function iT(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new bw(t._location.bucket,n);return new tT(t.storage,r)}function oT(t){return/^[A-Za-z]+:\/\//.test(t)}function sT(t,e){if(t instanceof cT){var n=t;if(null==n._bucket)throw new Xb("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new tT(n,n._bucket);return null!=e?sT(r,e):r}if(void 0!==e){if(e.includes(".."))throw rw('`path` param cannot contain ".."');return iT(t,e)}return t}function aT(t,e){if(e&&oT(e)){if(t instanceof cT)return new tT(t,e);throw rw("To use ref(service, url), the first argument must be a Storage instance.")}return sT(t,e)}function uT(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:bw.makeFromBucketSpec(n,t)}var cT=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=$b,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?bw.makeFromBucketSpec(i,this._host):uT(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?bw.makeFromBucketSpec(this._url,t):uT(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Ew("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Ew("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t;return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new tT(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new ww(iw());var i=function(t,e,n,r,i,o){var s=kw(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new xw(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function lT(t,e){return aT(t=(0,ti.getModularInstance)(t),e)}var hT=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),fT=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new hT(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new hT(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new hT(t,i,i._ref))}:{next:e.next?function(t){return e.next(new hT(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),dT=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new pT(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new pT(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),pT=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return iT(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new fT(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Jw(t,new Pw(e),n)}(t=(0,ti.getModularInstance)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=uw.RAW),this._throwIfRoot("putString");var r=lw(e,t),i=(0,Jr.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new fT(new Jw(this._delegate,new Pw(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return eT(t=(0,ti.getModularInstance)(t))}(this._delegate).then(function(e){return new dT(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return rT(t=(0,ti.getModularInstance)(t),e)}(this._delegate,t||void 0).then(function(t){return new dT(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Kw(t.storage,t._location,Uw()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,ti.getModularInstance)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Sw(e.fullServerUrl(),t.host),o=Vw(n,r),s=t.maxOperationRetryTime,a=new qw(i,"PATCH",Hw(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=zw(e),a}(t.storage,t._location,e,Uw()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,ti.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Sw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new qw(r,"GET",function(t,e){return function(n,r){var i=jw(t,r,e);return Bw(null!==i),function(t,e,n){var r=Rw(e);if(null===r)return null;if(!Tw(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return Sw("/b/"+o(t.bucket)+"/o/"+o(r),n)+kw({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=zw(e),o}(t.storage,t._location,Uw()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new Xb("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,ti.getModularInstance)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Sw(e.fullServerUrl(),t.host),r=new qw(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=zw(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,ti.getModularInstance)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw ow(t)},t}(),gT=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(oT(t))throw rw("ref() expected a child path but got a URL, use refFromURL instead.");return new pT(lT(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!oT(t))throw rw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{bw.makeFromUrl(t,this._delegate.host)}catch(Cy){throw rw("refFromUrl() expected a valid full URL but got an invalid one.")}return new pT(lT(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function vT(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new gT(r,new cT(r,i,o,new _w,n,Xr.default.SDK_VERSION))}!function(t){var e={TaskState:gw,TaskEvent:pw,StringFormat:uw,Storage:cT,Reference:pT};t.INTERNAL.registerComponent(new Sy.Component("storage",vT,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.6")}(Xr.default);var mT,yT,_T,bT="0.4.16",wT=bT,TT="FB-PERF-TRACE-MEASURE",CT="_wt_",IT="_fcp",ET="_fid",ST="@firebase/performance/config",kT="@firebase/performance/configexpire",xT="Performance",AT=((mT={})["trace started"]="Trace {$traceName} was started before.",mT["trace stopped"]="Trace {$traceName} is not running.",mT["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",mT["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",mT["no window"]="Window is not available.",mT["no app id"]="App id is not available.",mT["no project id"]="Project id is not available.",mT["no api key"]="Api key is not available.",mT["invalid cc log"]="Attempted to queue invalid cc event",mT["FB not default"]="Performance can only start when Firebase app instance is the default one.",mT["RC response not ok"]="RC response is not ok",mT["invalid attribute name"]="Attribute name {$attributeName} is invalid.",mT["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",mT["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",mT["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",mT),OT=new ti.ErrorFactory("performance",xT,AT),NT=new ei.Logger(xT);NT.logLevel=ei.LogLevel.INFO;var PT,RT=function(){function t(t){if(this.window=t,!t)throw OT.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,ti.isIndexedDBAvailable)()||(NT.info("IndexedDB is not supported by current browswer"),!1):(NT.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===yT&&(yT=new t(_T)),yT},t}();function DT(t,e){var n=t.length-e.length;if(n<0||n>1)throw OT.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var MT,LT=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=DT("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=DT("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw OT.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw OT.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw OT.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===PT&&(PT=new t),PT},t}();function FT(){return MT}var UT=(()=>(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(UT||(UT={})),UT))(),jT=["firebase_","google_","ga_"],VT=new RegExp("^[a-zA-Z]\\w*$");function qT(){var t=RT.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function BT(){switch(RT.getInstance().document.visibilityState){case"visible":return UT.VISIBLE;case"hidden":return UT.HIDDEN;default:return UT.UNKNOWN}}function HT(){var t=RT.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function GT(t){if(!t)return t;var e=LT.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=zT(e.tracesSamplingRate),e.logNetworkAfterSampling=zT(e.networkRequestsSamplingRate),t}function zT(t){return Math.random()<=t}var KT,WT=1;function YT(){return WT=2,KT=KT||function(){var t=RT.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=LT.getInstance().installationsService.getId()).then(function(t){MT=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=RT.getInstance().localStorage;if(t){var e=t.getItem(kT);if(e&&Number(e)>Date.now()){var n=t.getItem(ST);if(n)try{return JSON.parse(n)}catch(um){return}}}}();return e?(GT(e),Promise.resolve()):function(t){return(e=LT.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+LT.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+LT.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:LT.getInstance().getAppId(),app_version:wT,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw OT.create("RC response not ok")})}).catch(function(){NT.info("Could not fetch config, will use default configs")});var e}(t).then(GT).then(function(t){return function(t){var e=RT.getInstance().localStorage;t&&e&&(e.setItem(ST,JSON.stringify(t)),e.setItem(kT,String(Date.now()+60*LT.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return ZT()},function(){return ZT()})}function ZT(){WT=3}var QT,$T=1e4,XT=3,JT=[],tC=!1;function eC(t){setTimeout(function(){var t,e;if(0!==XT)return JT.length?(e=(t=JT.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=LT.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||NT.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=$T;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(JT=(0,Jr.__spreadArray)((0,Jr.__spreadArray)([],e),JT),NT.info("Retry transport request later.")),XT=3,eC(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:LT.getInstance().logSource,log_event:e},t).catch(function(){JT=(0,Jr.__spreadArray)((0,Jr.__spreadArray)([],t),JT),XT--,NT.info("Tries left: "+XT+"."),eC($T)})):eC($T)},t)}function nC(t){if(!t.eventTime||!t.message)throw OT.create("invalid cc log");JT=(0,Jr.__spreadArray)((0,Jr.__spreadArray)([],JT),[t])}function rC(t,e){QT||(QT=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];nC({message:t.apply(void 0,e),eventTime:Date.now()})}}(sC)),QT(t,e)}function iC(t){var e=LT.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&RT.getInstance().requiredApisAvailable()&&(t.isAuto&&BT()!==UT.VISIBLE||(3===WT?oC(t):YT().then(function(){return oC(t)},function(){return oC(t)})))}function oC(t){if(FT()){var e=LT.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return rC(t,1)},0)}}function sC(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:aC(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:aC(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function aC(){return{google_app_id:LT.getInstance().getAppId(),app_instance_id:FT(),web_app_info:{sdk_version:wT,page_url:RT.getInstance().getUrl(),service_worker_status:qT(),visibility_state:BT(),effective_connection_type:HT()},application_process_state:0}}var uC=["_fp",IT,ET],cC=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=RT.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw OT.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw OT.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),iC(this)},t.prototype.record=function(t,e,n){if(t<=0)throw OT.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw OT.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=(0,Jr.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}iC(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(CT)&&uC.indexOf(i)>-1)&&i.startsWith("_"))throw OT.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&NT.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||jT.some(function(t){return n.startsWith(t)})||!n.match(VT)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw OT.create("invalid attribute name",{attributeName:t});if(!i)throw OT.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return(0,Jr.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=RT.getInstance().getUrl();if(i){var o=new t(CT+i,!0),s=Math.floor(1e3*RT.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(IT,Math.floor(1e3*u.startTime)),r&&o.putMetric(ET,Math.floor(1e3*r))}iC(o)}},t.createUserTimingTrace=function(e){iC(new t(e,!1,e))},t}();function lC(t){var e=t;if(e&&void 0!==e.responseStart){var n=RT.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=LT.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return rC(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function hC(){FT()&&(setTimeout(function(){return function(){var t=RT.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){cC.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),cC.createOobTrace(e,n,t))})}else cC.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=RT.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)lC(n[e]);t.setupObserver("resource",lC)}()},0),setTimeout(function(){return function(){for(var t=RT.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)fC(n[e]);t.setupObserver("measure",fC)}()},0))}function fC(t){var e=t.name;e.substring(0,TT.length)!==TT&&cC.createUserTimingTrace(e)}var dC=function(){function t(t){this.app=t,RT.getInstance().requiredApisAvailable()&&(0,ti.validateIndexedDBOpenable)().then(function(t){t&&(tC||(eC(5500),tC=!0),YT().then(hC,hC))}).catch(function(t){NT.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new cC(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return LT.getInstance().instrumentationEnabled},set:function(t){LT.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return LT.getInstance().dataCollectionEnabled},set:function(t){LT.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Sy.Component("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw OT.create("FB not default");if("undefined"==typeof window)throw OT.create("no window");return function(t){_T=t}(window),LT.getInstance().firebaseAppInstance=t,LT.getInstance().installationsService=e,new dC(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",bT)}(Xr.default);var pC,gC="https://www.googletagmanager.com/gtag/js",vC=(()=>(function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(vC||(vC={})),vC))(),mC=(()=>(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(mC||(mC={})),mC))(),yC=new ei.Logger("@firebase/analytics");function _C(t,e,n,r,i,o){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var s,a,u,c;return(0,Jr.__generator)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),yC.error(c),[3,8];case 8:return t(vC.CONFIG,i,o),[2]}})})}function bC(t,e,n,r,i){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return(0,Jr.__generator)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(vC.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),yC.error(h),[3,5];case 5:return[2]}})})}var wC=((pC={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",pC["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",pC["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",pC["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",pC["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",pC["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",pC["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",pC["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',pC["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',pC),TC=new ti.ErrorFactory("analytics","Analytics",wC),CC=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function IC(t){var e;return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Jr.__generator)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw TC.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function EC(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=CC),(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return(0,Jr.__generator)(this,function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,SC(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return yC.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,IC(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof ti.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return yC.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?(0,ti.calculateBackoffMillis)(o,r.intervalMillis,30):(0,ti.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),yC.debug("Calling attemptFetch again in "+l+" millis"),[2,EC(t,h,n,r)];case 7:return[2]}})})}function SC(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(TC.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var kC,xC,AC=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),OC={},NC=[],PC={},RC="dataLayer",DC="gtag",MC=!1;function LC(t){if(MC)throw TC.create("already-initialized");t.dataLayerName&&(RC=t.dataLayerName),t.gtagName&&(DC=t.gtagName)}var FC="analytics";function UC(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:if((0,ti.isBrowserExtension)())return[2,!1];if(!(0,ti.areCookiesEnabled)())return[2,!1];if(!(0,ti.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,ti.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new Sy.Component(FC,function(t){return function(t,e){!function(){var t=[];if((0,ti.isBrowserExtension)()&&t.push("This is a browser extension environment."),(0,ti.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=TC.create("invalid-analytics-context",{errorInfo:e});yC.warn(n.message)}}();var n=t.options.appId;if(!n)throw TC.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw TC.create("no-api-key");yC.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=OC[n])throw TC.create("already-exists",{id:n});if(!MC){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(RC);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var a;return(0,Jr.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==vC.EVENT?[3,2]:[4,bC(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==vC.CONFIG?[3,4]:[4,_C(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(vC.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),yC.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(OC,NC,PC,RC,DC);xC=r.wrappedGtag,kC=r.gtagCore,MC=!0}return OC[n]=function(t,e,n,r,i,o){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var s,a,u,c,l,h,f;return(0,Jr.__generator)(this,function(d){switch(d.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=CC),(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return(0,Jr.__generator)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw TC.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw TC.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new AC,setTimeout(function(){return(0,Jr.__awaiter)(u,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){return a.abort(),[2]})})},6e4),[2,EC({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&yC.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return yC.error(t)}),e.push(s),a=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t;return(0,Jr.__generator)(this,function(e){switch(e.label){case 0:return(0,ti.isIndexedDBAvailable)()?[3,1]:(yC.warn(TC.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,ti.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),yC.warn(TC.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(gC))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=gC+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(vC.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,NC,PC,e,kC,RC),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var o,s;return(0,Jr.__generator)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(vC.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=(0,Jr.__assign)((0,Jr.__assign)({},r),{send_to:o}),t(vC.EVENT,n,s),a.label=3;case 3:return[2]}})})})(xC,OC[n],t,e,r).catch(function(t){return yC.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(vC.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(vC.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(xC,OC[n],t,e).catch(function(t){return yC.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i;return(0,Jr.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(vC.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(vC.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(xC,OC[n],t,e).catch(function(t){return yC.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Jr.__generator)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(vC.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(vC.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(xC,OC[n],t,e).catch(function(t){return yC.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(OC[n],t).catch(function(t){return yC.error(t)})},INTERNAL:{delete:function(){return delete OC[n],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:LC,EventName:mC,isSupported:UC})),t.INTERNAL.registerComponent(new Sy.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(FC).getImmediate().logEvent}}catch(Cy){throw TC.create("interop-component-reg-failed",{reason:Cy})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.14")}(Xr.default);var jC,VC=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),qC=((jC={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",jC["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",jC["registration-api-key"]="Undefined API key. Check Firebase app initialization.",jC["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",jC["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",jC["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",jC["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",jC["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",jC["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",jC["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',jC["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',jC["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",jC["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",jC),BC=new ti.ErrorFactory("remoteconfig","Remote Config",qC),HC=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,f,d,p,g,v;return(0,Jr.__generator)(this,function(m){switch(m.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=m.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),m.label=2;case 2:return m.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return m.sent(),[4,s];case 4:return u=m.sent(),[3,6];case 5:throw c=m.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),BC.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,m.label=7;case 7:return m.trys.push([7,9,,10]),[4,u.json()];case 8:return g=m.sent(),[3,10];case 9:throw v=m.sent(),BC.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:d=g.entries,p=g.state,m.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw BC.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var y})})},t}(),GC=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),zC=["1","true","t","yes","y","on"],KC=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&zC.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),WC=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ei.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=ei.LogLevel.SILENT;break;default:this._logger.logLevel=ei.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e,n;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:t=new GC,setTimeout(function(){return(0,Jr.__awaiter)(r,void 0,void 0,function(){return(0,Jr.__generator)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof ti.FirebaseError&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){return(0,Jr.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys((0,Jr.__assign)((0,Jr.__assign)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new KC("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new KC("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new KC("static"))},t}();function YC(t,e){var n=t.target.error||void 0;return BC.create(e,{originalErrorMessage:n&&n.message})}var ZC="app_namespace_store",QC=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(YC(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(ZC,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([ZC],"readonly").objectStore(ZC),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(YC(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(Cy){i(BC.create("storage-get",{originalErrorMessage:Cy&&Cy.message}))}})]}})})},t.prototype.set=function(t,e){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,Jr.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([ZC],"readwrite").objectStore(ZC),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(YC(t,"storage-set"))},u.onsuccess=function(){i()}}catch(Cy){o(BC.create("storage-set",{originalErrorMessage:Cy&&Cy.message}))}})]}})})},t.prototype.delete=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Jr.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([ZC],"readwrite").objectStore(ZC),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(YC(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(Cy){i(BC.create("storage-delete",{originalErrorMessage:Cy&&Cy.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),$C=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function XC(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(BC.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var JC,tI=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e;return(0,Jr.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return(0,Jr.__awaiter)(this,void 0,void 0,function(){var e,i,o;return(0,Jr.__generator)(this,function(s){switch(s.label){case 0:return[4,XC(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof ti.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,ti.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),eI="@firebase/remote-config";(JC=Xr.default).INTERNAL.registerComponent(new Sy.Component("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw BC.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw BC.create("registration-project-id");if(!a)throw BC.create("registration-api-key");if(!u)throw BC.create("registration-app-id");var c=new QC(u,r.name,n=n||"firebase"),l=new $C(c),h=new ei.Logger(eI);h.logLevel=ei.LogLevel.ERROR;var f=new HC(i,JC.SDK_VERSION,n,s,a,u),d=new tI(f,c),p=new VC(d,c,l,h),g=new WC(r,p,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),JC.registerVersion(eI,"0.1.41"),n(7367);var nI="8.7.1";Xr.default.registerVersion("firebase",nI,"app"),Xr.default.SDK_VERSION=nI,console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Xr.default.registerVersion("firebase","8.7.1");let rI=(()=>{class t{constructor(t){this.router=t}googleLogin(){const t=new Xr.default.auth.GoogleAuthProvider;this.user?(this.router.navigate([""]),Xr.default.auth().signOut()):Xr.default.auth().signInWithPopup(t).then(t=>{}).catch(t=>{console.log(t)})}ngOnInit(){Xr.default.auth().onAuthStateChanged(t=>{t?(console.log(t),this.user=t):this.user=null})}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(_r))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),iI=(()=>{class t{constructor(t){this.router=t,this.user$=new U.xQ,this.user$.subscribe(t=>this.user=t)}check(){return Xr.default.auth().onAuthStateChanged(t=>{t?this.user$.next(!0):(this.router.navigate(["autorization"]),this.user$.next(!1))}),this.user$}canLoad(t,e){return this.check()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(_r))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var oI=n(1555);function sI(t,e){return new W.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,L.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let aI=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.Qsj),i.Y36(i.SBq))},t.\u0275dir=i.lG2({type:t}),t})(),uI=(()=>{class t extends aI{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=i.n5z(t)))(n||t)}}(),t.\u0275dir=i.lG2({type:t,features:[i.qOj]}),t})();const cI=new i.OlP("NgValueAccessor"),lI={provide:cI,useExisting:(0,i.Gpc)(()=>hI),multi:!0};let hI=(()=>{class t extends uI{writeValue(t){this.setProperty("checked",t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=i.n5z(t)))(n||t)}}(),t.\u0275dir=i.lG2({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&i.NdJ("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[i._Bn([lI]),i.qOj]}),t})();const fI={provide:cI,useExisting:(0,i.Gpc)(()=>pI),multi:!0},dI=new i.OlP("CompositionEventMode");let pI=(()=>{class t extends aI{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=(0,r.q)()?(0,r.q)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(dI,8))},t.\u0275dir=i.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&i.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[i._Bn([fI]),i.qOj]}),t})();const gI=new i.OlP("NgValidators"),vI=new i.OlP("NgAsyncValidators");function mI(t){return null!=t}function yI(t){const e=(0,i.QGY)(t)?(0,L.D)(t):t;return(0,i.CqO)(e),e}function _I(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function bI(t,e){return e.map(e=>e(t))}function wI(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function TI(t){return null!=t?function(t){if(!t)return null;const e=t.filter(mI);return 0==e.length?null:function(t){return _I(bI(t,e))}}(wI(t)):null}function CI(t){return null!=t?function(t){if(!t)return null;const e=t.filter(mI);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,B.k)(e))return sI(e,null);if((0,oI.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return sI(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return sI(t=1===t.length&&(0,B.k)(t[0])?t[0]:t,null).pipe((0,ot.U)(t=>e(...t)))}return sI(t,null)}(bI(t,e).map(yI)).pipe((0,ot.U)(_I))}}(wI(t)):null}function II(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let EI=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=TI(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=CI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.lG2({type:t}),t})(),SI=(()=>{class t extends EI{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=i.n5z(t)))(n||t)}}(),t.\u0275dir=i.lG2({type:t,features:[i.qOj]}),t})();class kI extends EI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xI{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}let AI=(()=>{class t extends xI{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(kI,2))},t.\u0275dir=i.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&i.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[i.qOj]}),t})(),OI=(()=>{class t extends xI{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(SI,10))},t.\u0275dir=i.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,e){2&t&&i.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))("ng-submitted",e.is("submitted"))},features:[i.qOj]}),t})();function NI(t,e){RI(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&DI(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&DI(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function PI(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function RI(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(II(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(II(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();PI(e._rawValidators,i),PI(e._rawAsyncValidators,i)}function DI(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function MI(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const LI="VALID",FI="INVALID",UI="PENDING",jI="DISABLED";function VI(t){return(GI(t)?t.validators:t)||null}function qI(t){return Array.isArray(t)?TI(t):t||null}function BI(t,e){return(GI(e)?e.asyncValidators:t)||null}function HI(t){return Array.isArray(t)?CI(t):t||null}function GI(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class zI{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=qI(this._rawValidators),this._composedAsyncValidatorFn=HI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===LI}get invalid(){return this.status===FI}get pending(){return this.status==UI}get disabled(){return this.status===jI}get enabled(){return this.status!==jI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=qI(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=HI(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=UI,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=jI,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=LI,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==LI&&this.status!==UI||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jI:LI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=UI,this._hasOwnPendingAsyncValidator=!0;const e=yI(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof WI?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof YI&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new i.vpe,this.statusChanges=new i.vpe}_calculateStatus(){return this._allControlsDisabled()?jI:this.errors?FI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(UI)?UI:this._anyControlsHaveStatus(FI)?FI:LI}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){GI(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class KI extends zI{constructor(t=null,e,n){super(VI(e),BI(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){MI(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){MI(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class WI extends zI{constructor(t,e,n){super(VI(e),BI(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof KI?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class YI extends zI{constructor(t,e,n){super(VI(e),BI(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof KI?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ZI={provide:SI,useExisting:(0,i.Gpc)(()=>$I)},QI=(()=>Promise.resolve(null))();let $I=(()=>{class t extends SI{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new i.vpe,this.form=new WI({},TI(t),CI(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){QI.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),NI(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){QI.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),MI(this._directives,t)})}addFormGroup(t){QI.then(()=>{const e=this._findContainer(t.path),n=new WI({});(function(t,e){RI(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){QI.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){QI.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(gI,10),i.Y36(vI,10))},t.\u0275dir=i.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&i.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i._Bn([ZI]),i.qOj]}),t})();const XI={provide:kI,useExisting:(0,i.Gpc)(()=>tE)},JI=(()=>Promise.resolve(null))();let tE=(()=>{class t extends kI{constructor(t,e,n,r){super(),this.control=new KI,this._registered=!1,this.update=new i.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===pI?n=t:Object.getPrototypeOf(t.constructor)===uI?r=t:i=t}),i||r||n||null}(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){NI(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){JI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;JI.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(SI,9),i.Y36(gI,10),i.Y36(vI,10),i.Y36(cI,10))},t.\u0275dir=i.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[i._Bn([XI]),i.qOj,i.TTD]}),t})(),eE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),nE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({}),t})();const rE={provide:gI,useExisting:(0,i.Gpc)(()=>oE),multi:!0},iE={provide:gI,useExisting:(0,i.Gpc)(()=>sE),multi:!0};let oE=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return null==(e=t.value)||0===e.length?{required:!0}:null;var e}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.lG2({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&i.uIk("required",e.required?"":null)},inputs:{required:"required"},features:[i._Bn([rE])]}),t})(),sE=(()=>{class t extends oE{validate(t){return this.required?function(t){return!0===t.value?null:{required:!0}}(t):null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=i.n5z(t)))(n||t)}}(),t.\u0275dir=i.lG2({type:t,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&i.uIk("required",e.required?"":null)},features:[i._Bn([iE]),i.qOj]}),t})(),aE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[nE]]}),t})(),uE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[aE]}),t})();function cE(t,e){1&t&&(i.TgZ(0,"button",7),i._uU(1,"Sign In with Google"),i.qZA())}function lE(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){return i.CHM(t),i.oxw().loginGoogle()}),i._uU(1,"Sign In with Google"),i.qZA()}}function hE(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",9),i.TgZ(1,"input",10),i.NdJ("ngModelChange",function(e){return i.CHM(t),i.oxw().isChecked=e}),i.qZA(),i.TgZ(2,"label",11),i._uU(3,"You agree to our Terms of Use and Privacy Policy"),i.qZA(),i.qZA()}if(2&t){const t=i.oxw();i.xp6(1),i.Q6J("ngModel",t.isChecked)}}let fE=(()=>{class t extends rI{constructor(t,e){super(e),this.auth=t,this.router=e,this.isChecked=!1}loginGoogle(){this.googleLogin()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(iI),i.Y36(_r))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-auth-page"]],inputs:{isChecked:"isChecked"},features:[i.qOj],decls:10,vars:4,consts:[[1,"main_wrapper"],[1,"autorize_wrapper"],[1,"autorize_block"],[1,"autorize_head"],["class","google_btn",4,"ngIf"],["class","google_btn btn_active",3,"click",4,"ngIf"],["class","check_wrapper",4,"ngIf"],[1,"google_btn"],[1,"google_btn","btn_active",3,"click"],[1,"check_wrapper"],["id","privacy_policy","type","checkbox","required","",3,"ngModel","ngModelChange"],["for","privacy_policy",1,"privacy_policy"]],template:function(t,e){1&t&&(i.TgZ(0,"main"),i.TgZ(1,"div",0),i.TgZ(2,"div",1),i.TgZ(3,"div",2),i.TgZ(4,"h1",3),i._uU(5),i.qZA(),i.YNc(6,cE,2,0,"button",4),i.YNc(7,lE,2,0,"button",5),i.YNc(8,hE,4,1,"div",6),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(9,"app-footer")),2&t&&(i.xp6(5),i.Oqu(e.user?"You successfully loggined! Now you can create posts":"Welcome to course"),i.xp6(1),i.Q6J("ngIf",!e.isChecked&&!e.user),i.xp6(1),i.Q6J("ngIf",e.isChecked&&!e.user),i.xp6(1),i.Q6J("ngIf",!e.user))},directives:[r.O5,a_,sE,hI,AI,tE],styles:['.autorize_wrapper[_ngcontent-%COMP%]{justify-content:center;width:100%;height:calc(100vh - 160px)}.autorize_block[_ngcontent-%COMP%], .autorize_wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.autorize_block[_ngcontent-%COMP%]{max-width:506px}.autorize_head[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;font-weight:700;font-size:60px;line-height:120%;letter-spacing:-.01em;color:#333}.search_head[_ngcontent-%COMP%]{width:100%;justify-content:center}.check_wrapper[_ngcontent-%COMP%], .search_head[_ngcontent-%COMP%]{align-items:center;display:flex}.google_btn[_ngcontent-%COMP%]{cursor:auto;width:342px;height:56px;background-color:#d1d1d1;box-shadow:0 6px 8px #eaedf280;border-radius:24px;border:0 solid;background-image:url(google.ffdd7168e96a47944649.png);background-repeat:no-repeat;background-position:75px 16px;margin-bottom:30px}.btn_active[_ngcontent-%COMP%]{background-color:#fff;cursor:pointer}.google_btn[_ngcontent-%COMP%]:hover{box-shadow:0 12px 24px #bcc9dc66}#privacy_policy[_ngcontent-%COMP%]{margin-right:15px}.privacy_policy[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:142%;letter-spacing:.0168em;font-feature-settings:"tnum" on,"lnum" on;color:#333}.more_tags_block[_ngcontent-%COMP%]{position:relative;width:100%;height:212px;background-color:#80dd80}']}),t})();function dE(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",18),i.NdJ("click",function(){return i.CHM(t),i.oxw().clickEvent()}),i._uU(1),i.qZA()}if(2&t){const t=e.$implicit,n=i.oxw();i.Q6J("ngClass",n.status?"article_tags_checked":""),i.xp6(1),i.hij(" ",t,"")}}let pE=(()=>{class t{constructor(){this.status=!1,this.baseOfTags2=["Angular","SAP ABAP","Java","SAP TM Consultant","Design","Frontend","Programmer","Python","DevOps","UX/UI Design","Product Development","Web Disign","SAP TM Consultant"]}clickEvent(){this.status=!this.status}ngOnInit(){console.log("init create")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-creating-page"]],decls:31,vars:1,consts:[[1,"creating_main"],[1,"creating_wrapper"],["method","post","id","drag_form","name","form","action",""],[1,"files_area"],["type","file","required","","id","files_drop"],["for","files_drop",1,"files_drop"],["type","button",1,"delete_btn","hidden"],["type","text","required","","placeholder","Enter Title","id","creating_input1"],[1,"creating_block"],["type","text","required","","placeholder","Enter Subtitle","id","creating_input2"],["type","text","required","","rows","5","cols","60","id","creating_input3"],["type","button",1,"new_block_btn"],[1,"article_tags_list"],["class","article_tags article_tags_add",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"footer_article"],[1,"form_buttons"],["id","preview",1,"form_button"],["form","drag_form",1,"form_button"],[1,"article_tags","article_tags_add",3,"ngClass","click"]],template:function(t,e){1&t&&(i.TgZ(0,"main",0),i.TgZ(1,"div",1),i.TgZ(2,"form",2),i.TgZ(3,"div",3),i._UZ(4,"input",4),i.TgZ(5,"label",5),i._uU(6,"Add Cover"),i.qZA(),i.qZA(),i.TgZ(7,"button",6),i._uU(8,"Delete image"),i.qZA(),i.TgZ(9,"h6"),i._uU(10,"Enter the title of your article"),i.qZA(),i._UZ(11,"input",7),i.TgZ(12,"div",8),i.TgZ(13,"h6"),i._uU(14,"Enter the subtitle of your article"),i.qZA(),i._UZ(15,"input",9),i.TgZ(16,"h6"),i._uU(17,"Tell your story..."),i.qZA(),i._UZ(18,"textarea",10),i.qZA(),i.TgZ(19,"button",11),i._uU(20,"Add new block"),i.qZA(),i.TgZ(21,"h6"),i._uU(22,"Add tag information"),i.qZA(),i.TgZ(23,"div",12),i.YNc(24,dE,2,2,"div",13),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(25,"footer",14),i.TgZ(26,"div",15),i.TgZ(27,"button",16),i._uU(28,"Preview"),i.qZA(),i.TgZ(29,"button",17),i._uU(30,"Publish"),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(24),i.Q6J("ngForOf",e.baseOfTags2))},directives:[eE,OI,$I,r.sg,r.mk],styles:['.creating_wrapper[_ngcontent-%COMP%]{max-width:1152px;width:100%;margin:0 auto}.creating_main[_ngcontent-%COMP%], .creating_wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.article_tags_checked[_ngcontent-%COMP%]{background-color:#2f80ed;background-image:url(checked.be1eef03eb642773fe81.svg);background-repeat:no-repeat;background-position:12px 8px,100% 100%;padding-left:40px}.files_area[_ngcontent-%COMP%]{position:relative;width:100%;height:116px;border:1px dashed #2f80ed;border-radius:4px;margin:65px 0 6px;z-index:10}.article_tags_list[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:flex-start;margin-bottom:60px;flex-wrap:wrap}.article_tags[_ngcontent-%COMP%]{width:auto;padding:8px 24px;background-color:#fff;color:#000;border-radius:40px;box-shadow:0 6px 8px #eaedf280;white-space:nowrap;margin:0 3px 3px;-webkit-user-select:none;user-select:none;cursor:pointer}.article_tags_add[_ngcontent-%COMP%]{background-repeat:no-repeat;background-image:url(add_icon_gray.fde65db9eb286bdb5565.svg);background-position:12px 8px,100% 100%;padding-left:40px}.files_drop[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 65px/2/2);left:calc(50% - 345px/2/2);z-index:100;width:230px;height:30px}.files_drop[_ngcontent-%COMP%]:hover, .new_block_btn[_ngcontent-%COMP%]:hover{background-color:#cacaca}#files_drop[_ngcontent-%COMP%]{display:none}h6[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:18px;line-height:24px;display:flex;align-items:center;letter-spacing:.0075em;color:#333;margin:15px 0}#creating_input1[_ngcontent-%COMP%], #creating_input2[_ngcontent-%COMP%], #creating_input3[_ngcontent-%COMP%]{border:1px solid #2f80ed;border-radius:4px;background:inherit}#creating_input1[_ngcontent-%COMP%]{height:72px}#creating_input1[_ngcontent-%COMP%], #creating_input1[_ngcontent-%COMP%]::placeholder{font-weight:700;font-size:42px;line-height:56px}#creating_input1[_ngcontent-%COMP%]::placeholder{padding:5px 20px 5px 0;display:flex;align-items:center;letter-spacing:-.005em;color:#828282}#creating_input2[_ngcontent-%COMP%]{height:56px}#creating_input2[_ngcontent-%COMP%], #creating_input2[_ngcontent-%COMP%]::placeholder{font-weight:700;font-size:24px;line-height:132%}#creating_input2[_ngcontent-%COMP%]::placeholder{padding:5px 20px 5px 0;display:flex;align-items:center;color:#828282}#creating_input3[_ngcontent-%COMP%]{height:288px;margin-bottom:30px}.files_drop[_ngcontent-%COMP%], .new_block_btn[_ngcontent-%COMP%]{border-radius:5px;padding:5px;background-color:inherit;font-weight:600;font-size:14px;line-height:142%;letter-spacing:.005em;color:#2f80ed;border:0 solid;width:auto;cursor:pointer;margin-bottom:20px}.new_block_btn[_ngcontent-%COMP%]{width:140px}.files_drop[_ngcontent-%COMP%]{display:flex;margin-bottom:0;align-items:center;text-align:center}.files_drop[_ngcontent-%COMP%]:active, .new_block_btn[_ngcontent-%COMP%]:active{color:#255da5}.files_drop[_ngcontent-%COMP%]:before, .new_block_btn[_ngcontent-%COMP%]:before{content:"";padding:9px 0 9px 30px;background-repeat:no-repeat;background-position:0;background-image:url(add_icon.2d4096f7f956800bee44.svg)}.hover_drag[_ngcontent-%COMP%]{border:1px dashed #12f312}.cursor_nodrop[_ngcontent-%COMP%]{cursor:no-drop}.hidden[_ngcontent-%COMP%]{display:none}#dropped_img[_ngcontent-%COMP%]{max-width:50%;margin:0 auto;padding:30px 0}#drag_form[_ngcontent-%COMP%]{width:100%}#drag_form[_ngcontent-%COMP%], .creating_block[_ngcontent-%COMP%]{display:flex;flex-direction:column}.creating_block[_ngcontent-%COMP%]{max-width:100%}.delete_article_btn[_ngcontent-%COMP%], .delete_btn[_ngcontent-%COMP%]{width:100px;height:25px;border:0 solid;border-radius:10px;background-color:#f56767}.delete_btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f71111}.form_buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:20px 0}#preview[_ngcontent-%COMP%]{margin-right:30px;background:inherit;border:1px solid #f2c94c}#preview[_ngcontent-%COMP%]:hover{background:#f2c84c5c}.form_button[_ngcontent-%COMP%]{width:138px;height:48px;background:#f2c94c;border-radius:24px;border:0 solid}.form_button[_ngcontent-%COMP%]:hover{background:rgba(18,177,18,.762)}']}),t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),gE=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-error-page"]],decls:3,vars:0,consts:[[1,"main_wrapper"],[1,"autorize_head"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"h1",1),i._uU(2," 404 ERROR. "),i.qZA(),i.qZA())},styles:[".autorize_wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:calc(100vh - 160px)}.autorize_head[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;font-weight:700;font-size:60px;line-height:120%;letter-spacing:-.01em;color:#333}"]}),t})();function vE(t,e){if(1&t&&(i.TgZ(0,"a",1),i._UZ(1,"img",2),i.TgZ(2,"div",3),i.TgZ(3,"h6"),i._uU(4),i.qZA(),i.TgZ(5,"p",4),i._uU(6),i.qZA(),i.qZA(),i.qZA()),2&t){const t=e.$implicit;i.MGl("routerLink","article/",t.id,""),i.xp6(1),i.s9C("src",t.img,i.LSH),i.xp6(3),i.hij("",t.title," "),i.xp6(2),i.Oqu(t.preview)}}let mE=(()=>{class t{constructor(t,e,n,r){this.service=t,this.afs=e,this.activateRoute=n,this.router=r,this.base=[]}ngOnInit(){this.subs=this.service.base$.subscribe(t=>this.base=t),this.base=this.service.newBase,this.service.checkDB()}ngOnDestroy(){this.subs.unsubscribe(),console.log("destr")}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(s_),i.Y36(i_),i.Y36(Qe),i.Y36(_r))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-article-prev"]],decls:1,vars:1,consts:[["class","article_prev_block",3,"routerLink",4,"ngFor","ngForOf"],[1,"article_prev_block",3,"routerLink"],["alt","",1,"article_prev_img",3,"src"],[1,"article_text_wrap"],[1,"article_text_style"]],template:function(t,e){1&t&&i.YNc(0,vE,7,4,"a",0),2&t&&i.Q6J("ngForOf",e.base)},directives:[r.sg,br],styles:["[_nghost-%COMP%]{width:100%;min-height:772px;display:flex;flex-wrap:wrap;margin-bottom:80px;justify-content:flex-start}.articles[_ngcontent-%COMP%]{width:100%;min-height:772px;display:flex;flex-wrap:wrap;margin-bottom:80px;justify-content:flex-start}.article_prev_img[_ngcontent-%COMP%]{width:100%;height:50%;border-top-left-radius:15px;border-top-right-radius:15px;object-fit:cover}.article_text_wrap[_ngcontent-%COMP%]{padding:0 15px}.article_prev_block[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:269px;height:352px;margin-bottom:30px;margin-right:19px;background:#fff;box-shadow:0 6px 8px #eaedf280;border-radius:15px}.article_prev_block[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 12px 24px #bcc9dc66}.article_prev_block[_ngcontent-%COMP%]:active{box-shadow:0 12px 24px #e3e8f080}.article_text_style[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:142%;letter-spacing:.0168em;color:#4f4f4f}"]}),t})();function yE(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",12),i.NdJ("click",function(){const e=i.CHM(t).$implicit;return i.oxw().collectTag(e)}),i._uU(1),i.qZA()}if(2&t){const t=e.$implicit;i.xp6(1),i.Oqu(t)}}Xr.default.initializeApp({apiKey:"AIzaSyB_nTs0o-9-63YDgjR31GLuFUU27RO-KjU",authDomain:"leverx-554f0.firebaseapp.com",projectId:"leverx-554f0",storageBucket:"leverx-554f0.appspot.com",messagingSenderId:"680924284770",appId:"1:680924284770:web:4e9c88a03e9fc58a6d0e3b"}),Xr.default.firestore();let _E=(()=>{class t{constructor(t){this.service=t,this.inputValue="",this.baseOfTags=["Programmer","Python","Frontend","Web Disign","SAP TM Consultant","UX/UI Design","Angular","DevOps"],this.activeTags=[]}collectTag(t){-1!==this.activeTags.indexOf(t)?(this.activeTags.splice(this.activeTags.indexOf(t),1),console.log("splice")):this.activeTags.push(t),this.service.SearchWithInput(this.inputValue,this.activeTags)}setIndex(t){t.target.classList.contains("article_tags")&&t.target.classList.contains("article_tags_checked")?t.target.classList.remove("article_tags_checked"):t.target.classList.contains("article_tags")&&t.target.classList.add("article_tags_checked")}ngOnInit(){}search(){console.log(this.tagValue),this.timeOut?(clearTimeout(this.timeOut),this.timeOut=window.setTimeout(()=>{this.service.SearchWithInput(this.inputValue,this.activeTags)},200)):this.timeOut=window.setTimeout(()=>{this.service.SearchWithInput(this.inputValue,this.activeTags)},200)}ngOnDestroy(){console.log("destr")}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(s_))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-main-page"]],decls:23,vars:2,consts:[[1,"information_wrapper"],[1,"information"],[1,"information_text"],[1,"start_btn"],[1,"articles_wrapper"],[1,"articles_tags"],[1,"articles_heading"],["for","search",1,"search_label"],["type","text","name","search","id","search","placeholder","Search for article",3,"ngModel","ngModelChange","input"],[1,"article_tags_list",3,"click"],["class","article_tags",3,"click",4,"ngFor","ngForOf"],[1,"articles"],[1,"article_tags",3,"click"]],template:function(t,e){1&t&&(i.TgZ(0,"main"),i.TgZ(1,"div",0),i.TgZ(2,"div",1),i.TgZ(3,"div",2),i.TgZ(4,"h4"),i._uU(5,"Free courses from"),i.qZA(),i.TgZ(6,"h2"),i._uU(7,"LEVERX GROUP"),i.qZA(),i.TgZ(8,"p"),i._uU(9,"The profession of a programmer is one of the most demanded in the IT field today. Programming training at LeverX Group is an excellent opportunity to gain practical knowledge in the most relevant areas in this area and build a successful career in our company."),i.qZA(),i.TgZ(10,"button",3),i._uU(11,"Start Now"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(12,"div",4),i.TgZ(13,"div",5),i.TgZ(14,"h4",6),i._uU(15,"Interesting articles by LeverX Group"),i.qZA(),i._UZ(16,"label",7),i.TgZ(17,"input",8),i.NdJ("ngModelChange",function(t){return e.inputValue=t})("input",function(){return e.search()}),i.qZA(),i.TgZ(18,"div",9),i.NdJ("click",function(t){return e.setIndex(t)}),i.YNc(19,yE,2,1,"div",10),i.qZA(),i.TgZ(20,"div",11),i._UZ(21,"app-article-prev"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(22,"app-footer")),2&t&&(i.xp6(17),i.Q6J("ngModel",e.inputValue),i.xp6(2),i.Q6J("ngForOf",e.baseOfTags))},directives:[pI,AI,tE,r.sg,mE,a_],styles:['.main_wrapper[_ngcontent-%COMP%]{max-width:1440px;margin:0 auto}.information_wrapper[_ngcontent-%COMP%]{height:572px;background-image:url(bgr.5d1e4fe64abf637009da.jpg)}.information[_ngcontent-%COMP%]{display:flex;max-width:1152px}.information_text[_ngcontent-%COMP%]{width:500px;margin:90px 0 0 144px}.start_btn[_ngcontent-%COMP%]{background-color:#fff;box-shadow:none;border:none;background:#f2c94c;border-radius:24px;width:145px;height:48px;font-weight:700;font-size:16px;line-height:150%;text-align:center;letter-spacing:.05em;color:#333;margin-top:55px}.start_btn[_ngcontent-%COMP%]:hover{background-color:#fb9c0d}.articles_wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:1152px;margin:0 auto}.articles_heading[_ngcontent-%COMP%]{color:#333;margin-top:60px;margin-bottom:50px}#search[_ngcontent-%COMP%], input[_ngcontent-%COMP%]::placeholder{color:#bdbdbd}#search[_ngcontent-%COMP%]{padding-left:85px;width:74%;height:60px;border:0 solid;background:#fff;box-shadow:0 -6px 8px #eaedf280,0 6px 8px #eaedf280;border-radius:40px;margin-bottom:60px}.search_label[_ngcontent-%COMP%]{position:relative}.search_label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;top:-5px;bottom:0;width:28px;height:28px;background:url(search.66a27d0433d3730e879f.svg)}.article_tags_list[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:flex-start;margin-bottom:60px;flex-wrap:wrap}.angular_tag_label[_ngcontent-%COMP%]{position:relative;width:0}.article_tags_list__item[_ngcontent-%COMP%]{display:none}.articles[_ngcontent-%COMP%]{width:100%;min-height:772px;display:flex;flex-wrap:wrap;margin-bottom:80px;justify-content:flex-start}.article_prev_img[_ngcontent-%COMP%]{width:100%;height:50%;border-top-left-radius:15px;border-top-right-radius:15px;object-fit:cover}.article_text_wrap[_ngcontent-%COMP%]{padding:0 15px}.article_prev_block[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:269px;height:352px;margin-bottom:30px;margin-right:19px;background:#fff;box-shadow:0 6px 8px #eaedf280;border-radius:15px}.article_prev_block[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 12px 24px #bcc9dc66}.article_prev_block[_ngcontent-%COMP%]:active{box-shadow:0 12px 24px #e3e8f080}.article_text_style[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:142%;letter-spacing:.0168em;color:#4f4f4f}.article_tags[_ngcontent-%COMP%]{width:auto;padding:8px 24px;background-color:#fff;color:#000;border-radius:40px;box-shadow:0 6px 8px #eaedf280;white-space:nowrap;margin:0 3px 3px;-webkit-user-select:none;user-select:none;cursor:pointer}.article_tags[_ngcontent-%COMP%]:hover{box-shadow:0 12px 24px #bcc9dc66}.article_tags[_ngcontent-%COMP%]:active{box-shadow:0 12px 24px #e3e8f080}.article_tags_add[_ngcontent-%COMP%]{background-image:url(add_icon_gray.fde65db9eb286bdb5565.svg)}.article_tags_add[_ngcontent-%COMP%], .article_tags_checked[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:12px 8px,100% 100%;padding-left:40px}.article_tags_checked[_ngcontent-%COMP%]{background-color:#2f80ed;background-image:url(checked.be1eef03eb642773fe81.svg)}']}),t})(),bE=(()=>{class t{constructor(){}resolve(){return Xr.default.auth().onAuthStateChanged(t=>t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const wE=[{path:"creating",canLoad:[iI],loadChildren:()=>Promise.resolve().then(n.bind(n,5419)).then(t=>t.CreatingPageModule),component:pE,resolve:{users:bE}},{path:"autorization",component:fE},{path:"article/:id",component:f_},{path:"",pathMatch:"full",component:_E},{path:"**",redirectTo:"",component:gE}];Rr.forRoot(wE,{preloadingStrategy:Er});let TE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Rr.forRoot(wE)],Rr]}),t})();function CE(t,e){1&t&&(i.TgZ(0,"a",13),i._uU(1,"Create a post"),i.qZA())}function IE(t,e){1&t&&(i.TgZ(0,"a",14),i._uU(1,"Log in"),i.qZA())}function EE(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"a",15),i.NdJ("click",function(){return i.CHM(t),i.oxw().googleLogin()}),i._uU(1,"Log out"),i.qZA()}}let SE=(()=>{class t extends rI{constructor(t,e){super(t),this.rourer=t,this.authService=e,this.authService.user$.subscribe(t=>this.IsLogin=t)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(_r),i.Y36(iI))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-header"]],features:[i.qOj],decls:15,vars:3,consts:[[1,"header_nav"],[1,"menu"],[1,"menu__logo"],["routerLink",""],["width","70","height","70","viewBox","0 0 70 70","fill","none","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["width","70","height","70","fill","url(#pattern0)"],["id","pattern0","patternContentUnits","objectBoundingBox","width","1","height","1"],[0,"xlink","href","#image0","transform","scale(0.00666667)"],["id","image0","width","150","height","150",0,"xlink","href","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAPpElEQVR4Xu2d3XXjthLHZ2RROXm5tgqIPyqIt4LrrSBOBeutYJ0KslvBeitYu4I4FURbwdoV2HIKkJSXnCuJnHvAD4kAAQogCZo2R08+RyAE/PHzYDAYAgj8YQU8KIAe6uQqWQFgsBgCLwowWF5k5UoZLGbAiwIMlhdZuVIGixnwogCD5UVWrpTBYga8KMBgeZGVK2WwmAEvCjBYXmTlShksZsCLAgyWF1m5UgaLGfCiAIPlRVaulMFiBrwowGB5kZUrZbCYAS8KMFheZOVKGSxmwIsCDJYXWblSBosZ8KIAg+VFVq6UwWIGvCjAYHmRlStlsJgBLwowWF5k5UoZrFfEwMOMDoYAP0cDOJO6hfAYhXB/Msa7trrLYLWltKffeZjR6d4A3hHBGSKclv4MwSMRXB2N8Yun5myqZbB8K+yp/uk/9A4iuNwJk+73CR5Dgl99WjAGy9PA+6pWAIURfASEY+NvINxDBPPsewQ4JoQjqTzBPCR46wsuBssXAQ3X+/eMziKEz1oLRbAghOsogsnJGG91P51OmZcA8G7zvUe4GKyGAWi6OuGQ7w3gdwAQUMgfgm9AcH04xmvb332a0QUgXAHCvniGCO6ODvCN7fO25RgsW6WeoZywUoTwtTDtIdxjCJc/jXFSpVlxvQP4a/NsBO9d4LT5TQbLRqVnKDNd0O8I8FHxixZAcNkEBE8LElYumRYJHg8P8KTJbjJYTarZQF3x1IfwB6ASiwK4CSO4PBnjximv83MPMzreG8BDVkcYwZsmHXkGq87oNPzsw4zO95Kp7yDnYC+Q4LzqtFfWxKd/6A4Ifo6NVgSfjsYoW8ga/WOwaojX5KPTGX3AAVzl6ySAP6MILpqyUmp7pwu6QoAPyWwIfx7t43lTfWKwmlKyRj3TBX1FgAsJqoYtiK558QpxAF99+FkMVg0g6j4q/KkBwl9SbIrA29SntlddHR7uY2M8NFZRXZH79rwWKoT7MIynvlY2ixmsV0ZdHAVPVn7bbZkEqjNf/pROQgbrFYGVQvWXtPIDuDncR8nHaqPLDFYbKrfwG12CSnSXwWph0H3/RNegEv1VVoWLwwPcxs9qCsLOe00BbR7vIlSi3dMZfcRkg1sEsr4dHqCceWrTOUMZBquGeDaPdhWq2GLJ+4UMls2AdqGMNqTwTI66To/pnL5nMTTe0ukCMRZt6DpUqcWiTVcaTp3hqdACkipF8tYgff5ZQgqmtovshkFuGykCuD4Z42OVvuqeYbCaUjJXT2HvD+H+8D9Y/gaNh3Y8Z5UMVsPqSystUfczRNQb7lKl6hisSrLpH5LiQskSfhESHLe5TdNgd2pV1RhYy+XyAhC3b4AkzbofBUHxJYBaTe7mw4WwQgKV2PtrfEM5DhOQ8jqXMI4En8oSAjfZqRoJ0/cMG8lOTQx1Q5//rVYfEdJg27bOb6MgaCzo1lBTG68mHbCH/P5fGMUvhGpfxarbgIJlzCokmBwe4FtT/YVpeluw8YUFg1V3lEUEOxcPimfAFpL0/p7TY+ElVAAIIzgxre6qPFNVHgarqnLpc/n03sStajbF19Q8o9UyBGDjfPoB/KGpr3FrxVNhTag2g4VwTyHcwgDmURTHgxrzVcqaWGKBxmobnuY0AYT/qvWVWbg68rDFqqiecNYHA7hIQWrcQbdplslqqVOx+qpXrm4v1ootls3odbyM1moRzA8PcJw1Xdps3jr6YtV62mS0PS8VW6yOg7OreUZfK937061Y21hgvBiwiOhgFYa/AJFI4c2HMMQ0NAnX6y8//vhjYa/r33//PR4Oh2p8DYIg+GQaNNdnRPm94fADIJ4D0SaPHQFuCfF2NBzelAEiQjWD2O/ffL4FQTARfV6v1x8oORDkgAA+/RAEhZdKdVYrO+xjuqBLBPgs/X4LgdsXAdZyuTwFRPH+W9l+2xwBrlRgYiDX61lhYInejEYjrW/kEpMzlFV/7g6I3pt+b7la5aEShH0aDYdXq/VaHNyx6bMJLFN8CiN4CwjXaliijXBI58FKoRIC26bNflGj/cvVSpzKIq+IkoHWHv+zWq1uCeAX+b+cfhuNRtKbysvl8lqz22AyTnMgequDSwdW6gAn2Z3pxwRWOt09ZkcT5R6YKy9ttLbN1Gmw0unve3562eVzpAPyVkwlWdnlcnkJiMp0QDej0Uj7ZsxytRLhgvj8qO0gyRYu3cJK3iK2/0xGQVCIjKtgAdGNDlgTWOLnS6LqcjdaCN6mY2CvSllJl+nD9hctpxldddIAplbvu1QQ8XE0HBaO7tGWJZqORqON75ROr+KkFlsrmge0YCkLYEF8zGOh7jKwjFZLNnmtbYp31mKZBi/zPxBxLsos12vhnEpThtAyXK9P8s68zgoFw+FY1JPXXmuJSLZuWgsIcC8WFtlU97/1+hwpPoNKsnwI8GcQBNLhGxqwtP97ZWDZWK02fKus4Z0FSzfAukERHbHxiXT+ECH++sNwKG0U25RbrlbC6Y+P/0k/i2A4PFYhXa1WZwS5k/PSwqMgkHQ3gkU0BYArxCRDYr1eP+pWvlkjSq1WCyvB/H9DZ8HSwaIDQXRGN32pEOpA1VkADTSQt2xpaGFzYFnqTxSsUCayrj4EkH1AZVWY1TkcDi9UWHe5ESZfq609zJdgsR4BUTpCWjd15QZQdbillB1D2MG5TDrFSZu5ZVOUzk9U/0F0FkudyncBlX2vjbKLL5MTkkXmQyv7mJ21WDqx1SlE8o00IQXNlKNOYZAvYwONDhTVAik+W2FFqoKo6atIkHTOkS/ZE4yb1HsfyxjUBCg7JVgMhLSSUsHaBYV2FaoEUg0rVQGsyRKINkmQ7ARLWSzUtlZZBS1arU5aLJPTaytwVk4FS1svbQOfmkDqYhQEEqyOQVGr1Z0uQKrbuinr/y5rtWGrz3EsX2DFjr4S/Mw7+bpApRpE7SpYRt9KpbElq9VJi6VbeblaK1Fe55MVVptpoNQQGC0EM2sEbTdd2DUV7opXqVoYrZW4Uyc9FTn/TBu+VifBSi1LYWPWdXrQwagLO4gV2N7e3rm67aNbherAKltU2PxD1J0KTdbKtAndxgrxxYBlCo7aDFy+jNYaEr1HxHNl41m7MjPsOxozJWzaVwcso7VKjyWyzTK1aadLmS6DJWckGPb2XDqbi3mpYYcvQCQsVj5uVsiSEM8bFgDGTAmb9tUBq8xaiXcMyzIffMa1ugyWSFGJD7ffOif6HKp0sAv7hbpMgnSaletGfFQzKEpjU8VIuTZrIfdb+e0fceWWSMHZ5IJVBavMt8qfFWHMfGj4hJn8UPkFC/Ex3Yi1+ceNy2SJerpgpcjIDILgV7Uy3fZP2dSpq1upsxBmyH9v+D1pmyaGKklQlLMqNIuKqmAZV4IKMCXTZeOXM2U6+QXLGqdtwbwjrMtIiNN9iT6J//g0X+tzmq4s/1pJIp9ucaD8txn3/lJgxHECai7WHBAvszTk1IqKrR8pDmaT3WCzKjTBggTTnw6wcPuqLYQVhkz7SKfBqry0V/KndD3XZkRkBXdAGQMtMhyUvUybQdFNsVUslisohTsKN31t/ko5UXWnwao6gGX+0caB12WVpl/abABbTKc6zrRnWbiCVTK1lSby5W/7khrnwdfqNFg5P0WsEOVUYZN52GFtsseMQVgLa5eDUzclmlp2HwyHZ7o0GFewTNZqV+Cz5DCRxn2tzoMlRindlBavPcmrxPwQEk1pMLhUE/fKpqflcllIzQEAbZjBVE/sS4lM0bJpkegmCIJLU26VC1hVrVXWftNr+dCw1WoMLBv/om6ZdGo8J0RxfuYpJe/aTQDxzgWouu3QPS9WgIR4jomzfgpE4h3HuzAMb8uyPn20pQt1viiwuiAYt8FOAQbLTicu5ahAb8H6e0abF1jXAPdtpew6jo9UPN9m8UWX291LsNTVka8zoupApD6rbsu0/XKEa1/6CdacxH2B8cEiXR8g0UY1uCmi6+vkCKJWXoxwhUqU7x1YheV6w8vsKoNQ9kzcXoTvysG5b3ycxtxk23sHlnRmaMsvcboOnO4+HgL47WgfpcNJXOtto3zvwHqakzg2O9uk9XZUYhODV7g6pUM3h+3qX6/AUqdBn2ex7xJ+1/eFA9Ne2NUpvQJLHawwgsLpwrsGvI3vC5kIHm+58NWfvoF1i9mBag1fVdvUAOluZO2yZTX1u1dgPS1o8+ZPF53gND9drAC3iXodX7X2Hix1egkj6NSS/SXcyOpilXtjsVT/6nAfO9X3wo2sHZ2qbeHqlLi2ja5SzueN7VXak39GdyNrGMZX0nU2sr6rz70By+eN7btELvv+NULVqy2dvOPelVVWAaokrODtGpI6/wCuz/bCYqmBUXGmQdlNpK4iVilvgMrLjaxV2lf3mV6ApVkRPmtg9LVD1ZupUAXrOVeEfYCKwapr7x2ej+NUA/iMANvbMF7gVo1tl3sxFarZl21bLG3w8xVD1RuL9ZxgxTexInxFzB1wm2QqnPu6hNLWqvgs1wuL9Vw+Vvy7CH9IN3C9sPSXqvAxWFWV2/HcdEYfcABqpudNGMHlS46o28rVC7DiVJQBbM6p8hnHSjMUvgKCdBETAXw52kdxU2ovPr0AS4zk05zEpZDxwSK+UmbSqU9AtU17IVgAweXhGLWXbr5WyvoD1iK+4i25G5pgcniAhQspqw5ybKUG8dV2skVK/KmLrr9RU7XfZc/1B6wZXcAANqfwNTUdPszofA/hs2SlEsV740/pAOsNWMKqDBHuNhdv17RaaQqxACp+8XXzSeJTwkpJ9yD6sApdrrM3YMV+lmK1COD6aB/fuwyQ8KOiAbyTIuhpBeKt6iiKoXqxeVQuWvBUmFOgcFwiwSQkeF8WrBTZEQPxEgbChRToTOtNX3kXYYReW6k8aL2yWKLjsaO9BxP1jhkiuAOEBIwI5jCID1A7BoJTHUzpIkC8nnF1NEZx2iB/cgr0DqwyuGzJEBYqIriOAK542tOr1kuwMiniFywIPmbxrV1gpT7UNU95u5Tq4WkzOklSp/4MCI4R4FicbSrODxVliWASJX9P2DrtBior0WuLZS8Tl3RVgMFyVYzLWynAYFnJxIVcFWCwXBXj8lYKMFhWMnEhVwUYLFfFuLyVAgyWlUxcyFUBBstVMS5vpQCDZSUTF3JVgMFyVYzLWynAYFnJxIVcFWCwXBXj8lYKMFhWMnEhVwUYLFfFuLyVAgyWlUxcyFUBBstVMS5vpQCDZSUTF3JVgMFyVYzLWynAYFnJxIVcFWCwXBXj8lYKMFhWMnEhVwUYLFfFuLyVAgyWlUxcyFUBBstVMS5vpQCDZSUTF3JVgMFyVYzLWynAYFnJxIVcFfg/6crJDzyVPecAAAAASUVORK5CYII="],[1,"menu__item"],["class","menu__item_post","routerLink","creating",4,"ngIf"],["routerLink","autorization","class","auth",4,"ngIf"],["class","auth",3,"click",4,"ngIf"],["routerLink","creating",1,"menu__item_post"],["routerLink","autorization",1,"auth"],[1,"auth",3,"click"]],template:function(t,e){1&t&&(i.TgZ(0,"header"),i.TgZ(1,"nav",0),i.TgZ(2,"ul",1),i.TgZ(3,"li",2),i.TgZ(4,"a",3),i.O4$(),i.TgZ(5,"svg",4),i._UZ(6,"rect",5),i.TgZ(7,"defs"),i.TgZ(8,"pattern",6),i._UZ(9,"use",7),i.qZA(),i._UZ(10,"image",8),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.kcU(),i.TgZ(11,"li",9),i.YNc(12,CE,2,0,"a",10),i.YNc(13,IE,2,0,"a",11),i.YNc(14,EE,2,0,"a",12),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(12),i.Q6J("ngIf",e.user),i.xp6(1),i.Q6J("ngIf",!e.user),i.xp6(1),i.Q6J("ngIf",e.user))},directives:[br,r.O5],styles:["header[_ngcontent-%COMP%]{height:80px;width:100%;background-color:#2f80ed}.header_nav[_ngcontent-%COMP%]{width:100%;height:100%;display:flex}.menu[_ngcontent-%COMP%]{margin:0 auto;width:1280px;display:flex;align-items:center;justify-content:space-between}.menu__logo[_ngcontent-%COMP%]{width:70px;height:70px}.menu__item[_ngcontent-%COMP%]{display:flex;align-items:center}.menu__item_post[_ngcontent-%COMP%]{box-sizing:border-box;margin-right:30px}.auth[_ngcontent-%COMP%], .menu__item_post[_ngcontent-%COMP%], .un_auth[_ngcontent-%COMP%]{width:190px;height:48px;border:1px solid #fff;border-radius:24px;text-align:center;padding:13px 0}.auth[_ngcontent-%COMP%], .un_auth[_ngcontent-%COMP%]{cursor:pointer;background:inherit;color:#fff;font-weight:700;margin-left:20px}.auth[_ngcontent-%COMP%]{height:auto}.un_auth[_ngcontent-%COMP%]{width:100px;height:48px}.un_auth[_ngcontent-%COMP%]:hover{background-color:rgba(221,38,38,.789)}.auth[_ngcontent-%COMP%]:hover{background-color:#3e6faf}.menu__item_avatar[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:50%}.user_block[_ngcontent-%COMP%]{display:flex}.avatar_user_name[_ngcontent-%COMP%]{margin-right:10px}.menu__item_post[_ngcontent-%COMP%]:hover{background-color:#3e6faf}"]}),t})(),kE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(i._UZ(0,"app-header"),i._UZ(1,"router-outlet"))},directives:[SE,Tr],styles:["*[_ngcontent-%COMP%]{padding:0;margin:0}li[_ngcontent-%COMP%]{list-style-type:none}main[_ngcontent-%COMP%]{background:#f2f2f2}.creating_main[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-style:normal;outline:none;font-weight:600;font-size:18px;line-height:24px;letter-spacing:.0075em}a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}button[_ngcontent-%COMP%]{cursor:pointer}hr[_ngcontent-%COMP%]{margin-bottom:25px}h4[_ngcontent-%COMP%]{font-weight:600;font-size:34px;line-height:44px}h2[_ngcontent-%COMP%]{font-weight:700;font-size:60px;line-height:130%;letter-spacing:.03em;color:#f2c94c}p[_ngcontent-%COMP%]{font-size:18px;line-height:24px;letter-spacing:.0075em}body[_ngcontent-%COMP%]{font-family:sans-serif;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif;font-style:normal;color:#fff}[_nghost-%COMP%]{display:block;max-width:1440px;margin:0 auto}"]}),t})();class xE extends U.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(t){return this.hasError?(t.error(this.thrownError),Vt.w.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Vt.w.EMPTY):super._subscribe(t)}next(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}error(t){this.hasCompleted||super.error(t)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}class AE{}let OE=(()=>{class t extends class{constructor(){}loadScript(t,e,n,r=null){if("undefined"!=typeof document&&!document.getElementById(t)){let t=document.createElement("script");t.async=!0,t.src=e,t.onload=n,r||(r=document.head),r.appendChild(t)}}}{constructor(t,e={scope:"email"}){super(),this.clientId=t,this.initOptions=e}initialize(){return new Promise((e,n)=>{try{this.loadScript(t.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.initOptions),{client_id:this.clientId})),this.auth2.then(()=>{e()}).catch(t=>{n(t)})})})}catch(r){n(r)}})}getLoginStatus(e){const n=Object.assign(Object.assign({},this.initOptions),e);return new Promise((e,r)=>{if(this.auth2.isSignedIn.get()){let t=new AE;const r=this.auth2.currentUser.get().getBasicProfile(),i=this.auth2.currentUser.get().getAuthResponse(!0);t.id=r.getId(),t.name=r.getName(),t.email=r.getEmail(),t.photoUrl=r.getImageUrl(),t.firstName=r.getGivenName(),t.lastName=r.getFamilyName(),t.response=i;const o=n=>{t.authToken=n.access_token,t.idToken=n.id_token,e(t)};n.refreshToken?this.auth2.currentUser.get().reloadAuthResponse().then(o):o(this.auth2.currentUser.get().getAuthResponse(!0))}else r(`No user is currently logged in with ${t.PROVIDER_ID}`)})}signIn(t){const e=Object.assign(Object.assign({},this.initOptions),t);return new Promise((n,r)=>{(e&&e.offline_access?this.auth2.grantOfflineAccess(t):this.auth2.signIn(t)).then(t=>{let e=new AE;if(t&&t.code)e.authorizationCode=t.code;else{let t=this.auth2.currentUser.get().getBasicProfile(),n=this.auth2.currentUser.get().getAuthResponse(!0),r=n.access_token,i=n.id_token;e.id=t.getId(),e.name=t.getName(),e.email=t.getEmail(),e.photoUrl=t.getImageUrl(),e.firstName=t.getGivenName(),e.lastName=t.getFamilyName(),e.authToken=r,e.idToken=i,e.response=n}n(e)},t=>{r(t)}).catch(t=>{r(t)})})}signOut(t){return new Promise((e,n)=>{let r;r=t?this.auth2.disconnect():this.auth2.signOut(),r.then(t=>{t?n(t):e()}).catch(t=>{n(t)})})}}return t.PROVIDER_ID="GOOGLE",t})(),NE=(()=>{class t{constructor(t){this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new Ny(1),this.initialized=!1,this._initState=new xE,t instanceof Promise?t.then(t=>{this.initialize(t)}):this.initialize(t)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(t){this.autoLogin=void 0!==t.autoLogin&&t.autoLogin;const{onError:e=console.error}=t;t.providers.forEach(t=>{this.providers.set(t.id,t.provider)}),Promise.all(Array.from(this.providers.values()).map(t=>t.initialize())).then(()=>{if(this.autoLogin){const t=[];let e=!1;this.providers.forEach((n,r)=>{let i=n.getLoginStatus();t.push(i),i.then(t=>{t.provider=r,this._user=t,this._authState.next(t),e=!0}).catch(console.debug)}),Promise.all(t).catch(()=>{e||(this._user=null,this._authState.next(null))})}}).catch(t=>{e(t)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}refreshAuthToken(e){return new Promise((n,r)=>{if(this.initialized)if(e!==OE.PROVIDER_ID)r(t.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const i=this.providers.get(e);i?i.getLoginStatus({refreshToken:!0}).then(t=>{t.provider=e,this._user=t,this._authState.next(t),n()}).catch(t=>{r(t)}):r(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else r(t.ERR_NOT_INITIALIZED)})}signIn(e,n){return new Promise((r,i)=>{if(this.initialized){let o=this.providers.get(e);o?o.signIn(n).then(t=>{t.provider=e,r(t),this._user=t,this._authState.next(t)}).catch(t=>{i(t)}):i(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(t.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((n,r)=>{if(this.initialized)if(this._user){let i=this.providers.get(this._user.provider);i?i.signOut(e).then(()=>{n(),this._user=null,this._authState.next(null)}).catch(t=>{r(t)}):r(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else r(t.ERR_NOT_LOGGED_IN);else r(t.ERR_NOT_INITIALIZED)})}}return t.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",t.ERR_NOT_LOGGED_IN="Not logged in",t.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",t.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",t.\u0275fac=function(e){return new(e||t)(i.LFG("SocialAuthServiceConfig"))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),PE=(()=>{class t{constructor(t){if(t)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:t,providers:[NE,{provide:"SocialAuthServiceConfig",useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(t,12))},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[NE],imports:[[r.ez]]}),t})();var RE=n(8819);class DE{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new ME(t,this.observables,this.project))}}class ME extends G{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Y(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class LE{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new FE(t,this.predicate))}}class FE extends H.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function UE(t){return null==t}function jE(t){return"function"==typeof t.set}function VE(t,e){return jE(e)?e:t.ref(e)}function qE(t,e){if("string"==typeof t)return e.stringCase();if(jE(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function BE(t,e,n="on",r=Br.z){return new W.y(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe((0,ot.U)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),(0,RE.B)())}function HE(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function GE(t,e){const{payload:n,prevKey:r,key:i}=e,o=HE(t,i),s=function(t,e){if(UE(e))return 0;{const n=HE(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function zE(t){return(UE(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function KE(t,e,n){return function(t,e,n){return BE(t,"value","once",n).pipe(at(r=>{const i=[(0,F.of)(r)];return e.forEach(e=>i.push(BE(t,e,"on",n))),(0,xy.T)(...i).pipe(gt(GE,[]))}),Kr())}(t,e=zE(e),n)}function WE(t,e,n){const r=(e=zE(e)).map(e=>BE(t,e,"on",n));return(0,xy.T)(...r)}function YE(t,e){return function(n,r){return qE(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function ZE(t){return function(e){return e?qE(e,{stringCase:()=>t.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):t.remove()}}function QE(t,e){return function(){return BE(t,"value","on",e)}}const $E=new i.OlP("angularfire2.realtimeDatabaseURL"),XE=new i.OlP("angularfire2.database.use-emulator");let JE=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Qr.HU(i),this.keepUnstableUntilFirst=(0,Qr.ss)(this.schedulers);const a=o,u=(0,Qr.on)(t,i,e);!$r.Z.auth&&s&&(0,Qr.yq)(),this.database=(0,Qr.sI)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>VE(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:YE(r,"update"),set:YE(r,"set"),push:t=>r.push(t),remove:ZE(r),snapshotChanges:r=>KE(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>WE(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return BE(t,"value","on",e).pipe((0,ot.U)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new DE(t,n))}}(e),(0,ot.U)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new LE(r))),(0,ot.U)(t=>t.actions));var r}(t,WE(t,e).pipe(gt((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>KE(t,r,n).pipe((0,ot.U)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)}}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>VE(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>QE(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>QE(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,(0,ot.U)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(Qr.Dh),i.LFG(Qr.xv,8),i.LFG($E,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(XE,8),i.LFG(Ly,8))},t.\u0275prov=i.Yz7({factory:function(){return new t(i.LFG(Qr.Dh),i.LFG(Qr.xv,8),i.LFG($E,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(XE,8),i.LFG(Ly,8))},token:t,providedIn:"any"}),t})(),tS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[JE]}),t})();const eS={apiKey:"AIzaSyB_nTs0o-9-63YDgjR31GLuFUU27RO-KjU",authDomain:"leverx-554f0.firebaseapp.com",projectId:"leverx-554f0",storageBucket:"leverx-554f0.appspot.com",messagingSenderId:"680924284770",appId:"1:680924284770:web:4e9c88a03e9fc58a6d0e3b"};var nS=n(5419);let rS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t,bootstrap:[kE]}),t.\u0275inj=i.cJS({providers:[s_,rI,iI,bE],imports:[[Qr.hO.initializeApp(eS),M,TE,Hy,tS,o_,PE,uE,nS.CreatingPageModule]]}),t})();R().bootstrapModule(rS).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__extends:()=>i,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>u,__metadata:()=>c,__awaiter:()=>l,__generator:()=>h,__createBinding:()=>f,__exportStar:()=>d,__values:()=>p,__read:()=>g,__spread:()=>v,__spreadArrays:()=>m,__spreadArray:()=>y,__await:()=>_,__asyncGenerator:()=>b,__asyncDelegator:()=>w,__asyncValues:()=>T,__makeTemplateObject:()=>C,__importStar:()=>E,__importDefault:()=>S,__classPrivateFieldGet:()=>k,__classPrivateFieldSet:()=>x});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof _?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:_(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var I=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return I(e,t),e}function S(t){return t&&t.__esModule?t:{default:t}}function k(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function x(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}}},t=>{"use strict";t(t.s=6975)}]);